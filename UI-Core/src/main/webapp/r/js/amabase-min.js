/*! Lo-Dash 1.2.0 (Custom Build) <http://lodash.com/> */
(function(bg){var aN;var aU=typeof exports=="object"&&exports;var b=typeof module=="object"&&module&&module.exports==aU&&module;var K=typeof global=="object"&&global;if(K.global===K||K.window===K){bg=K}var a6=0;var aY={};var l=+new Date+"";var af=200;var X=/\b__p \+= '';/g,bU=/\b(__p \+=) '' \+/g,N=/(__e\(.*?\)|\b__t\)) \+\n'';/g;var bd=/&(?:amp|lt|gt|quot|#39);/g;var L=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g;var m=/\w*$/;var bF=/<%=([\s\S]+?)%>/g;var ak=/($^)/;var bi=/[&<>"']/g;var bS=/['\n\r\t\u2028\u2029\\]/g;var a9=0;var be="[object Arguments]",aT="[object Array]",D="[object Boolean]",bp="[object Date]",a="[object Function]",bm="[object Number]",ap="[object Object]",aE="[object RegExp]",bh="[object String]";var bM={"boolean":false,"function":true,object:true,number:false,string:false,"undefined":false};var bs={"\\":"\\","'":"'","\n":"n","\r":"r","\t":"t","\u2028":"u2028","\u2029":"u2029"};var a8=Array(),W=Object();var bK=bg._;var a2=RegExp("^"+String(W.valueOf).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$");var M=Math.ceil,aV=bg.clearTimeout,aI=a8.concat,bE=Math.floor,Q=W.hasOwnProperty,o=a8.push,O=bg.setTimeout,r=W.toString;var a5=a2.test(a5=r.bind)&&a5,ag=a2.test(ag=Array.isArray)&&ag,A=bg.isFinite,aF=bg.isNaN,bk=a2.test(bk=Object.keys)&&bk,bl=Math.max,i=Math.min,aL=Math.random,y=a8.slice;var R=a2.test(bg.attachEvent),k=a5&&!/\n|true/.test(a5+R);function I(bY){return(bY instanceof I)?bY:new bG(bY)}var v={};(function(){var bY={"0":1,length:1};v.argsObject=arguments.constructor==Object&&!(arguments instanceof Array);v.fastBind=a5&&!k;v.spliceObjects=(a8.splice.call(bY,0,1),!bY[0])}(1));I.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:bF,variable:""};function ba(bY){return bY.charCodeAt(0)}function aW(b0,bZ){var bY=b0.index,b1=bZ.index;b0=b0.criteria;bZ=bZ.criteria;if(b0!==bZ){if(b0>bZ||typeof b0=="undefined"){return 1}if(b0<bZ||typeof bZ=="undefined"){return -1}}return bY<b1?-1:1}function E(b0,b3,b2,b5){var b4=p(b0),bY=!b2,b6=b3;if(bY){var bZ=b5;b2=b3}else{if(!b4){if(!b5){throw new TypeError}b3=b0}}function b1(){var b9=arguments,b8=bY?this:b3;if(!b4){b0=b3[b6]}if(b2.length){b9=b9.length?(b9=y.call(b9),bZ?b9.concat(b2):b2.concat(b9)):b2}if(this instanceof b1){d.prototype=b0.prototype;b8=new d;d.prototype=null;var b7=b0.apply(b8,b9);return bW(b7)?b7:b8}return b0.apply(b8,b9)}return b1}function bQ(bY){return"\\"+bs[bY]}function an(bY){return H[bY]}function bG(bY){this.__wrapped__=bY}bG.prototype=I.prototype;function d(){}function ao(bY){return aX[bY]}function V(bY){return r.call(bY)==be}if(!V(arguments)){V=function(bY){return bY?Q.call(bY,"callee"):false}}var ae=function(b0){var bZ,b1=b0,bY=[];if(!b1){return bY}if(!(bM[typeof b0])){return bY}for(bZ in b1){if(Q.call(b1,bZ)){bY.push(bZ)}}return bY};var bc=!bk?ae:function(bY){if(!bW(bY)){return[]}return bk(bY)};var H={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};var aX=a7(H);function at(bZ){if(!bZ){return bZ}for(var bY=1,b1=arguments.length;bY<b1;bY++){var b2=arguments[bY];if(b2){for(var b0 in b2){bZ[b0]=b2[b0]}}}return bZ}function bz(bY){return bW(bY)?(aD(bY)?y.call(bY):at({},bY)):bY}function au(bZ){if(!bZ){return bZ}for(var bY=1,b1=arguments.length;bY<b1;bY++){var b2=arguments[bY];if(b2){for(var b0 in b2){if(bZ[b0]==null){bZ[b0]=b2[b0]}}}}return bZ}var e=function(b1,b2){var bZ,b0=b1,bY=b0;if(!b0){return bY}if(!bM[typeof b0]){return bY}for(bZ in b0){if(b2(b0[bZ],bZ,b1)===aY){return bY}}return bY};var aP=function(b1,b2){var bZ,b0=b1,bY=b0;if(!b0){return bY}if(!bM[typeof b0]){return bY}for(bZ in b0){if(Q.call(b0,bZ)){if(b2(b0[bZ],bZ,b1)===aY){return bY}}}return bY};function bD(bZ){var bY=[];e(bZ,function(b1,b0){if(p(b1)){bY.push(b0)}});return bY.sort()}function bL(bY,bZ){return bY?Q.call(bY,bZ):false}function a7(b0){var bZ=-1,b2=bc(b0),b3=b2.length,bY={};while(++bZ<b3){var b1=b2[bZ];bY[b0[b1]]=b1}return bY}var aD=ag||function(bY){return r.call(bY)==aT};function aJ(bY){return bY===true||bY===false||r.call(bY)==D}function aa(bY){return r.call(bY)==bp}function a3(bY){return bY?bY.nodeType===1:false}function br(bZ){if(!bZ){return true}if(aD(bZ)||bw(bZ)){return !bZ.length}for(var bY in bZ){if(Q.call(bZ,bY)){return false}}return true}function a4(b7,b5,b0,bZ){if(b7===b5){return b7!==0||(1/b7==1/b5)}var b3=typeof b7,b8=typeof b5;if(b7===b7&&(!b7||(b3!="function"&&b3!="object"))&&(!b5||(b8!="function"&&b8!="object"))){return false}if(b7==null||b5==null){return b7===b5}var b2=r.call(b7),b9=r.call(b5);if(b2!=b9){return false}switch(b2){case D:case bp:return +b7==+b5;case bm:return b7!=+b7?b5!=+b5:(b7==0?(1/b7==1/b5):b7==+b5);case aE:case bh:return b7==String(b5)}var b1=b2==aT;if(!b1){if(b7 instanceof I||b5 instanceof I){return a4(b7.__wrapped__||b7,b5.__wrapped__||b5,b0,bZ)}if(b2!=ap){return false}var b6=b7.constructor,b4=b5.constructor;if(b6!=b4&&!(p(b6)&&b6 instanceof b6&&p(b4)&&b4 instanceof b4)){return false}}b0||(b0=[]);bZ||(bZ=[]);var bY=b0.length;while(bY--){if(b0[bY]==b7){return bZ[bY]==b5}}var cb=true,ca=0;b0.push(b7);bZ.push(b5);if(b1){ca=b5.length;cb=ca==b7.length;if(cb){while(ca--){if(!(cb=a4(b7[ca],b5[ca],b0,bZ))){break}}}return cb}e(b5,function(ce,cd,cc){if(Q.call(cc,cd)){ca++;return !(cb=Q.call(b7,cd)&&a4(b7[cd],ce,b0,bZ))&&aY}});if(cb){e(b7,function(ce,cd,cc){if(Q.call(cc,cd)){return !(cb=--ca>-1)&&aY}})}return cb}function B(bY){return A(bY)&&!aF(parseFloat(bY))}function p(bY){return typeof bY=="function"}if(p(/x/)){p=function(bY){return r.call(bY)==a}}function bW(bY){return bY?bM[typeof bY]:false}function aR(bY){return ar(bY)&&bY!=+bY}function bP(bY){return bY===null}function ar(bY){return typeof bY=="number"||r.call(bY)==bm}function bH(bY){return r.call(bY)==aE}function bw(bY){return typeof bY=="string"||r.call(bY)==bh}function a0(bY){return typeof bY=="undefined"}function bt(bZ){var b0=aI.apply(a8,y.call(arguments,1)),bY={};e(bZ,function(b2,b1){if(bR(b0,b1)<0){bY[b1]=b2}});return bY}function aA(b0){var bZ=-1,b2=bc(b0),b3=b2.length,bY=Array(b3);while(++bZ<b3){var b1=b2[bZ];bY[bZ]=[b1,b0[b1]]}return bY}function aM(b0){var bZ=-1,b1=aI.apply(a8,y.call(arguments,1)),b2=b1.length,bY={};while(++bZ<b2){var b3=b1[bZ];if(b3 in b0){bY[b3]=b0[b3]}}return bY}function ax(b0){var bZ=-1,b1=bc(b0),b2=b1.length,bY=Array(b2);while(++bZ<b2){bY[bZ]=b0[b1[bZ]]}return bY}function U(b1,b0){var bZ=b1?b1.length:0,bY=false;if(typeof bZ=="number"){bY=bR(b1,b0)>-1}else{aP(b1,function(b2){return(bY=b2===b0)&&aY})}return bY}function aK(b0,b1,bZ){var bY={};b1=w(b1,bZ);aC(b0,function(b3,b2,b4){b2=String(b1(b3,b2,b4));(Q.call(bY,b2)?bY[b2]++:bY[b2]=1)});return bY}function q(b2,b3,bZ){var bY=true;b3=w(b3,bZ);var b0=-1,b1=b2?b2.length:0;if(typeof b1=="number"){while(++b0<b1){if(!(bY=!!b3(b2[b0],b0,b2))){break}}}else{aP(b2,function(b5,b4,b6){return !(bY=!!b3(b5,b4,b6))&&aY})}return bY}function aQ(b3,b4,bZ){var bY=[];b4=w(b4,bZ);var b0=-1,b1=b3?b3.length:0;if(typeof b1=="number"){while(++b0<b1){var b2=b3[b0];if(b4(b2,b0,b3)){bY.push(b2)}}}else{aP(b3,function(b6,b5,b7){if(b4(b6,b5,b7)){bY.push(b6)}})}return bY}function aH(b3,b4,bZ){b4=w(b4,bZ);var b0=-1,b1=b3?b3.length:0;if(typeof b1=="number"){while(++b0<b1){var b2=b3[b0];if(b4(b2,b0,b3)){return b2}}}else{var bY;aP(b3,function(b6,b5,b7){if(b4(b6,b5,b7)){bY=b6;return aY}});return bY}}function z(bY,bZ){return f(bY,bZ,true)}function aC(b1,b2,bY){var bZ=-1,b0=b1?b1.length:0;b2=b2&&typeof bY=="undefined"?b2:w(b2,bY);if(typeof b0=="number"){while(++bZ<b0){if(b2(b1[bZ],bZ,b1)===aY){break}}}else{aP(b1,b2)}}function aq(b0,b1,bZ){var bY={};b1=w(b1,bZ);aC(b0,function(b3,b2,b4){b2=String(b1(b3,b2,b4));(Q.call(bY,b2)?bY[b2]:bY[b2]=[]).push(b3)});return bY}function x(b4,bZ){var b1=y.call(arguments,2),b0=-1,b3=typeof bZ=="function",b2=b4?b4.length:0,bY=Array(typeof b2=="number"?b2:0);aC(b4,function(b5){bY[++b0]=(b3?bZ:b5[bZ]).apply(b5,b1)});return bY}function al(b2,b3,bZ){var b0=-1,b1=b2?b2.length:0;b3=w(b3,bZ);if(typeof b1=="number"){var bY=Array(b1);while(++b0<b1){bY[b0]=b3(b2[b0],b0,b2)}}else{bY=[];aP(b2,function(b5,b4,b6){bY[++b0]=b3(b5,b4,b6)})}return bY}function ai(b4,b5,bZ){var b2=-Infinity,bY=b2;var b0=-1,b1=b4?b4.length:0;if(!b5&&typeof b1=="number"){while(++b0<b1){var b3=b4[b0];if(b3>bY){bY=b3}}}else{b5=w(b5,bZ);aC(b4,function(b7,b6,b9){var b8=b5(b7,b6,b9);if(b8>b2){b2=b8;bY=b7}})}return bY}function bo(b4,b5,bZ){var b2=Infinity,bY=b2;var b0=-1,b1=b4?b4.length:0;if(!b5&&typeof b1=="number"){while(++b0<b1){var b3=b4[b0];if(b3<bY){bY=b3}}}else{b5=w(b5,bZ);aC(b4,function(b7,b6,b9){var b8=b5(b7,b6,b9);if(b8<b2){b2=b8;bY=b7}})}return bY}function bV(b2,b1){var bZ=-1,b0=b2?b2.length:0;if(typeof b0=="number"){var bY=Array(b0);while(++bZ<b0){bY[bZ]=b2[bZ][b1]}}return bY||al(b2,b1)}function bq(b3,b4,bZ,bY){if(!b3){return bZ}var b1=arguments.length<3;b4=w(b4,bY,4);var b0=-1,b2=b3.length;if(typeof b2=="number"){if(b1){bZ=b3[++b0]}while(++b0<b2){bZ=b4(bZ,b3[b0],b0,b3)}}else{aP(b3,function(b6,b5,b7){bZ=b1?(b1=false,b6):b4(bZ,b6,b5,b7)})}return bZ}function bI(b4,b5,bZ,bY){var b3=b4,b2=b4?b4.length:0,b1=arguments.length<3;if(typeof b2!="number"){var b0=bc(b4);b2=b0.length}b5=w(b5,bY,4);aC(b4,function(b7,b6,b8){b6=b0?b0[--b2]:--b2;bZ=b1?(b1=false,b3[b6]):b5(bZ,b3[b6],b6,b8)});return bZ}function s(bZ,b0,bY){b0=w(b0,bY);return aQ(bZ,function(b2,b1,b3){return !b0(b2,b1,b3)})}function ay(b1){var bZ=-1,b0=b1?b1.length:0,bY=Array(typeof b0=="number"?b0:0);aC(b1,function(b3){var b2=bE(aL()*(++bZ+1));bY[bZ]=bY[b2];bY[b2]=b3});return bY}function Z(bZ){var bY=bZ?bZ.length:0;return typeof bY=="number"?bY:bc(bZ).length}function Y(b2,b3,bZ){var bY;b3=w(b3,bZ);var b0=-1,b1=b2?b2.length:0;if(typeof b1=="number"){while(++b0<b1){if((bY=b3(b2[b0],b0,b2))){break}}}else{aP(b2,function(b5,b4,b6){return(bY=b3(b5,b4,b6))&&aY})}return !!bY}function ab(b2,b3,bZ){var b0=-1,b1=b2?b2.length:0,bY=Array(typeof b1=="number"?b1:0);b3=w(b3,bZ);aC(b2,function(b5,b4,b6){bY[++b0]={criteria:b3(b5,b4,b6),index:b0,value:b5}});b1=bY.length;bY.sort(aW);while(b1--){bY[b1]=bY[b1].value}return bY}function u(bY){if(aD(bY)){return y.call(bY)}if(bY&&typeof bY.length=="number"){return al(bY)}return ax(bY)}function f(b0,bY,bZ){return(bZ&&br(bY))?null:(bZ?aH:aQ)(b0,bY)}function C(b2){var bZ=-1,b0=b2?b2.length:0,bY=[];while(++bZ<b0){var b1=b2[bZ];if(b1){bY.push(b1)}}return bY}function c(b3){var bZ=-1,b1=b3.length,b0=aI.apply(a8,y.call(arguments,1)),bY=[];while(++bZ<b1){var b2=b3[bZ];if(bR(b0,b2)<0){bY.push(b2)}}return bY}function ah(b3,b2,bY){if(b3){var b1=0,b0=b3.length;if(typeof b2!="number"&&b2!=null){var bZ=-1;b2=w(b2,bY);while(++bZ<b0&&b2(b3[bZ],bZ,b3)){b1++}}else{b1=b2;if(b1==null||bY){return b3[0]}}return y.call(b3,0,i(bl(0,b1),b0))}}function by(b3,bZ){var b0=-1,b1=b3?b3.length:0,bY=[];while(++b0<b1){var b2=b3[b0];if(aD(b2)){o.apply(bY,bZ?b2:by(b2))}else{bY.push(b2)}}return bY}function bR(b2,b1,bZ){var bY=-1,b0=b2?b2.length:0;if(typeof bZ=="number"){bY=(bZ<0?bl(0,b0+bZ):bZ||0)-1}else{if(bZ){bY=ac(b2,b1);return b2[bY]===b1?bY:-1}}while(++bY<b0){if(b2[bY]===b1){return bY}}return -1}function bT(b3,b2,bY){if(!b3){return[]}var b1=0,b0=b3.length;if(typeof b2!="number"&&b2!=null){var bZ=b0;b2=w(b2,bY);while(bZ--&&b2(b3[bZ],bZ,b3)){b1++}}else{b1=(b2==null||bY)?1:b2||b1}return y.call(b3,0,i(bl(0,b0-b1),b0))}function bv(b5){var b1=arguments,b3=b1.length,b0=-1,b2=b5?b5.length:0,bY=[];outer:while(++b0<b2){var b4=b5[b0];if(bR(bY,b4)<0){var bZ=b3;while(--bZ){if(bR(b1[bZ],b4)<0){continue outer}}bY.push(b4)}}return bY}function av(b3,b2,bY){if(b3){var b1=0,b0=b3.length;if(typeof b2!="number"&&b2!=null){var bZ=b0;b2=w(b2,bY);while(bZ--&&b2(b3[bZ],bZ,b3)){b1++}}else{b1=b2;if(b1==null||bY){return b3[b0-1]}}return y.call(b3,bl(0,b0-b1))}}function bX(b1,b0,bZ){var bY=b1?b1.length:0;if(typeof bZ=="number"){bY=(bZ<0?bl(0,bY+bZ):i(bZ,bY-1))+1}while(bY--){if(b1[bY]===b0){return bY}}return -1}function P(b3,bZ,b2){b3=+b3||0;b2=+b2||1;if(bZ==null){bZ=b3;b3=0}var b0=-1,b1=bl(0,M((bZ-b3)/b2)),bY=Array(b1);while(++b0<b1){bY[b0]=b3;b3+=b2}return bY}function bb(b3,b2,bY){if(typeof b2!="number"&&b2!=null){var b1=0,bZ=-1,b0=b3?b3.length:0;b2=w(b2,bY);while(++bZ<b0&&b2(b3[bZ],bZ,b3)){b1++}}else{b1=(b2==null||bY)?1:bl(0,b2)}return y.call(b3,b1)}function ac(b4,b2,b3,bZ){var bY=0,b1=b4?b4.length:bY;b3=b3?w(b3,bZ,1):aj;b2=b3(b2);while(bY<b1){var b0=(bY+b1)>>>1;(b3(b4[b0])<b2)?bY=b0+1:b1=b0}return bY}function n(bY){if(!aD(bY)){arguments[0]=bY?y.call(bY):a8}return aS(aI.apply(a8,arguments))}function aS(b3,b0,b6,b4){var b2=-1,bZ=b3?b3.length:0,b7=[],bY=b7;if(typeof b0!="boolean"&&b0!=null){b4=b6;b6=b0;b0=false}if(b6!=null){bY=[];b6=w(b6,b4)}while(++b2<bZ){var b5=b3[b2],b1=b6?b6(b5,b2,b3):b5;if(b0?!b2||bY[bY.length-1]!==b1:bR(bY,b1)<0){if(b6){bY.push(b1)}b7.push(b5)}}return b7}function bO(bY){return c(bY,y.call(arguments,1))}function j(b1){var bZ=-1,b0=b1?ai(bV(arguments,"length")):0,bY=Array(b0);while(++bZ<b0){bY[bZ]=bV(arguments,bZ)}return bY}function bA(b3,bZ){var b0=-1,b2=b3?b3.length:0,bY={};while(++b0<b2){var b1=b3[b0];if(bZ){bY[b1]=bZ[b0]}else{bY[b1[0]]=b1[1]}}return bY}function G(bZ,bY){if(bZ<1){return bY()}return function(){if(--bZ<1){return bY.apply(this,arguments)}}}function a1(bZ,bY){return v.fastBind||(a5&&arguments.length>2)?a5.call.apply(a5,arguments):E(bZ,bY,y.call(arguments,2))}function aw(b0){var bY=arguments.length>1?aI.apply(a8,y.call(arguments,1)):bD(b0),bZ=-1,b2=bY.length;while(++bZ<b2){var b1=bY[bZ];b0[b1]=a1(b0[b1],b0)}return b0}function bC(){var bY=arguments;return function(){var bZ=arguments,b0=bY.length;while(b0--){bZ=[bY[b0].apply(this,bZ)]}return bZ[0]}}function w(b1,bY,b2){if(b1==null){return aj}var b0=typeof b1;if(b0!="function"){if(b0!="object"){return function(b3){return b3[b1]}}var bZ=bc(b1);return function(b4){var b5=bZ.length,b3=false;while(b5--){if(!(b3=b4[bZ[b5]]===b1[bZ[b5]])){break}}return b3}}if(typeof bY!="undefined"){if(b2===1){return function(b3){return b1.call(bY,b3)}}if(b2===2){return function(b4,b3){return b1.call(bY,b4,b3)}}if(b2===4){return function(b3,b5,b4,b6){return b1.call(bY,b3,b5,b4,b6)}}return function(b4,b3,b5){return b1.call(bY,b4,b3,b5)}}return b1}function bB(b3,b4,b0){var b2,bY,bZ,b5;function b1(){b5=null;if(!b0){bY=b3.apply(bZ,b2)}}return function(){var b6=b0&&!b5;b2=arguments;bZ=this;aV(b5);b5=O(b1,b4);if(b6){bY=b3.apply(bZ,b2)}return bY}}function S(bZ){var bY=y.call(arguments,1);return O(function(){bZ.apply(aN,bY)},1)}function aO(bZ,b0){var bY=y.call(arguments,2);return O(function(){bZ.apply(aN,bY)},b0)}function T(bZ,b0){var bY={};return function(){var b1=l+(b0?b0.apply(this,arguments):arguments[0]);return Q.call(bY,b1)?bY[b1]:(bY[b1]=bZ.apply(this,arguments))}}function bu(b0){var bZ,bY;return function(){if(bZ){return bY}bZ=true;bY=b0.apply(this,arguments);b0=null;return bY}}function bJ(bY){return E(bY,y.call(arguments,1))}function bn(b3,b4){var b1,bY,bZ,b5,b0=0;function b2(){b0=new Date;b5=null;bY=b3.apply(bZ,b1)}return function(){var b6=new Date,b7=b4-(b6-b0);b1=arguments;bZ=this;if(b7<=0){aV(b5);b5=null;b0=b6;bY=b3.apply(bZ,b1)}else{if(!b5){b5=O(b2,b7)}}return bY}}function aZ(bY,bZ){return function(){var b0=[bY];o.apply(b0,arguments);return bZ.apply(this,b0)}}function ad(bY){return bY==null?"":String(bY).replace(bi,an)}function aj(bY){return bY}function t(bY){aC(bD(bY),function(bZ){var b0=I[bZ]=bY[bZ];I.prototype[bZ]=function(){var b2=[this.__wrapped__];o.apply(b2,arguments);var b1=b0.apply(I,b2);if(this.__chain__){b1=new bG(b1);b1.__chain__=true}return b1}})}function bN(){bg._=bK;return this}function bf(bZ,bY){if(bZ==null&&bY==null){bY=1}bZ=+bZ||0;if(bY==null){bY=bZ;bZ=0}return bZ+bE(aL()*((+bY||0)-bZ+1))}function F(bY,b0){var bZ=bY?bY[b0]:null;return p(bZ)?bY[b0]():bZ}function aG(b3,b0,b5){b3||(b3="");b5=au({},b5,I.templateSettings);var b1=0,bY="__p += '",bZ=b5.variable;var b4=RegExp((b5.escape||ak).source+"|"+(b5.interpolate||ak).source+"|"+(b5.evaluate||ak).source+"|$","g");b3.replace(b4,function(b7,ca,b8,b9,cb){bY+=b3.slice(b1,cb).replace(bS,bQ);if(ca){bY+="' +\n_.escape("+ca+") +\n'"}if(b9){bY+="';\n"+b9+";\n__p += '"}if(b8){bY+="' +\n((__t = ("+b8+")) == null ? '' : __t) +\n'"}b1=cb+b7.length;return b7});bY+="';\n";if(!bZ){bZ="obj";bY="with ("+bZ+" || {}) {\n"+bY+"\n}\n"}bY="function("+bZ+") {\nvar __t, __p = '', __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n"+bY+"return __p\n}";try{var b6=Function("_","return "+bY)(I)}catch(b2){b2.source=bY;throw b2}if(b0){return b6(b0)}b6.source=bY;return b6}function g(b2,b1,bZ){var b0=-1,bY=Array(b2>-1?b2:0);while(++b0<b2){bY[b0]=b1.call(bZ,b0)}return bY}function h(bY){return bY==null?"":String(bY).replace(bd,ao)}function bj(bY){var bZ=++a6+"";return bY?bY+bZ:bZ}function az(bY){bY=new bG(bY);bY.__chain__=true;return bY}function bx(bY,bZ){bZ(bY);return bY}function aB(){this.__chain__=true;return this}function am(){return String(this.__wrapped__)}function J(){return this.__wrapped__}I.after=G;I.bind=a1;I.bindAll=aw;I.compact=C;I.compose=bC;I.countBy=aK;I.debounce=bB;I.defaults=au;I.defer=S;I.delay=aO;I.difference=c;I.filter=aQ;I.flatten=by;I.forEach=aC;I.functions=bD;I.groupBy=aq;I.initial=bT;I.intersection=bv;I.invert=a7;I.invoke=x;I.keys=bc;I.map=al;I.max=ai;I.memoize=T;I.min=bo;I.omit=bt;I.once=bu;I.pairs=aA;I.partial=bJ;I.pick=aM;I.pluck=bV;I.range=P;I.reject=s;I.rest=bb;I.shuffle=ay;I.sortBy=ab;I.tap=bx;I.throttle=bn;I.times=g;I.toArray=u;I.union=n;I.uniq=aS;I.values=ax;I.where=f;I.without=bO;I.wrap=aZ;I.zip=j;I.collect=al;I.drop=bb;I.each=aC;I.extend=at;I.methods=bD;I.object=bA;I.select=aQ;I.tail=bb;I.unique=aS;I.clone=bz;I.contains=U;I.escape=ad;I.every=q;I.find=aH;I.findWhere=z;I.has=bL;I.identity=aj;I.indexOf=bR;I.isArguments=V;I.isArray=aD;I.isBoolean=aJ;I.isDate=aa;I.isElement=a3;I.isEmpty=br;I.isEqual=a4;I.isFinite=B;I.isFunction=p;I.isNaN=aR;I.isNull=bP;I.isNumber=ar;I.isObject=bW;I.isRegExp=bH;I.isString=bw;I.isUndefined=a0;I.lastIndexOf=bX;I.mixin=t;I.noConflict=bN;I.random=bf;I.reduce=bq;I.reduceRight=bI;I.result=F;I.size=Z;I.some=Y;I.sortedIndex=ac;I.template=aG;I.unescape=h;I.uniqueId=bj;I.all=q;I.any=Y;I.detect=aH;I.foldl=bq;I.foldr=bI;I.include=U;I.inject=bq;I.first=ah;I.last=av;I.take=ah;I.head=ah;I.chain=az;I.VERSION="1.2.0";t(I);I.prototype.chain=aB;I.prototype.value=J;aC(["pop","push","reverse","shift","sort","splice","unshift"],function(bY){var bZ=a8[bY];I.prototype[bY]=function(){var b0=this.__wrapped__;bZ.apply(b0,arguments);if(!v.spliceObjects&&b0.length===0){delete b0[0]}return this}});aC(["concat","join","slice"],function(bY){var bZ=a8[bY];I.prototype[bY]=function(){var b1=this.__wrapped__,b0=bZ.apply(b1,arguments);if(this.__chain__){b0=new bG(b0);b0.__chain__=true}return b0}});if(typeof define=="function"&&typeof define.amd=="object"&&define.amd){bg._=I;define(function(){return I})}else{if(aU&&!aU.nodeType){if(b){(b.exports=I)._=I}else{aU._=I}}else{bg._=I}}}(this));
/*! jQuery JSON plugin 2.4.0 */
(function($){var escape=/["\\\x00-\x1f\x7f-\x9f]/g,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},hasOwn=Object.prototype.hasOwnProperty;$.toJSON=typeof JSON==="object"&&JSON.stringify?JSON.stringify:function(o){if(o===null){return"null"}var pairs,k,name,val,type=$.type(o);if(type==="undefined"){return undefined}if(type==="number"||type==="boolean"){return String(o)}if(type==="string"){return $.quoteString(o)}if(typeof o.toJSON==="function"){return $.toJSON(o.toJSON())}if(type==="date"){var month=o.getUTCMonth()+1,day=o.getUTCDate(),year=o.getUTCFullYear(),hours=o.getUTCHours(),minutes=o.getUTCMinutes(),seconds=o.getUTCSeconds(),milli=o.getUTCMilliseconds();if(month<10){month="0"+month}if(day<10){day="0"+day}if(hours<10){hours="0"+hours}if(minutes<10){minutes="0"+minutes}if(seconds<10){seconds="0"+seconds}if(milli<100){milli="0"+milli}if(milli<10){milli="0"+milli}return'"'+year+"-"+month+"-"+day+"T"+hours+":"+minutes+":"+seconds+"."+milli+'Z"'}pairs=[];if($.isArray(o)){for(k=0;k<o.length;k++){pairs.push($.toJSON(o[k])||"null")}return"["+pairs.join(",")+"]"}if(typeof o==="object"){for(k in o){if(hasOwn.call(o,k)){type=typeof k;if(type==="number"){name='"'+k+'"'}else{if(type==="string"){name=$.quoteString(k)}else{continue}}type=typeof o[k];if(type!=="function"&&type!=="undefined"){val=$.toJSON(o[k]);pairs.push(name+":"+val)}}}return"{"+pairs.join(",")+"}"}};$.evalJSON=typeof JSON==="object"&&JSON.parse?JSON.parse:function(str){return eval("("+str+")")};$.secureEvalJSON=typeof JSON==="object"&&JSON.parse?JSON.parse:function(str){var filtered=str.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"");if(/^[\],:{}\s]*$/.test(filtered)){return eval("("+str+")")}throw new SyntaxError("Error parsing JSON, source is not valid.")};$.quoteString=function(str){if(str.match(escape)){return'"'+str.replace(escape,function(a){var c=meta[a];if(typeof c==="string"){return c}c=a.charCodeAt();return"\\u00"+Math.floor(c/16).toString(16)+(c%16).toString(16)})+'"'}return'"'+str+'"'}}(jQuery));
/*! WebPurify (http://www.webpurify.com) Profanity Filter Utility */
(function(e){var f="https://api1.webpurify.com/services/rest/?api_key=%API_KEY%&method=%METHOD%&format=json&lang=%LANG%&callback=%CALLBACK%&text=%TEXT%";var g="en";var d="";var b={check:"webpurify.live.check",checkcount:"webpurify.live.checkcount",replace:"webpurify.live.replace",returnProfanity:"webpurify.live.return"};e.webpurify={init:function(i){d=i;f=f.replace(/%API_KEY%/g,d);f=f.replace(/%LANG%/g,g)},check:function(j,k){var i=a(b.check,j);c(i,function(m){var l=m.rsp.found>0;k(l)})},checkcount:function(j,k){var i=a(b.checkcount,j);c(i,function(m){var l=m.rsp.found;k(l)})},replace:function(k,j,l){var i=a(b.replace,k);i+="&replacesymbol="+escape(j);c(i,function(n){var m=n.rsp.text;l(m)})},returnProfanity:function(j,k){var i=a(b.returnProfanity,j);c(i,function(m){var l=m.rsp.expletive;k(l)})}};function a(k,i){var j=h("%METHOD%",k,f);j=h("%TEXT%",i,j);j=h("%CALLBACK%","?",j);return j}function h(k,i,j){var l=new RegExp(k,"g");return j.replace(l,i)}function c(j,i){e.ajax({type:"GET",url:j,dataType:"jsonp",success:i,data:{},async:false,error:function(n,l,k){}})}})(jQuery);
/*! jquery.dataTables.js version: 1.9.4 */
(function(window,document,undefined){(function(factory){if(typeof define==="function"&&define.amd){define(["jquery"],factory)}else{if(jQuery&&!jQuery.fn.dataTable){factory(jQuery)}}}(function($){var DataTable=function(oInit){function _fnAddColumn(oSettings,nTh){var oDefaults=DataTable.defaults.columns;var iCol=oSettings.aoColumns.length;var oCol=$.extend({},DataTable.models.oColumn,oDefaults,{sSortingClass:oSettings.oClasses.sSortable,sSortingClassJUI:oSettings.oClasses.sSortJUI,nTh:nTh?nTh:document.createElement("th"),sTitle:oDefaults.sTitle?oDefaults.sTitle:nTh?nTh.innerHTML:"",aDataSort:oDefaults.aDataSort?oDefaults.aDataSort:[iCol],mData:oDefaults.mData?oDefaults.oDefaults:iCol});oSettings.aoColumns.push(oCol);if(oSettings.aoPreSearchCols[iCol]===undefined||oSettings.aoPreSearchCols[iCol]===null){oSettings.aoPreSearchCols[iCol]=$.extend({},DataTable.models.oSearch)}else{var oPre=oSettings.aoPreSearchCols[iCol];if(oPre.bRegex===undefined){oPre.bRegex=true}if(oPre.bSmart===undefined){oPre.bSmart=true}if(oPre.bCaseInsensitive===undefined){oPre.bCaseInsensitive=true}}_fnColumnOptions(oSettings,iCol,null)}function _fnColumnOptions(oSettings,iCol,oOptions){var oCol=oSettings.aoColumns[iCol];if(oOptions!==undefined&&oOptions!==null){if(oOptions.mDataProp&&!oOptions.mData){oOptions.mData=oOptions.mDataProp}if(oOptions.sType!==undefined){oCol.sType=oOptions.sType;oCol._bAutoType=false}$.extend(oCol,oOptions);_fnMap(oCol,oOptions,"sWidth","sWidthOrig");if(oOptions.iDataSort!==undefined){oCol.aDataSort=[oOptions.iDataSort]}_fnMap(oCol,oOptions,"aDataSort")}var mRender=oCol.mRender?_fnGetObjectDataFn(oCol.mRender):null;var mData=_fnGetObjectDataFn(oCol.mData);oCol.fnGetData=function(oData,sSpecific){var innerData=mData(oData,sSpecific);if(oCol.mRender&&(sSpecific&&sSpecific!=="")){return mRender(innerData,sSpecific,oData)}return innerData};oCol.fnSetData=_fnSetObjectDataFn(oCol.mData);if(!oSettings.oFeatures.bSort){oCol.bSortable=false}if(!oCol.bSortable||($.inArray("asc",oCol.asSorting)==-1&&$.inArray("desc",oCol.asSorting)==-1)){oCol.sSortingClass=oSettings.oClasses.sSortableNone;oCol.sSortingClassJUI=""}else{if($.inArray("asc",oCol.asSorting)==-1&&$.inArray("desc",oCol.asSorting)==-1){oCol.sSortingClass=oSettings.oClasses.sSortable;oCol.sSortingClassJUI=oSettings.oClasses.sSortJUI}else{if($.inArray("asc",oCol.asSorting)!=-1&&$.inArray("desc",oCol.asSorting)==-1){oCol.sSortingClass=oSettings.oClasses.sSortableAsc;oCol.sSortingClassJUI=oSettings.oClasses.sSortJUIAscAllowed}else{if($.inArray("asc",oCol.asSorting)==-1&&$.inArray("desc",oCol.asSorting)!=-1){oCol.sSortingClass=oSettings.oClasses.sSortableDesc;oCol.sSortingClassJUI=oSettings.oClasses.sSortJUIDescAllowed}}}}}function _fnAdjustColumnSizing(oSettings){if(oSettings.oFeatures.bAutoWidth===false){return false}_fnCalculateColumnWidths(oSettings);for(var i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){oSettings.aoColumns[i].nTh.style.width=oSettings.aoColumns[i].sWidth}}function _fnVisibleToColumnIndex(oSettings,iMatch){var aiVis=_fnGetColumns(oSettings,"bVisible");return typeof aiVis[iMatch]==="number"?aiVis[iMatch]:null}function _fnColumnIndexToVisible(oSettings,iMatch){var aiVis=_fnGetColumns(oSettings,"bVisible");var iPos=$.inArray(iMatch,aiVis);return iPos!==-1?iPos:null}function _fnVisbleColumns(oSettings){return _fnGetColumns(oSettings,"bVisible").length}function _fnGetColumns(oSettings,sParam){var a=[];$.map(oSettings.aoColumns,function(val,i){if(val[sParam]){a.push(i)}});return a}function _fnDetectType(sData){var aTypes=DataTable.ext.aTypes;var iLen=aTypes.length;for(var i=0;i<iLen;i++){var sType=aTypes[i](sData);if(sType!==null){return sType}}return"string"}function _fnReOrderIndex(oSettings,sColumns){var aColumns=sColumns.split(",");var aiReturn=[];for(var i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){for(var j=0;j<iLen;j++){if(oSettings.aoColumns[i].sName==aColumns[j]){aiReturn.push(j);break}}}return aiReturn}function _fnColumnOrdering(oSettings){var sNames="";for(var i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){sNames+=oSettings.aoColumns[i].sName+","}if(sNames.length==iLen){return""}return sNames.slice(0,-1)}function _fnApplyColumnDefs(oSettings,aoColDefs,aoCols,fn){var i,iLen,j,jLen,k,kLen;if(aoColDefs){for(i=aoColDefs.length-1;i>=0;i--){var aTargets=aoColDefs[i].aTargets;if(!$.isArray(aTargets)){_fnLog(oSettings,1,"aTargets must be an array of targets, not a "+(typeof aTargets))}for(j=0,jLen=aTargets.length;j<jLen;j++){if(typeof aTargets[j]==="number"&&aTargets[j]>=0){while(oSettings.aoColumns.length<=aTargets[j]){_fnAddColumn(oSettings)}fn(aTargets[j],aoColDefs[i])}else{if(typeof aTargets[j]==="number"&&aTargets[j]<0){fn(oSettings.aoColumns.length+aTargets[j],aoColDefs[i])}else{if(typeof aTargets[j]==="string"){for(k=0,kLen=oSettings.aoColumns.length;k<kLen;k++){if(aTargets[j]=="_all"||$(oSettings.aoColumns[k].nTh).hasClass(aTargets[j])){fn(k,aoColDefs[i])}}}}}}}}if(aoCols){for(i=0,iLen=aoCols.length;i<iLen;i++){fn(i,aoCols[i])}}}function _fnAddData(oSettings,aDataSupplied){var oCol;var aDataIn=($.isArray(aDataSupplied))?aDataSupplied.slice():$.extend(true,{},aDataSupplied);var iRow=oSettings.aoData.length;var oData=$.extend(true,{},DataTable.models.oRow);oData._aData=aDataIn;oSettings.aoData.push(oData);var nTd,sThisType;for(var i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){oCol=oSettings.aoColumns[i];if(typeof oCol.fnRender==="function"&&oCol.bUseRendered&&oCol.mData!==null){_fnSetCellData(oSettings,iRow,i,_fnRender(oSettings,iRow,i))}else{_fnSetCellData(oSettings,iRow,i,_fnGetCellData(oSettings,iRow,i))}if(oCol._bAutoType&&oCol.sType!="string"){var sVarType=_fnGetCellData(oSettings,iRow,i,"type");if(sVarType!==null&&sVarType!==""){sThisType=_fnDetectType(sVarType);if(oCol.sType===null){oCol.sType=sThisType}else{if(oCol.sType!=sThisType&&oCol.sType!="html"){oCol.sType="string"}}}}}oSettings.aiDisplayMaster.push(iRow);if(!oSettings.oFeatures.bDeferRender){_fnCreateTr(oSettings,iRow)}return iRow}function _fnGatherData(oSettings){var iLoop,i,iLen,j,jLen,jInner,nTds,nTrs,nTd,nTr,aLocalData,iThisIndex,iRow,iRows,iColumn,iColumns,sNodeName,oCol,oData;if(oSettings.bDeferLoading||oSettings.sAjaxSource===null){nTr=oSettings.nTBody.firstChild;while(nTr){if(nTr.nodeName.toUpperCase()=="TR"){iThisIndex=oSettings.aoData.length;nTr._DT_RowIndex=iThisIndex;oSettings.aoData.push($.extend(true,{},DataTable.models.oRow,{nTr:nTr}));oSettings.aiDisplayMaster.push(iThisIndex);nTd=nTr.firstChild;jInner=0;while(nTd){sNodeName=nTd.nodeName.toUpperCase();if(sNodeName=="TD"||sNodeName=="TH"){_fnSetCellData(oSettings,iThisIndex,jInner,$.trim(nTd.innerHTML));jInner++}nTd=nTd.nextSibling}}nTr=nTr.nextSibling}}nTrs=_fnGetTrNodes(oSettings);nTds=[];for(i=0,iLen=nTrs.length;i<iLen;i++){nTd=nTrs[i].firstChild;while(nTd){sNodeName=nTd.nodeName.toUpperCase();if(sNodeName=="TD"||sNodeName=="TH"){nTds.push(nTd)}nTd=nTd.nextSibling}}for(iColumn=0,iColumns=oSettings.aoColumns.length;iColumn<iColumns;iColumn++){oCol=oSettings.aoColumns[iColumn];if(oCol.sTitle===null){oCol.sTitle=oCol.nTh.innerHTML}var bAutoType=oCol._bAutoType,bRender=typeof oCol.fnRender==="function",bClass=oCol.sClass!==null,bVisible=oCol.bVisible,nCell,sThisType,sRendered,sValType;if(bAutoType||bRender||bClass||!bVisible){for(iRow=0,iRows=oSettings.aoData.length;iRow<iRows;iRow++){oData=oSettings.aoData[iRow];nCell=nTds[(iRow*iColumns)+iColumn];if(bAutoType&&oCol.sType!="string"){sValType=_fnGetCellData(oSettings,iRow,iColumn,"type");if(sValType!==""){sThisType=_fnDetectType(sValType);if(oCol.sType===null){oCol.sType=sThisType}else{if(oCol.sType!=sThisType&&oCol.sType!="html"){oCol.sType="string"}}}}if(oCol.mRender){nCell.innerHTML=_fnGetCellData(oSettings,iRow,iColumn,"display")}else{if(oCol.mData!==iColumn){nCell.innerHTML=_fnGetCellData(oSettings,iRow,iColumn,"display")}}if(bRender){sRendered=_fnRender(oSettings,iRow,iColumn);nCell.innerHTML=sRendered;if(oCol.bUseRendered){_fnSetCellData(oSettings,iRow,iColumn,sRendered)}}if(bClass){nCell.className+=" "+oCol.sClass}if(!bVisible){oData._anHidden[iColumn]=nCell;nCell.parentNode.removeChild(nCell)}else{oData._anHidden[iColumn]=null}if(oCol.fnCreatedCell){oCol.fnCreatedCell.call(oSettings.oInstance,nCell,_fnGetCellData(oSettings,iRow,iColumn,"display"),oData._aData,iRow,iColumn)}}}}if(oSettings.aoRowCreatedCallback.length!==0){for(i=0,iLen=oSettings.aoData.length;i<iLen;i++){oData=oSettings.aoData[i];_fnCallbackFire(oSettings,"aoRowCreatedCallback",null,[oData.nTr,oData._aData,i])}}}function _fnNodeToDataIndex(oSettings,n){return(n._DT_RowIndex!==undefined)?n._DT_RowIndex:null}function _fnNodeToColumnIndex(oSettings,iRow,n){var anCells=_fnGetTdNodes(oSettings,iRow);for(var i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){if(anCells[i]===n){return i}}return -1}function _fnGetRowData(oSettings,iRow,sSpecific,aiColumns){var out=[];for(var i=0,iLen=aiColumns.length;i<iLen;i++){out.push(_fnGetCellData(oSettings,iRow,aiColumns[i],sSpecific))}return out}function _fnGetCellData(oSettings,iRow,iCol,sSpecific){var sData;var oCol=oSettings.aoColumns[iCol];var oData=oSettings.aoData[iRow]._aData;if((sData=oCol.fnGetData(oData,sSpecific))===undefined){if(oSettings.iDrawError!=oSettings.iDraw&&oCol.sDefaultContent===null){_fnLog(oSettings,0,"Requested unknown parameter "+(typeof oCol.mData=="function"?"{mData function}":"'"+oCol.mData+"'")+" from the data source for row "+iRow);oSettings.iDrawError=oSettings.iDraw}return oCol.sDefaultContent}if(sData===null&&oCol.sDefaultContent!==null){sData=oCol.sDefaultContent}else{if(typeof sData==="function"){return sData()}}if(sSpecific=="display"&&sData===null){return""}return sData}function _fnSetCellData(oSettings,iRow,iCol,val){var oCol=oSettings.aoColumns[iCol];var oData=oSettings.aoData[iRow]._aData;oCol.fnSetData(oData,val)}var __reArray=/\[.*?\]$/;function _fnGetObjectDataFn(mSource){if(mSource===null){return function(data,type){return null}}else{if(typeof mSource==="function"){return function(data,type,extra){return mSource(data,type,extra)}}else{if(typeof mSource==="string"&&(mSource.indexOf(".")!==-1||mSource.indexOf("[")!==-1)){var fetchData=function(data,type,src){var a=src.split(".");var arrayNotation,out,innerSrc;if(src!==""){for(var i=0,iLen=a.length;i<iLen;i++){arrayNotation=a[i].match(__reArray);if(arrayNotation){a[i]=a[i].replace(__reArray,"");if(a[i]!==""){data=data[a[i]]}out=[];a.splice(0,i+1);innerSrc=a.join(".");for(var j=0,jLen=data.length;j<jLen;j++){out.push(fetchData(data[j],type,innerSrc))}var join=arrayNotation[0].substring(1,arrayNotation[0].length-1);data=(join==="")?out:out.join(join);break}if(data===null||data[a[i]]===undefined){return undefined}data=data[a[i]]}}return data};return function(data,type){return fetchData(data,type,mSource)}}else{return function(data,type){return data[mSource]}}}}}function _fnSetObjectDataFn(mSource){if(mSource===null){return function(data,val){}}else{if(typeof mSource==="function"){return function(data,val){mSource(data,"set",val)}}else{if(typeof mSource==="string"&&(mSource.indexOf(".")!==-1||mSource.indexOf("[")!==-1)){var setData=function(data,val,src){var a=src.split("."),b;var arrayNotation,o,innerSrc;for(var i=0,iLen=a.length-1;i<iLen;i++){arrayNotation=a[i].match(__reArray);if(arrayNotation){a[i]=a[i].replace(__reArray,"");data[a[i]]=[];b=a.slice();b.splice(0,i+1);innerSrc=b.join(".");for(var j=0,jLen=val.length;j<jLen;j++){o={};setData(o,val[j],innerSrc);data[a[i]].push(o)}return}if(data[a[i]]===null||data[a[i]]===undefined){data[a[i]]={}}data=data[a[i]]}data[a[a.length-1].replace(__reArray,"")]=val};return function(data,val){return setData(data,val,mSource)}}else{return function(data,val){data[mSource]=val}}}}}function _fnGetDataMaster(oSettings){var aData=[];var iLen=oSettings.aoData.length;for(var i=0;i<iLen;i++){aData.push(oSettings.aoData[i]._aData)}return aData}function _fnClearTable(oSettings){oSettings.aoData.splice(0,oSettings.aoData.length);oSettings.aiDisplayMaster.splice(0,oSettings.aiDisplayMaster.length);oSettings.aiDisplay.splice(0,oSettings.aiDisplay.length);_fnCalculateEnd(oSettings)}function _fnDeleteIndex(a,iTarget){var iTargetIndex=-1;for(var i=0,iLen=a.length;i<iLen;i++){if(a[i]==iTarget){iTargetIndex=i}else{if(a[i]>iTarget){a[i]--}}}if(iTargetIndex!=-1){a.splice(iTargetIndex,1)}}function _fnRender(oSettings,iRow,iCol){var oCol=oSettings.aoColumns[iCol];return oCol.fnRender({iDataRow:iRow,iDataColumn:iCol,oSettings:oSettings,aData:oSettings.aoData[iRow]._aData,mDataProp:oCol.mData},_fnGetCellData(oSettings,iRow,iCol,"display"))}function _fnCreateTr(oSettings,iRow){var oData=oSettings.aoData[iRow];var nTd;if(oData.nTr===null){oData.nTr=document.createElement("tr");oData.nTr._DT_RowIndex=iRow;if(oData._aData.DT_RowId){oData.nTr.id=oData._aData.DT_RowId}if(oData._aData.DT_RowClass){oData.nTr.className=oData._aData.DT_RowClass}for(var i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){var oCol=oSettings.aoColumns[i];nTd=document.createElement(oCol.sCellType);nTd.innerHTML=(typeof oCol.fnRender==="function"&&(!oCol.bUseRendered||oCol.mData===null))?_fnRender(oSettings,iRow,i):_fnGetCellData(oSettings,iRow,i,"display");if(oCol.sClass!==null){nTd.className=oCol.sClass}if(oCol.bVisible){oData.nTr.appendChild(nTd);oData._anHidden[i]=null}else{oData._anHidden[i]=nTd}if(oCol.fnCreatedCell){oCol.fnCreatedCell.call(oSettings.oInstance,nTd,_fnGetCellData(oSettings,iRow,i,"display"),oData._aData,iRow,i)}}_fnCallbackFire(oSettings,"aoRowCreatedCallback",null,[oData.nTr,oData._aData,iRow])}}function _fnBuildHead(oSettings){var i,nTh,iLen,j,jLen;var iThs=$("th, td",oSettings.nTHead).length;var iCorrector=0;var jqChildren;if(iThs!==0){for(i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){nTh=oSettings.aoColumns[i].nTh;nTh.setAttribute("role","columnheader");if(oSettings.aoColumns[i].bSortable){nTh.setAttribute("tabindex",oSettings.iTabIndex);nTh.setAttribute("aria-controls",oSettings.sTableId)}if(oSettings.aoColumns[i].sClass!==null){$(nTh).addClass(oSettings.aoColumns[i].sClass)}if(oSettings.aoColumns[i].sTitle!=nTh.innerHTML){nTh.innerHTML=oSettings.aoColumns[i].sTitle}}}else{var nTr=document.createElement("tr");for(i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){nTh=oSettings.aoColumns[i].nTh;nTh.innerHTML=oSettings.aoColumns[i].sTitle;nTh.setAttribute("tabindex","0");if(oSettings.aoColumns[i].sClass!==null){$(nTh).addClass(oSettings.aoColumns[i].sClass)}nTr.appendChild(nTh)}$(oSettings.nTHead).html("")[0].appendChild(nTr);_fnDetectHeader(oSettings.aoHeader,oSettings.nTHead)}$(oSettings.nTHead).children("tr").attr("role","row");if(oSettings.bJUI){for(i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){nTh=oSettings.aoColumns[i].nTh;var nDiv=document.createElement("div");nDiv.className=oSettings.oClasses.sSortJUIWrapper;$(nTh).contents().appendTo(nDiv);var nSpan=document.createElement("span");nSpan.className=oSettings.oClasses.sSortIcon;nDiv.appendChild(nSpan);nTh.appendChild(nDiv)}}if(oSettings.oFeatures.bSort){for(i=0;i<oSettings.aoColumns.length;i++){if(oSettings.aoColumns[i].bSortable!==false){_fnSortAttachListener(oSettings,oSettings.aoColumns[i].nTh,i)}else{$(oSettings.aoColumns[i].nTh).addClass(oSettings.oClasses.sSortableNone)}}}if(oSettings.oClasses.sFooterTH!==""){$(oSettings.nTFoot).children("tr").children("th").addClass(oSettings.oClasses.sFooterTH)}if(oSettings.nTFoot!==null){var anCells=_fnGetUniqueThs(oSettings,null,oSettings.aoFooter);for(i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){if(anCells[i]){oSettings.aoColumns[i].nTf=anCells[i];if(oSettings.aoColumns[i].sClass){$(anCells[i]).addClass(oSettings.aoColumns[i].sClass)}}}}}function _fnDrawHead(oSettings,aoSource,bIncludeHidden){var i,iLen,j,jLen,k,kLen,n,nLocalTr;var aoLocal=[];var aApplied=[];var iColumns=oSettings.aoColumns.length;var iRowspan,iColspan;if(bIncludeHidden===undefined){bIncludeHidden=false}for(i=0,iLen=aoSource.length;i<iLen;i++){aoLocal[i]=aoSource[i].slice();aoLocal[i].nTr=aoSource[i].nTr;for(j=iColumns-1;j>=0;j--){if(!oSettings.aoColumns[j].bVisible&&!bIncludeHidden){aoLocal[i].splice(j,1)}}aApplied.push([])}for(i=0,iLen=aoLocal.length;i<iLen;i++){nLocalTr=aoLocal[i].nTr;if(nLocalTr){while((n=nLocalTr.firstChild)){nLocalTr.removeChild(n)}}for(j=0,jLen=aoLocal[i].length;j<jLen;j++){iRowspan=1;iColspan=1;if(aApplied[i][j]===undefined){nLocalTr.appendChild(aoLocal[i][j].cell);aApplied[i][j]=1;while(aoLocal[i+iRowspan]!==undefined&&aoLocal[i][j].cell==aoLocal[i+iRowspan][j].cell){aApplied[i+iRowspan][j]=1;iRowspan++}while(aoLocal[i][j+iColspan]!==undefined&&aoLocal[i][j].cell==aoLocal[i][j+iColspan].cell){for(k=0;k<iRowspan;k++){aApplied[i+k][j+iColspan]=1}iColspan++}aoLocal[i][j].cell.rowSpan=iRowspan;aoLocal[i][j].cell.colSpan=iColspan}}}}function _fnDraw(oSettings){var aPreDraw=_fnCallbackFire(oSettings,"aoPreDrawCallback","preDraw",[oSettings]);if($.inArray(false,aPreDraw)!==-1){_fnProcessingDisplay(oSettings,false);return}var i,iLen,n;var anRows=[];var iRowCount=0;var iStripes=oSettings.asStripeClasses.length;var iOpenRows=oSettings.aoOpenRows.length;oSettings.bDrawing=true;if(oSettings.iInitDisplayStart!==undefined&&oSettings.iInitDisplayStart!=-1){if(oSettings.oFeatures.bServerSide){oSettings._iDisplayStart=oSettings.iInitDisplayStart}else{oSettings._iDisplayStart=(oSettings.iInitDisplayStart>=oSettings.fnRecordsDisplay())?0:oSettings.iInitDisplayStart}oSettings.iInitDisplayStart=-1;_fnCalculateEnd(oSettings)}if(oSettings.bDeferLoading){oSettings.bDeferLoading=false;oSettings.iDraw++}else{if(!oSettings.oFeatures.bServerSide){oSettings.iDraw++}else{if(!oSettings.bDestroying&&!_fnAjaxUpdate(oSettings)){return}}}if(oSettings.aiDisplay.length!==0){var iStart=oSettings._iDisplayStart;var iEnd=oSettings._iDisplayEnd;if(oSettings.oFeatures.bServerSide){iStart=0;iEnd=oSettings.aoData.length}for(var j=iStart;j<iEnd;j++){var aoData=oSettings.aoData[oSettings.aiDisplay[j]];if(aoData.nTr===null){_fnCreateTr(oSettings,oSettings.aiDisplay[j])}var nRow=aoData.nTr;if(iStripes!==0){var sStripe=oSettings.asStripeClasses[iRowCount%iStripes];if(aoData._sRowStripe!=sStripe){$(nRow).removeClass(aoData._sRowStripe).addClass(sStripe);aoData._sRowStripe=sStripe}}_fnCallbackFire(oSettings,"aoRowCallback",null,[nRow,oSettings.aoData[oSettings.aiDisplay[j]]._aData,iRowCount,j]);anRows.push(nRow);iRowCount++;if(iOpenRows!==0){for(var k=0;k<iOpenRows;k++){if(nRow==oSettings.aoOpenRows[k].nParent){anRows.push(oSettings.aoOpenRows[k].nTr);break}}}}}else{anRows[0]=document.createElement("tr");if(oSettings.asStripeClasses[0]){anRows[0].className=oSettings.asStripeClasses[0]}var oLang=oSettings.oLanguage;var sZero=oLang.sZeroRecords;if(oSettings.iDraw==1&&oSettings.sAjaxSource!==null&&!oSettings.oFeatures.bServerSide){sZero=oLang.sLoadingRecords}else{if(oLang.sEmptyTable&&oSettings.fnRecordsTotal()===0){sZero=oLang.sEmptyTable}}var nTd=document.createElement("td");nTd.setAttribute("valign","top");nTd.colSpan=_fnVisbleColumns(oSettings);nTd.className=oSettings.oClasses.sRowEmpty;nTd.innerHTML=_fnInfoMacros(oSettings,sZero);anRows[iRowCount].appendChild(nTd)}_fnCallbackFire(oSettings,"aoHeaderCallback","header",[$(oSettings.nTHead).children("tr")[0],_fnGetDataMaster(oSettings),oSettings._iDisplayStart,oSettings.fnDisplayEnd(),oSettings.aiDisplay]);_fnCallbackFire(oSettings,"aoFooterCallback","footer",[$(oSettings.nTFoot).children("tr")[0],_fnGetDataMaster(oSettings),oSettings._iDisplayStart,oSettings.fnDisplayEnd(),oSettings.aiDisplay]);var nAddFrag=document.createDocumentFragment(),nRemoveFrag=document.createDocumentFragment(),nBodyPar,nTrs;if(oSettings.nTBody){nBodyPar=oSettings.nTBody.parentNode;nRemoveFrag.appendChild(oSettings.nTBody);if(!oSettings.oScroll.bInfinite||!oSettings._bInitComplete||oSettings.bSorted||oSettings.bFiltered){while((n=oSettings.nTBody.firstChild)){oSettings.nTBody.removeChild(n)}}for(i=0,iLen=anRows.length;i<iLen;i++){nAddFrag.appendChild(anRows[i])}oSettings.nTBody.appendChild(nAddFrag);if(nBodyPar!==null){nBodyPar.appendChild(oSettings.nTBody)}}_fnCallbackFire(oSettings,"aoDrawCallback","draw",[oSettings]);oSettings.bSorted=false;oSettings.bFiltered=false;oSettings.bDrawing=false;if(oSettings.oFeatures.bServerSide){_fnProcessingDisplay(oSettings,false);if(!oSettings._bInitComplete){_fnInitComplete(oSettings)}}}function _fnReDraw(oSettings){if(oSettings.oFeatures.bSort){_fnSort(oSettings,oSettings.oPreviousSearch)}else{if(oSettings.oFeatures.bFilter){_fnFilterComplete(oSettings,oSettings.oPreviousSearch)}else{_fnCalculateEnd(oSettings);_fnDraw(oSettings)}}}function _fnAddOptionsHtml(oSettings){var nHolding=$("<div></div>")[0];oSettings.nTable.parentNode.insertBefore(nHolding,oSettings.nTable);oSettings.nTableWrapper=$('<div id="'+oSettings.sTableId+'_wrapper" class="'+oSettings.oClasses.sWrapper+'" role="grid"></div>')[0];oSettings.nTableReinsertBefore=oSettings.nTable.nextSibling;var nInsertNode=oSettings.nTableWrapper;var aDom=oSettings.sDom.split("");var nTmp,iPushFeature,cOption,nNewNode,cNext,sAttr,j;for(var i=0;i<aDom.length;i++){iPushFeature=0;cOption=aDom[i];if(cOption=="<"){nNewNode=$("<div></div>")[0];cNext=aDom[i+1];if(cNext=="'"||cNext=='"'){sAttr="";j=2;while(aDom[i+j]!=cNext){sAttr+=aDom[i+j];j++}if(sAttr=="H"){sAttr=oSettings.oClasses.sJUIHeader}else{if(sAttr=="F"){sAttr=oSettings.oClasses.sJUIFooter}}if(sAttr.indexOf(".")!=-1){var aSplit=sAttr.split(".");nNewNode.id=aSplit[0].substr(1,aSplit[0].length-1);nNewNode.className=aSplit[1]}else{if(sAttr.charAt(0)=="#"){nNewNode.id=sAttr.substr(1,sAttr.length-1)}else{nNewNode.className=sAttr}}i+=j}nInsertNode.appendChild(nNewNode);nInsertNode=nNewNode}else{if(cOption==">"){nInsertNode=nInsertNode.parentNode}else{if(cOption=="l"&&oSettings.oFeatures.bPaginate&&oSettings.oFeatures.bLengthChange){nTmp=_fnFeatureHtmlLength(oSettings);iPushFeature=1}else{if(cOption=="f"&&oSettings.oFeatures.bFilter){nTmp=_fnFeatureHtmlFilter(oSettings);iPushFeature=1}else{if(cOption=="r"&&oSettings.oFeatures.bProcessing){nTmp=_fnFeatureHtmlProcessing(oSettings);iPushFeature=1}else{if(cOption=="t"){nTmp=_fnFeatureHtmlTable(oSettings);iPushFeature=1}else{if(cOption=="i"&&oSettings.oFeatures.bInfo){nTmp=_fnFeatureHtmlInfo(oSettings);iPushFeature=1}else{if(cOption=="p"&&oSettings.oFeatures.bPaginate){nTmp=_fnFeatureHtmlPaginate(oSettings);iPushFeature=1}else{if(DataTable.ext.aoFeatures.length!==0){var aoFeatures=DataTable.ext.aoFeatures;for(var k=0,kLen=aoFeatures.length;k<kLen;k++){if(cOption==aoFeatures[k].cFeature){nTmp=aoFeatures[k].fnInit(oSettings);if(nTmp){iPushFeature=1}break}}}}}}}}}}}if(iPushFeature==1&&nTmp!==null){if(typeof oSettings.aanFeatures[cOption]!=="object"){oSettings.aanFeatures[cOption]=[]}oSettings.aanFeatures[cOption].push(nTmp);nInsertNode.appendChild(nTmp)}}nHolding.parentNode.replaceChild(oSettings.nTableWrapper,nHolding)}function _fnDetectHeader(aLayout,nThead){var nTrs=$(nThead).children("tr");var nTr,nCell;var i,k,l,iLen,jLen,iColShifted,iColumn,iColspan,iRowspan;var bUnique;var fnShiftCol=function(a,i,j){var k=a[i];while(k[j]){j++}return j};aLayout.splice(0,aLayout.length);for(i=0,iLen=nTrs.length;i<iLen;i++){aLayout.push([])}for(i=0,iLen=nTrs.length;i<iLen;i++){nTr=nTrs[i];iColumn=0;nCell=nTr.firstChild;while(nCell){if(nCell.nodeName.toUpperCase()=="TD"||nCell.nodeName.toUpperCase()=="TH"){iColspan=nCell.getAttribute("colspan")*1;iRowspan=nCell.getAttribute("rowspan")*1;iColspan=(!iColspan||iColspan===0||iColspan===1)?1:iColspan;iRowspan=(!iRowspan||iRowspan===0||iRowspan===1)?1:iRowspan;iColShifted=fnShiftCol(aLayout,i,iColumn);bUnique=iColspan===1?true:false;for(l=0;l<iColspan;l++){for(k=0;k<iRowspan;k++){aLayout[i+k][iColShifted+l]={cell:nCell,unique:bUnique};aLayout[i+k].nTr=nTr}}}nCell=nCell.nextSibling}}}function _fnGetUniqueThs(oSettings,nHeader,aLayout){var aReturn=[];if(!aLayout){aLayout=oSettings.aoHeader;if(nHeader){aLayout=[];_fnDetectHeader(aLayout,nHeader)}}for(var i=0,iLen=aLayout.length;i<iLen;i++){for(var j=0,jLen=aLayout[i].length;j<jLen;j++){if(aLayout[i][j].unique&&(!aReturn[j]||!oSettings.bSortCellsTop)){aReturn[j]=aLayout[i][j].cell}}}return aReturn}function _fnAjaxUpdate(oSettings){if(oSettings.bAjaxDataGet){oSettings.iDraw++;_fnProcessingDisplay(oSettings,true);var iColumns=oSettings.aoColumns.length;var aoData=_fnAjaxParameters(oSettings);_fnServerParams(oSettings,aoData);oSettings.fnServerData.call(oSettings.oInstance,oSettings.sAjaxSource,aoData,function(json){_fnAjaxUpdateDraw(oSettings,json)},oSettings);return false}else{return true}}function _fnAjaxParameters(oSettings){var iColumns=oSettings.aoColumns.length;var aoData=[],mDataProp,aaSort,aDataSort;var i,j;aoData.push({name:"sEcho",value:oSettings.iDraw});aoData.push({name:"iColumns",value:iColumns});aoData.push({name:"sColumns",value:_fnColumnOrdering(oSettings)});aoData.push({name:"iDisplayStart",value:oSettings._iDisplayStart});aoData.push({name:"iDisplayLength",value:oSettings.oFeatures.bPaginate!==false?oSettings._iDisplayLength:-1});for(i=0;i<iColumns;i++){mDataProp=oSettings.aoColumns[i].mData;aoData.push({name:"mDataProp_"+i,value:typeof(mDataProp)==="function"?"function":mDataProp})}if(oSettings.oFeatures.bFilter!==false){aoData.push({name:"sSearch",value:oSettings.oPreviousSearch.sSearch});aoData.push({name:"bRegex",value:oSettings.oPreviousSearch.bRegex});for(i=0;i<iColumns;i++){aoData.push({name:"sSearch_"+i,value:oSettings.aoPreSearchCols[i].sSearch});aoData.push({name:"bRegex_"+i,value:oSettings.aoPreSearchCols[i].bRegex});aoData.push({name:"bSearchable_"+i,value:oSettings.aoColumns[i].bSearchable})}}if(oSettings.oFeatures.bSort!==false){var iCounter=0;aaSort=(oSettings.aaSortingFixed!==null)?oSettings.aaSortingFixed.concat(oSettings.aaSorting):oSettings.aaSorting.slice();for(i=0;i<aaSort.length;i++){aDataSort=oSettings.aoColumns[aaSort[i][0]].aDataSort;for(j=0;j<aDataSort.length;j++){aoData.push({name:"iSortCol_"+iCounter,value:aDataSort[j]});aoData.push({name:"sSortDir_"+iCounter,value:aaSort[i][1]});iCounter++}}aoData.push({name:"iSortingCols",value:iCounter});for(i=0;i<iColumns;i++){aoData.push({name:"bSortable_"+i,value:oSettings.aoColumns[i].bSortable})}}return aoData}function _fnServerParams(oSettings,aoData){_fnCallbackFire(oSettings,"aoServerParams","serverParams",[aoData])}function _fnAjaxUpdateDraw(oSettings,json){if(json.sEcho!==undefined){if(json.sEcho*1<oSettings.iDraw){return}else{oSettings.iDraw=json.sEcho*1}}if(!oSettings.oScroll.bInfinite||(oSettings.oScroll.bInfinite&&(oSettings.bSorted||oSettings.bFiltered))){_fnClearTable(oSettings)}oSettings._iRecordsTotal=parseInt(json.iTotalRecords,10);oSettings._iRecordsDisplay=parseInt(json.iTotalDisplayRecords,10);var sOrdering=_fnColumnOrdering(oSettings);var bReOrder=(json.sColumns!==undefined&&sOrdering!==""&&json.sColumns!=sOrdering);var aiIndex;if(bReOrder){aiIndex=_fnReOrderIndex(oSettings,json.sColumns)}var aData=_fnGetObjectDataFn(oSettings.sAjaxDataProp)(json);for(var i=0,iLen=aData.length;i<iLen;i++){if(bReOrder){var aDataSorted=[];for(var j=0,jLen=oSettings.aoColumns.length;j<jLen;j++){aDataSorted.push(aData[i][aiIndex[j]])}_fnAddData(oSettings,aDataSorted)}else{_fnAddData(oSettings,aData[i])}}oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();oSettings.bAjaxDataGet=false;_fnDraw(oSettings);oSettings.bAjaxDataGet=true;_fnProcessingDisplay(oSettings,false)}function _fnFeatureHtmlFilter(oSettings){var oPreviousSearch=oSettings.oPreviousSearch;var sSearchStr=oSettings.oLanguage.sSearch;sSearchStr=(sSearchStr.indexOf("_INPUT_")!==-1)?sSearchStr.replace("_INPUT_",'<input type="text" />'):sSearchStr===""?'<input type="text" />':sSearchStr+' <input type="text" />';var nFilter=document.createElement("div");nFilter.className=oSettings.oClasses.sFilter;nFilter.innerHTML="<label>"+sSearchStr+"</label>";if(!oSettings.aanFeatures.f){nFilter.id=oSettings.sTableId+"_filter"}var jqFilter=$('input[type="text"]',nFilter);nFilter._DT_Input=jqFilter[0];jqFilter.val(oPreviousSearch.sSearch.replace('"',"&quot;"));jqFilter.bind("keyup.DT",function(e){var n=oSettings.aanFeatures.f;var val=this.value===""?"":this.value;for(var i=0,iLen=n.length;i<iLen;i++){if(n[i]!=$(this).parents("div.dataTables_filter")[0]){$(n[i]._DT_Input).val(val)}}if(val!=oPreviousSearch.sSearch){_fnFilterComplete(oSettings,{sSearch:val,bRegex:oPreviousSearch.bRegex,bSmart:oPreviousSearch.bSmart,bCaseInsensitive:oPreviousSearch.bCaseInsensitive})}});jqFilter.attr("aria-controls",oSettings.sTableId).bind("keypress.DT",function(e){if(e.keyCode==13){return false}});return nFilter}function _fnFilterComplete(oSettings,oInput,iForce){var oPrevSearch=oSettings.oPreviousSearch;var aoPrevSearch=oSettings.aoPreSearchCols;var fnSaveFilter=function(oFilter){oPrevSearch.sSearch=oFilter.sSearch;oPrevSearch.bRegex=oFilter.bRegex;oPrevSearch.bSmart=oFilter.bSmart;oPrevSearch.bCaseInsensitive=oFilter.bCaseInsensitive};if(!oSettings.oFeatures.bServerSide){_fnFilter(oSettings,oInput.sSearch,iForce,oInput.bRegex,oInput.bSmart,oInput.bCaseInsensitive);fnSaveFilter(oInput);for(var i=0;i<oSettings.aoPreSearchCols.length;i++){_fnFilterColumn(oSettings,aoPrevSearch[i].sSearch,i,aoPrevSearch[i].bRegex,aoPrevSearch[i].bSmart,aoPrevSearch[i].bCaseInsensitive)}_fnFilterCustom(oSettings)}else{fnSaveFilter(oInput)}oSettings.bFiltered=true;$(oSettings.oInstance).trigger("filter",oSettings);oSettings._iDisplayStart=0;_fnCalculateEnd(oSettings);_fnDraw(oSettings);_fnBuildSearchArray(oSettings,0)}function _fnFilterCustom(oSettings){var afnFilters=DataTable.ext.afnFiltering;var aiFilterColumns=_fnGetColumns(oSettings,"bSearchable");for(var i=0,iLen=afnFilters.length;i<iLen;i++){var iCorrector=0;for(var j=0,jLen=oSettings.aiDisplay.length;j<jLen;j++){var iDisIndex=oSettings.aiDisplay[j-iCorrector];var bTest=afnFilters[i](oSettings,_fnGetRowData(oSettings,iDisIndex,"filter",aiFilterColumns),iDisIndex);if(!bTest){oSettings.aiDisplay.splice(j-iCorrector,1);iCorrector++}}}}function _fnFilterColumn(oSettings,sInput,iColumn,bRegex,bSmart,bCaseInsensitive){if(sInput===""){return}var iIndexCorrector=0;var rpSearch=_fnFilterCreateSearch(sInput,bRegex,bSmart,bCaseInsensitive);for(var i=oSettings.aiDisplay.length-1;i>=0;i--){var sData=_fnDataToSearch(_fnGetCellData(oSettings,oSettings.aiDisplay[i],iColumn,"filter"),oSettings.aoColumns[iColumn].sType);if(!rpSearch.test(sData)){oSettings.aiDisplay.splice(i,1);iIndexCorrector++}}}function _fnFilter(oSettings,sInput,iForce,bRegex,bSmart,bCaseInsensitive){var i;var rpSearch=_fnFilterCreateSearch(sInput,bRegex,bSmart,bCaseInsensitive);var oPrevSearch=oSettings.oPreviousSearch;if(!iForce){iForce=0}if(DataTable.ext.afnFiltering.length!==0){iForce=1}if(sInput.length<=0){oSettings.aiDisplay.splice(0,oSettings.aiDisplay.length);oSettings.aiDisplay=oSettings.aiDisplayMaster.slice()}else{if(oSettings.aiDisplay.length==oSettings.aiDisplayMaster.length||oPrevSearch.sSearch.length>sInput.length||iForce==1||sInput.indexOf(oPrevSearch.sSearch)!==0){oSettings.aiDisplay.splice(0,oSettings.aiDisplay.length);_fnBuildSearchArray(oSettings,1);for(i=0;i<oSettings.aiDisplayMaster.length;i++){if(rpSearch.test(oSettings.asDataSearch[i])){oSettings.aiDisplay.push(oSettings.aiDisplayMaster[i])}}}else{var iIndexCorrector=0;for(i=0;i<oSettings.asDataSearch.length;i++){if(!rpSearch.test(oSettings.asDataSearch[i])){oSettings.aiDisplay.splice(i-iIndexCorrector,1);iIndexCorrector++}}}}}function _fnBuildSearchArray(oSettings,iMaster){if(!oSettings.oFeatures.bServerSide){oSettings.asDataSearch=[];var aiFilterColumns=_fnGetColumns(oSettings,"bSearchable");var aiIndex=(iMaster===1)?oSettings.aiDisplayMaster:oSettings.aiDisplay;for(var i=0,iLen=aiIndex.length;i<iLen;i++){oSettings.asDataSearch[i]=_fnBuildSearchRow(oSettings,_fnGetRowData(oSettings,aiIndex[i],"filter",aiFilterColumns))}}}function _fnBuildSearchRow(oSettings,aData){var sSearch=aData.join("  ");if(sSearch.indexOf("&")!==-1){sSearch=$("<div>").html(sSearch).text()}return sSearch.replace(/[\n\r]/g," ")}function _fnFilterCreateSearch(sSearch,bRegex,bSmart,bCaseInsensitive){var asSearch,sRegExpString;if(bSmart){asSearch=bRegex?sSearch.split(" "):_fnEscapeRegex(sSearch).split(" ");sRegExpString="^(?=.*?"+asSearch.join(")(?=.*?")+").*$";return new RegExp(sRegExpString,bCaseInsensitive?"i":"")}else{sSearch=bRegex?sSearch:_fnEscapeRegex(sSearch);return new RegExp(sSearch,bCaseInsensitive?"i":"")}}function _fnDataToSearch(sData,sType){if(typeof DataTable.ext.ofnSearch[sType]==="function"){return DataTable.ext.ofnSearch[sType](sData)}else{if(sData===null){return""}else{if(sType=="html"){return sData.replace(/[\r\n]/g," ").replace(/<.*?>/g,"")}else{if(typeof sData==="string"){return sData.replace(/[\r\n]/g," ")}}}}return sData}function _fnEscapeRegex(sVal){var acEscape=["/",".","*","+","?","|","(",")","[","]","{","}","\\","$","^","-"];var reReplace=new RegExp("(\\"+acEscape.join("|\\")+")","g");return sVal.replace(reReplace,"\\$1")}function _fnFeatureHtmlInfo(oSettings){var nInfo=document.createElement("div");nInfo.className=oSettings.oClasses.sInfo;if(!oSettings.aanFeatures.i){oSettings.aoDrawCallback.push({fn:_fnUpdateInfo,sName:"information"});nInfo.id=oSettings.sTableId+"_info"}oSettings.nTable.setAttribute("aria-describedby",oSettings.sTableId+"_info");return nInfo}function _fnUpdateInfo(oSettings){if(!oSettings.oFeatures.bInfo||oSettings.aanFeatures.i.length===0){return}var oLang=oSettings.oLanguage,iStart=oSettings._iDisplayStart+1,iEnd=oSettings.fnDisplayEnd(),iMax=oSettings.fnRecordsTotal(),iTotal=oSettings.fnRecordsDisplay(),sOut;if(iTotal===0){sOut=oLang.sInfoEmpty}else{sOut=oLang.sInfo}if(iTotal!=iMax){sOut+=" "+oLang.sInfoFiltered}sOut+=oLang.sInfoPostFix;sOut=_fnInfoMacros(oSettings,sOut);if(oLang.fnInfoCallback!==null){sOut=oLang.fnInfoCallback.call(oSettings.oInstance,oSettings,iStart,iEnd,iMax,iTotal,sOut)}var n=oSettings.aanFeatures.i;for(var i=0,iLen=n.length;i<iLen;i++){$(n[i]).html(sOut)}}function _fnInfoMacros(oSettings,str){var iStart=oSettings._iDisplayStart+1,sStart=oSettings.fnFormatNumber(iStart),iEnd=oSettings.fnDisplayEnd(),sEnd=oSettings.fnFormatNumber(iEnd),iTotal=oSettings.fnRecordsDisplay(),sTotal=oSettings.fnFormatNumber(iTotal),iMax=oSettings.fnRecordsTotal(),sMax=oSettings.fnFormatNumber(iMax);if(oSettings.oScroll.bInfinite){sStart=oSettings.fnFormatNumber(1)}return str.replace(/_START_/g,sStart).replace(/_END_/g,sEnd).replace(/_TOTAL_/g,sTotal).replace(/_MAX_/g,sMax)}function _fnInitialise(oSettings){var i,iLen,iAjaxStart=oSettings.iInitDisplayStart;if(oSettings.bInitialised===false){setTimeout(function(){_fnInitialise(oSettings)},200);return}_fnAddOptionsHtml(oSettings);_fnBuildHead(oSettings);_fnDrawHead(oSettings,oSettings.aoHeader);if(oSettings.nTFoot){_fnDrawHead(oSettings,oSettings.aoFooter)}_fnProcessingDisplay(oSettings,true);if(oSettings.oFeatures.bAutoWidth){_fnCalculateColumnWidths(oSettings)}for(i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){if(oSettings.aoColumns[i].sWidth!==null){oSettings.aoColumns[i].nTh.style.width=_fnStringToCss(oSettings.aoColumns[i].sWidth)}}if(oSettings.oFeatures.bSort){_fnSort(oSettings)}else{if(oSettings.oFeatures.bFilter){_fnFilterComplete(oSettings,oSettings.oPreviousSearch)}else{oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();_fnCalculateEnd(oSettings);_fnDraw(oSettings)}}if(oSettings.sAjaxSource!==null&&!oSettings.oFeatures.bServerSide){var aoData=[];_fnServerParams(oSettings,aoData);oSettings.fnServerData.call(oSettings.oInstance,oSettings.sAjaxSource,aoData,function(json){var aData=(oSettings.sAjaxDataProp!=="")?_fnGetObjectDataFn(oSettings.sAjaxDataProp)(json):json;for(i=0;i<aData.length;i++){_fnAddData(oSettings,aData[i])}oSettings.iInitDisplayStart=iAjaxStart;if(oSettings.oFeatures.bSort){_fnSort(oSettings)}else{oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();_fnCalculateEnd(oSettings);_fnDraw(oSettings)}_fnProcessingDisplay(oSettings,false);_fnInitComplete(oSettings,json)},oSettings);return}if(!oSettings.oFeatures.bServerSide){_fnProcessingDisplay(oSettings,false);_fnInitComplete(oSettings)}}function _fnInitComplete(oSettings,json){oSettings._bInitComplete=true;_fnCallbackFire(oSettings,"aoInitComplete","init",[oSettings,json])}function _fnLanguageCompat(oLanguage){var oDefaults=DataTable.defaults.oLanguage;if(!oLanguage.sEmptyTable&&oLanguage.sZeroRecords&&oDefaults.sEmptyTable==="No data available in table"){_fnMap(oLanguage,oLanguage,"sZeroRecords","sEmptyTable")}if(!oLanguage.sLoadingRecords&&oLanguage.sZeroRecords&&oDefaults.sLoadingRecords==="Loading..."){_fnMap(oLanguage,oLanguage,"sZeroRecords","sLoadingRecords")}}function _fnFeatureHtmlLength(oSettings){if(oSettings.oScroll.bInfinite){return null}var sName='name="'+oSettings.sTableId+'_length"';var sStdMenu='<select size="1" '+sName+">";var i,iLen;var aLengthMenu=oSettings.aLengthMenu;if(aLengthMenu.length==2&&typeof aLengthMenu[0]==="object"&&typeof aLengthMenu[1]==="object"){for(i=0,iLen=aLengthMenu[0].length;i<iLen;i++){sStdMenu+='<option value="'+aLengthMenu[0][i]+'">'+aLengthMenu[1][i]+"</option>"}}else{for(i=0,iLen=aLengthMenu.length;i<iLen;i++){sStdMenu+='<option value="'+aLengthMenu[i]+'">'+aLengthMenu[i]+"</option>"}}sStdMenu+="</select>";var nLength=document.createElement("div");if(!oSettings.aanFeatures.l){nLength.id=oSettings.sTableId+"_length"}nLength.className=oSettings.oClasses.sLength;nLength.innerHTML="<label>"+oSettings.oLanguage.sLengthMenu.replace("_MENU_",sStdMenu)+"</label>";$('select option[value="'+oSettings._iDisplayLength+'"]',nLength).attr("selected",true);$("select",nLength).bind("change.DT",function(e){var iVal=$(this).val();var n=oSettings.aanFeatures.l;for(i=0,iLen=n.length;i<iLen;i++){if(n[i]!=this.parentNode){$("select",n[i]).val(iVal)}}oSettings._iDisplayLength=parseInt(iVal,10);_fnCalculateEnd(oSettings);if(oSettings.fnDisplayEnd()==oSettings.fnRecordsDisplay()){oSettings._iDisplayStart=oSettings.fnDisplayEnd()-oSettings._iDisplayLength;if(oSettings._iDisplayStart<0){oSettings._iDisplayStart=0}}if(oSettings._iDisplayLength==-1){oSettings._iDisplayStart=0}_fnDraw(oSettings)});$("select",nLength).attr("aria-controls",oSettings.sTableId);return nLength}function _fnCalculateEnd(oSettings){if(oSettings.oFeatures.bPaginate===false){oSettings._iDisplayEnd=oSettings.aiDisplay.length}else{if(oSettings._iDisplayStart+oSettings._iDisplayLength>oSettings.aiDisplay.length||oSettings._iDisplayLength==-1){oSettings._iDisplayEnd=oSettings.aiDisplay.length}else{oSettings._iDisplayEnd=oSettings._iDisplayStart+oSettings._iDisplayLength}}}function _fnFeatureHtmlPaginate(oSettings){if(oSettings.oScroll.bInfinite){return null}var nPaginate=document.createElement("div");nPaginate.className=oSettings.oClasses.sPaging+oSettings.sPaginationType;DataTable.ext.oPagination[oSettings.sPaginationType].fnInit(oSettings,nPaginate,function(oSettings){_fnCalculateEnd(oSettings);_fnDraw(oSettings)});if(!oSettings.aanFeatures.p){oSettings.aoDrawCallback.push({fn:function(oSettings){DataTable.ext.oPagination[oSettings.sPaginationType].fnUpdate(oSettings,function(oSettings){_fnCalculateEnd(oSettings);_fnDraw(oSettings)})},sName:"pagination"})}return nPaginate}function _fnPageChange(oSettings,mAction){var iOldStart=oSettings._iDisplayStart;if(typeof mAction==="number"){oSettings._iDisplayStart=mAction*oSettings._iDisplayLength;if(oSettings._iDisplayStart>oSettings.fnRecordsDisplay()){oSettings._iDisplayStart=0}}else{if(mAction=="first"){oSettings._iDisplayStart=0}else{if(mAction=="previous"){oSettings._iDisplayStart=oSettings._iDisplayLength>=0?oSettings._iDisplayStart-oSettings._iDisplayLength:0;if(oSettings._iDisplayStart<0){oSettings._iDisplayStart=0}}else{if(mAction=="next"){if(oSettings._iDisplayLength>=0){if(oSettings._iDisplayStart+oSettings._iDisplayLength<oSettings.fnRecordsDisplay()){oSettings._iDisplayStart+=oSettings._iDisplayLength}}else{oSettings._iDisplayStart=0}}else{if(mAction=="last"){if(oSettings._iDisplayLength>=0){var iPages=parseInt((oSettings.fnRecordsDisplay()-1)/oSettings._iDisplayLength,10)+1;oSettings._iDisplayStart=(iPages-1)*oSettings._iDisplayLength}else{oSettings._iDisplayStart=0}}else{_fnLog(oSettings,0,"Unknown paging action: "+mAction)}}}}}$(oSettings.oInstance).trigger("page",oSettings);return iOldStart!=oSettings._iDisplayStart}function _fnFeatureHtmlProcessing(oSettings){var nProcessing=document.createElement("div");if(!oSettings.aanFeatures.r){nProcessing.id=oSettings.sTableId+"_processing"}nProcessing.innerHTML=oSettings.oLanguage.sProcessing;nProcessing.className=oSettings.oClasses.sProcessing;oSettings.nTable.parentNode.insertBefore(nProcessing,oSettings.nTable);return nProcessing}function _fnProcessingDisplay(oSettings,bShow){if(oSettings.oFeatures.bProcessing){var an=oSettings.aanFeatures.r;for(var i=0,iLen=an.length;i<iLen;i++){an[i].style.visibility=bShow?"visible":"hidden"}}$(oSettings.oInstance).trigger("processing",[oSettings,bShow])}function _fnFeatureHtmlTable(oSettings){if(oSettings.oScroll.sX===""&&oSettings.oScroll.sY===""){return oSettings.nTable}var nScroller=document.createElement("div"),nScrollHead=document.createElement("div"),nScrollHeadInner=document.createElement("div"),nScrollBody=document.createElement("div"),nScrollFoot=document.createElement("div"),nScrollFootInner=document.createElement("div"),nScrollHeadTable=oSettings.nTable.cloneNode(false),nScrollFootTable=oSettings.nTable.cloneNode(false),nThead=oSettings.nTable.getElementsByTagName("thead")[0],nTfoot=oSettings.nTable.getElementsByTagName("tfoot").length===0?null:oSettings.nTable.getElementsByTagName("tfoot")[0],oClasses=oSettings.oClasses;nScrollHead.appendChild(nScrollHeadInner);nScrollFoot.appendChild(nScrollFootInner);nScrollBody.appendChild(oSettings.nTable);nScroller.appendChild(nScrollHead);nScroller.appendChild(nScrollBody);nScrollHeadInner.appendChild(nScrollHeadTable);nScrollHeadTable.appendChild(nThead);if(nTfoot!==null){nScroller.appendChild(nScrollFoot);nScrollFootInner.appendChild(nScrollFootTable);nScrollFootTable.appendChild(nTfoot)}nScroller.className=oClasses.sScrollWrapper;nScrollHead.className=oClasses.sScrollHead;nScrollHeadInner.className=oClasses.sScrollHeadInner;nScrollBody.className=oClasses.sScrollBody;nScrollFoot.className=oClasses.sScrollFoot;nScrollFootInner.className=oClasses.sScrollFootInner;if(oSettings.oScroll.bAutoCss){nScrollHead.style.overflow="hidden";nScrollHead.style.position="relative";nScrollFoot.style.overflow="hidden";nScrollBody.style.overflow="auto"}nScrollHead.style.border="0";nScrollHead.style.width="100%";nScrollFoot.style.border="0";nScrollHeadInner.style.width=oSettings.oScroll.sXInner!==""?oSettings.oScroll.sXInner:"100%";nScrollHeadTable.removeAttribute("id");nScrollHeadTable.style.marginLeft="0";oSettings.nTable.style.marginLeft="0";if(nTfoot!==null){nScrollFootTable.removeAttribute("id");nScrollFootTable.style.marginLeft="0"}var nCaption=$(oSettings.nTable).children("caption");if(nCaption.length>0){nCaption=nCaption[0];if(nCaption._captionSide==="top"){nScrollHeadTable.appendChild(nCaption)}else{if(nCaption._captionSide==="bottom"&&nTfoot){nScrollFootTable.appendChild(nCaption)}}}if(oSettings.oScroll.sX!==""){nScrollHead.style.width=_fnStringToCss(oSettings.oScroll.sX);nScrollBody.style.width=_fnStringToCss(oSettings.oScroll.sX);if(nTfoot!==null){nScrollFoot.style.width=_fnStringToCss(oSettings.oScroll.sX)}$(nScrollBody).scroll(function(e){nScrollHead.scrollLeft=this.scrollLeft;if(nTfoot!==null){nScrollFoot.scrollLeft=this.scrollLeft}})}if(oSettings.oScroll.sY!==""){nScrollBody.style.height=_fnStringToCss(oSettings.oScroll.sY)}oSettings.aoDrawCallback.push({fn:_fnScrollDraw,sName:"scrolling"});if(oSettings.oScroll.bInfinite){$(nScrollBody).scroll(function(){if(!oSettings.bDrawing&&$(this).scrollTop()!==0){if($(this).scrollTop()+$(this).height()>$(oSettings.nTable).height()-oSettings.oScroll.iLoadGap){if(oSettings.fnDisplayEnd()<oSettings.fnRecordsDisplay()){_fnPageChange(oSettings,"next");_fnCalculateEnd(oSettings);_fnDraw(oSettings)}}}})}oSettings.nScrollHead=nScrollHead;oSettings.nScrollFoot=nScrollFoot;return nScroller}function _fnScrollDraw(o){var nScrollHeadInner=o.nScrollHead.getElementsByTagName("div")[0],nScrollHeadTable=nScrollHeadInner.getElementsByTagName("table")[0],nScrollBody=o.nTable.parentNode,i,iLen,j,jLen,anHeadToSize,anHeadSizers,anFootSizers,anFootToSize,oStyle,iVis,nTheadSize,nTfootSize,iWidth,aApplied=[],aAppliedFooter=[],iSanityWidth,nScrollFootInner=(o.nTFoot!==null)?o.nScrollFoot.getElementsByTagName("div")[0]:null,nScrollFootTable=(o.nTFoot!==null)?nScrollFootInner.getElementsByTagName("table")[0]:null,ie67=o.oBrowser.bScrollOversize,zeroOut=function(nSizer){oStyle=nSizer.style;oStyle.paddingTop="0";oStyle.paddingBottom="0";oStyle.borderTopWidth="0";oStyle.borderBottomWidth="0";oStyle.height=0};$(o.nTable).children("thead, tfoot").remove();nTheadSize=$(o.nTHead).clone()[0];o.nTable.insertBefore(nTheadSize,o.nTable.childNodes[0]);anHeadToSize=o.nTHead.getElementsByTagName("tr");anHeadSizers=nTheadSize.getElementsByTagName("tr");if(o.nTFoot!==null){nTfootSize=$(o.nTFoot).clone()[0];o.nTable.insertBefore(nTfootSize,o.nTable.childNodes[1]);anFootToSize=o.nTFoot.getElementsByTagName("tr");anFootSizers=nTfootSize.getElementsByTagName("tr")}if(o.oScroll.sX===""){nScrollBody.style.width="100%";nScrollHeadInner.parentNode.style.width="100%"}var nThs=_fnGetUniqueThs(o,nTheadSize);for(i=0,iLen=nThs.length;i<iLen;i++){iVis=_fnVisibleToColumnIndex(o,i);nThs[i].style.width=o.aoColumns[iVis].sWidth}if(o.nTFoot!==null){_fnApplyToChildren(function(n){n.style.width=""},anFootSizers)}if(o.oScroll.bCollapse&&o.oScroll.sY!==""){nScrollBody.style.height=(nScrollBody.offsetHeight+o.nTHead.offsetHeight)+"px"}iSanityWidth=$(o.nTable).outerWidth();if(o.oScroll.sX===""){o.nTable.style.width="100%";if(ie67&&($("tbody",nScrollBody).height()>nScrollBody.offsetHeight||$(nScrollBody).css("overflow-y")=="scroll")){o.nTable.style.width=_fnStringToCss($(o.nTable).outerWidth()-o.oScroll.iBarWidth)}}else{if(o.oScroll.sXInner!==""){o.nTable.style.width=_fnStringToCss(o.oScroll.sXInner)}else{if(iSanityWidth==$(nScrollBody).width()&&$(nScrollBody).height()<$(o.nTable).height()){o.nTable.style.width=_fnStringToCss(iSanityWidth-o.oScroll.iBarWidth);if($(o.nTable).outerWidth()>iSanityWidth-o.oScroll.iBarWidth){o.nTable.style.width=_fnStringToCss(iSanityWidth)}}else{o.nTable.style.width=_fnStringToCss(iSanityWidth)}}}iSanityWidth=$(o.nTable).outerWidth();_fnApplyToChildren(zeroOut,anHeadSizers);_fnApplyToChildren(function(nSizer){aApplied.push(_fnStringToCss($(nSizer).width()))},anHeadSizers);_fnApplyToChildren(function(nToSize,i){nToSize.style.width=aApplied[i]},anHeadToSize);$(anHeadSizers).height(0);if(o.nTFoot!==null){_fnApplyToChildren(zeroOut,anFootSizers);_fnApplyToChildren(function(nSizer){aAppliedFooter.push(_fnStringToCss($(nSizer).width()))},anFootSizers);_fnApplyToChildren(function(nToSize,i){nToSize.style.width=aAppliedFooter[i]},anFootToSize);$(anFootSizers).height(0)}_fnApplyToChildren(function(nSizer,i){nSizer.innerHTML="";nSizer.style.width=aApplied[i]},anHeadSizers);if(o.nTFoot!==null){_fnApplyToChildren(function(nSizer,i){nSizer.innerHTML="";nSizer.style.width=aAppliedFooter[i]},anFootSizers)}if($(o.nTable).outerWidth()<iSanityWidth){var iCorrection=((nScrollBody.scrollHeight>nScrollBody.offsetHeight||$(nScrollBody).css("overflow-y")=="scroll"))?iSanityWidth+o.oScroll.iBarWidth:iSanityWidth;if(ie67&&(nScrollBody.scrollHeight>nScrollBody.offsetHeight||$(nScrollBody).css("overflow-y")=="scroll")){o.nTable.style.width=_fnStringToCss(iCorrection-o.oScroll.iBarWidth)}nScrollBody.style.width=_fnStringToCss(iCorrection);o.nScrollHead.style.width=_fnStringToCss(iCorrection);if(o.nTFoot!==null){o.nScrollFoot.style.width=_fnStringToCss(iCorrection)}if(o.oScroll.sX===""){_fnLog(o,1,"The table cannot fit into the current element which will cause column misalignment. The table has been drawn at its minimum possible width.")}else{if(o.oScroll.sXInner!==""){_fnLog(o,1,"The table cannot fit into the current element which will cause column misalignment. Increase the sScrollXInner value or remove it to allow automatic calculation")}}}else{nScrollBody.style.width=_fnStringToCss("100%");o.nScrollHead.style.width=_fnStringToCss("100%");if(o.nTFoot!==null){o.nScrollFoot.style.width=_fnStringToCss("100%")}}if(o.oScroll.sY===""){if(ie67){nScrollBody.style.height=_fnStringToCss(o.nTable.offsetHeight+o.oScroll.iBarWidth)}}if(o.oScroll.sY!==""&&o.oScroll.bCollapse){nScrollBody.style.height=_fnStringToCss(o.oScroll.sY);var iExtra=(o.oScroll.sX!==""&&o.nTable.offsetWidth>nScrollBody.offsetWidth)?o.oScroll.iBarWidth:0;if(o.nTable.offsetHeight<nScrollBody.offsetHeight){nScrollBody.style.height=_fnStringToCss(o.nTable.offsetHeight+iExtra)}}var iOuterWidth=$(o.nTable).outerWidth();nScrollHeadTable.style.width=_fnStringToCss(iOuterWidth);nScrollHeadInner.style.width=_fnStringToCss(iOuterWidth);var bScrolling=$(o.nTable).height()>nScrollBody.clientHeight||$(nScrollBody).css("overflow-y")=="scroll";nScrollHeadInner.style.paddingRight=bScrolling?o.oScroll.iBarWidth+"px":"0px";if(o.nTFoot!==null){nScrollFootTable.style.width=_fnStringToCss(iOuterWidth);nScrollFootInner.style.width=_fnStringToCss(iOuterWidth);nScrollFootInner.style.paddingRight=bScrolling?o.oScroll.iBarWidth+"px":"0px"}$(nScrollBody).scroll();if(o.bSorted||o.bFiltered){nScrollBody.scrollTop=0}}function _fnApplyToChildren(fn,an1,an2){var index=0,i=0,iLen=an1.length;var nNode1,nNode2;while(i<iLen){nNode1=an1[i].firstChild;nNode2=an2?an2[i].firstChild:null;while(nNode1){if(nNode1.nodeType===1){if(an2){fn(nNode1,nNode2,index)}else{fn(nNode1,index)}index++}nNode1=nNode1.nextSibling;nNode2=an2?nNode2.nextSibling:null}i++}}function _fnConvertToWidth(sWidth,nParent){if(!sWidth||sWidth===null||sWidth===""){return 0}if(!nParent){nParent=document.body}var iWidth;var nTmp=document.createElement("div");nTmp.style.width=_fnStringToCss(sWidth);nParent.appendChild(nTmp);iWidth=nTmp.offsetWidth;nParent.removeChild(nTmp);return(iWidth)}function _fnCalculateColumnWidths(oSettings){var iTableWidth=oSettings.nTable.offsetWidth;var iUserInputs=0;var iTmpWidth;var iVisibleColumns=0;var iColums=oSettings.aoColumns.length;var i,iIndex,iCorrector,iWidth;var oHeaders=$("th",oSettings.nTHead);var widthAttr=oSettings.nTable.getAttribute("width");var nWrapper=oSettings.nTable.parentNode;for(i=0;i<iColums;i++){if(oSettings.aoColumns[i].bVisible){iVisibleColumns++;if(oSettings.aoColumns[i].sWidth!==null){iTmpWidth=_fnConvertToWidth(oSettings.aoColumns[i].sWidthOrig,nWrapper);if(iTmpWidth!==null){oSettings.aoColumns[i].sWidth=_fnStringToCss(iTmpWidth)}iUserInputs++}}}if(iColums==oHeaders.length&&iUserInputs===0&&iVisibleColumns==iColums&&oSettings.oScroll.sX===""&&oSettings.oScroll.sY===""){for(i=0;i<oSettings.aoColumns.length;i++){iTmpWidth=$(oHeaders[i]).width();if(iTmpWidth!==null){oSettings.aoColumns[i].sWidth=_fnStringToCss(iTmpWidth)}}}else{var nCalcTmp=oSettings.nTable.cloneNode(false),nTheadClone=oSettings.nTHead.cloneNode(true),nBody=document.createElement("tbody"),nTr=document.createElement("tr"),nDivSizing;nCalcTmp.removeAttribute("id");nCalcTmp.appendChild(nTheadClone);if(oSettings.nTFoot!==null){nCalcTmp.appendChild(oSettings.nTFoot.cloneNode(true));_fnApplyToChildren(function(n){n.style.width=""},nCalcTmp.getElementsByTagName("tr"))}nCalcTmp.appendChild(nBody);nBody.appendChild(nTr);var jqColSizing=$("thead th",nCalcTmp);if(jqColSizing.length===0){jqColSizing=$("tbody tr:eq(0)>td",nCalcTmp)}var nThs=_fnGetUniqueThs(oSettings,nTheadClone);iCorrector=0;for(i=0;i<iColums;i++){var oColumn=oSettings.aoColumns[i];if(oColumn.bVisible&&oColumn.sWidthOrig!==null&&oColumn.sWidthOrig!==""){nThs[i-iCorrector].style.width=_fnStringToCss(oColumn.sWidthOrig)}else{if(oColumn.bVisible){nThs[i-iCorrector].style.width=""}else{iCorrector++}}}for(i=0;i<iColums;i++){if(oSettings.aoColumns[i].bVisible){var nTd=_fnGetWidestNode(oSettings,i);if(nTd!==null){nTd=nTd.cloneNode(true);if(oSettings.aoColumns[i].sContentPadding!==""){nTd.innerHTML+=oSettings.aoColumns[i].sContentPadding}nTr.appendChild(nTd)}}}nWrapper.appendChild(nCalcTmp);if(oSettings.oScroll.sX!==""&&oSettings.oScroll.sXInner!==""){nCalcTmp.style.width=_fnStringToCss(oSettings.oScroll.sXInner)}else{if(oSettings.oScroll.sX!==""){nCalcTmp.style.width="";if($(nCalcTmp).width()<nWrapper.offsetWidth){nCalcTmp.style.width=_fnStringToCss(nWrapper.offsetWidth)}}else{if(oSettings.oScroll.sY!==""){nCalcTmp.style.width=_fnStringToCss(nWrapper.offsetWidth)}else{if(widthAttr){nCalcTmp.style.width=_fnStringToCss(widthAttr)}}}}nCalcTmp.style.visibility="hidden";_fnScrollingWidthAdjust(oSettings,nCalcTmp);var oNodes=$("tbody tr:eq(0)",nCalcTmp).children();if(oNodes.length===0){oNodes=_fnGetUniqueThs(oSettings,$("thead",nCalcTmp)[0])}if(oSettings.oScroll.sX!==""){var iTotal=0;iCorrector=0;for(i=0;i<oSettings.aoColumns.length;i++){if(oSettings.aoColumns[i].bVisible){if(oSettings.aoColumns[i].sWidthOrig===null){iTotal+=$(oNodes[iCorrector]).outerWidth()}else{iTotal+=parseInt(oSettings.aoColumns[i].sWidth.replace("px",""),10)+($(oNodes[iCorrector]).outerWidth()-$(oNodes[iCorrector]).width())}iCorrector++}}nCalcTmp.style.width=_fnStringToCss(iTotal);oSettings.nTable.style.width=_fnStringToCss(iTotal)}iCorrector=0;for(i=0;i<oSettings.aoColumns.length;i++){if(oSettings.aoColumns[i].bVisible){iWidth=$(oNodes[iCorrector]).width();if(iWidth!==null&&iWidth>0){oSettings.aoColumns[i].sWidth=_fnStringToCss(iWidth)}iCorrector++}}var cssWidth=$(nCalcTmp).css("width");oSettings.nTable.style.width=(cssWidth.indexOf("%")!==-1)?cssWidth:_fnStringToCss($(nCalcTmp).outerWidth());nCalcTmp.parentNode.removeChild(nCalcTmp)}if(widthAttr){oSettings.nTable.style.width=_fnStringToCss(widthAttr)}}function _fnScrollingWidthAdjust(oSettings,n){if(oSettings.oScroll.sX===""&&oSettings.oScroll.sY!==""){var iOrigWidth=$(n).width();n.style.width=_fnStringToCss($(n).outerWidth()-oSettings.oScroll.iBarWidth)}else{if(oSettings.oScroll.sX!==""){n.style.width=_fnStringToCss($(n).outerWidth())}}}function _fnGetWidestNode(oSettings,iCol){var iMaxIndex=_fnGetMaxLenString(oSettings,iCol);if(iMaxIndex<0){return null}if(oSettings.aoData[iMaxIndex].nTr===null){var n=document.createElement("td");n.innerHTML=_fnGetCellData(oSettings,iMaxIndex,iCol,"");return n}return _fnGetTdNodes(oSettings,iMaxIndex)[iCol]}function _fnGetMaxLenString(oSettings,iCol){var iMax=-1;var iMaxIndex=-1;for(var i=0;i<oSettings.aoData.length;i++){var s=_fnGetCellData(oSettings,i,iCol,"display")+"";s=s.replace(/<.*?>/g,"");if(s.length>iMax){iMax=s.length;iMaxIndex=i}}return iMaxIndex}function _fnStringToCss(s){if(s===null){return"0px"}if(typeof s=="number"){if(s<0){return"0px"}return s+"px"}var c=s.charCodeAt(s.length-1);if(c<48||c>57){return s}return s+"px"}function _fnScrollBarWidth(){var inner=document.createElement("p");var style=inner.style;style.width="100%";style.height="200px";style.padding="0px";var outer=document.createElement("div");style=outer.style;style.position="absolute";style.top="0px";style.left="0px";style.visibility="hidden";style.width="200px";style.height="150px";style.padding="0px";style.overflow="hidden";outer.appendChild(inner);document.body.appendChild(outer);var w1=inner.offsetWidth;outer.style.overflow="scroll";var w2=inner.offsetWidth;if(w1==w2){w2=outer.clientWidth}document.body.removeChild(outer);return(w1-w2)}function _fnSort(oSettings,bApplyClasses){var i,iLen,j,jLen,k,kLen,sDataType,nTh,aaSort=[],aiOrig=[],oSort=DataTable.ext.oSort,aoData=oSettings.aoData,aoColumns=oSettings.aoColumns,oAria=oSettings.oLanguage.oAria;if(!oSettings.oFeatures.bServerSide&&(oSettings.aaSorting.length!==0||oSettings.aaSortingFixed!==null)){aaSort=(oSettings.aaSortingFixed!==null)?oSettings.aaSortingFixed.concat(oSettings.aaSorting):oSettings.aaSorting.slice();for(i=0;i<aaSort.length;i++){var iColumn=aaSort[i][0];var iVisColumn=_fnColumnIndexToVisible(oSettings,iColumn);sDataType=oSettings.aoColumns[iColumn].sSortDataType;if(DataTable.ext.afnSortData[sDataType]){var aData=DataTable.ext.afnSortData[sDataType].call(oSettings.oInstance,oSettings,iColumn,iVisColumn);if(aData.length===aoData.length){for(j=0,jLen=aoData.length;j<jLen;j++){_fnSetCellData(oSettings,j,iColumn,aData[j])}}else{_fnLog(oSettings,0,"Returned data sort array (col "+iColumn+") is the wrong length")}}}for(i=0,iLen=oSettings.aiDisplayMaster.length;i<iLen;i++){aiOrig[oSettings.aiDisplayMaster[i]]=i}var iSortLen=aaSort.length;var fnSortFormat,aDataSort;for(i=0,iLen=aoData.length;i<iLen;i++){for(j=0;j<iSortLen;j++){aDataSort=aoColumns[aaSort[j][0]].aDataSort;for(k=0,kLen=aDataSort.length;k<kLen;k++){sDataType=aoColumns[aDataSort[k]].sType;fnSortFormat=oSort[(sDataType?sDataType:"string")+"-pre"];aoData[i]._aSortData[aDataSort[k]]=fnSortFormat?fnSortFormat(_fnGetCellData(oSettings,i,aDataSort[k],"sort")):_fnGetCellData(oSettings,i,aDataSort[k],"sort")}}}oSettings.aiDisplayMaster.sort(function(a,b){var k,l,lLen,iTest,aDataSort,sDataType;for(k=0;k<iSortLen;k++){aDataSort=aoColumns[aaSort[k][0]].aDataSort;for(l=0,lLen=aDataSort.length;l<lLen;l++){sDataType=aoColumns[aDataSort[l]].sType;iTest=oSort[(sDataType?sDataType:"string")+"-"+aaSort[k][1]](aoData[a]._aSortData[aDataSort[l]],aoData[b]._aSortData[aDataSort[l]]);if(iTest!==0){return iTest}}}return oSort["numeric-asc"](aiOrig[a],aiOrig[b])})}if((bApplyClasses===undefined||bApplyClasses)&&!oSettings.oFeatures.bDeferRender){_fnSortingClasses(oSettings)}for(i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){var sTitle=aoColumns[i].sTitle.replace(/<.*?>/g,"");nTh=aoColumns[i].nTh;nTh.removeAttribute("aria-sort");nTh.removeAttribute("aria-label");if(aoColumns[i].bSortable){if(aaSort.length>0&&aaSort[0][0]==i){nTh.setAttribute("aria-sort",aaSort[0][1]=="asc"?"ascending":"descending");var nextSort=(aoColumns[i].asSorting[aaSort[0][2]+1])?aoColumns[i].asSorting[aaSort[0][2]+1]:aoColumns[i].asSorting[0];nTh.setAttribute("aria-label",sTitle+(nextSort=="asc"?oAria.sSortAscending:oAria.sSortDescending))}else{nTh.setAttribute("aria-label",sTitle+(aoColumns[i].asSorting[0]=="asc"?oAria.sSortAscending:oAria.sSortDescending))}}else{nTh.setAttribute("aria-label",sTitle)}}oSettings.bSorted=true;$(oSettings.oInstance).trigger("sort",oSettings);if(oSettings.oFeatures.bFilter){_fnFilterComplete(oSettings,oSettings.oPreviousSearch,1)}else{oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();oSettings._iDisplayStart=0;_fnCalculateEnd(oSettings);_fnDraw(oSettings)}}function _fnSortAttachListener(oSettings,nNode,iDataIndex,fnCallback){_fnBindAction(nNode,{},function(e){if(oSettings.aoColumns[iDataIndex].bSortable===false){return}var fnInnerSorting=function(){var iColumn,iNextSort;if(e.shiftKey){var bFound=false;for(var i=0;i<oSettings.aaSorting.length;i++){if(oSettings.aaSorting[i][0]==iDataIndex){bFound=true;iColumn=oSettings.aaSorting[i][0];iNextSort=oSettings.aaSorting[i][2]+1;if(!oSettings.aoColumns[iColumn].asSorting[iNextSort]){oSettings.aaSorting.splice(i,1)}else{oSettings.aaSorting[i][1]=oSettings.aoColumns[iColumn].asSorting[iNextSort];oSettings.aaSorting[i][2]=iNextSort}break}}if(bFound===false){oSettings.aaSorting.push([iDataIndex,oSettings.aoColumns[iDataIndex].asSorting[0],0])}}else{if(oSettings.aaSorting.length==1&&oSettings.aaSorting[0][0]==iDataIndex){iColumn=oSettings.aaSorting[0][0];iNextSort=oSettings.aaSorting[0][2]+1;if(!oSettings.aoColumns[iColumn].asSorting[iNextSort]){iNextSort=0}oSettings.aaSorting[0][1]=oSettings.aoColumns[iColumn].asSorting[iNextSort];oSettings.aaSorting[0][2]=iNextSort}else{oSettings.aaSorting.splice(0,oSettings.aaSorting.length);oSettings.aaSorting.push([iDataIndex,oSettings.aoColumns[iDataIndex].asSorting[0],0])}}_fnSort(oSettings)};if(!oSettings.oFeatures.bProcessing){fnInnerSorting()}else{_fnProcessingDisplay(oSettings,true);setTimeout(function(){fnInnerSorting();if(!oSettings.oFeatures.bServerSide){_fnProcessingDisplay(oSettings,false)}},0)}if(typeof fnCallback=="function"){fnCallback(oSettings)}})}function _fnSortingClasses(oSettings){var i,iLen,j,jLen,iFound;var aaSort,sClass;var iColumns=oSettings.aoColumns.length;var oClasses=oSettings.oClasses;for(i=0;i<iColumns;i++){if(oSettings.aoColumns[i].bSortable){$(oSettings.aoColumns[i].nTh).removeClass(oClasses.sSortAsc+" "+oClasses.sSortDesc+" "+oSettings.aoColumns[i].sSortingClass)}}if(oSettings.aaSortingFixed!==null){aaSort=oSettings.aaSortingFixed.concat(oSettings.aaSorting)}else{aaSort=oSettings.aaSorting.slice()}for(i=0;i<oSettings.aoColumns.length;i++){if(oSettings.aoColumns[i].bSortable){sClass=oSettings.aoColumns[i].sSortingClass;iFound=-1;for(j=0;j<aaSort.length;j++){if(aaSort[j][0]==i){sClass=(aaSort[j][1]=="asc")?oClasses.sSortAsc:oClasses.sSortDesc;iFound=j;break}}$(oSettings.aoColumns[i].nTh).addClass(sClass);if(oSettings.bJUI){var jqSpan=$("span."+oClasses.sSortIcon,oSettings.aoColumns[i].nTh);jqSpan.removeClass(oClasses.sSortJUIAsc+" "+oClasses.sSortJUIDesc+" "+oClasses.sSortJUI+" "+oClasses.sSortJUIAscAllowed+" "+oClasses.sSortJUIDescAllowed);var sSpanClass;if(iFound==-1){sSpanClass=oSettings.aoColumns[i].sSortingClassJUI}else{if(aaSort[iFound][1]=="asc"){sSpanClass=oClasses.sSortJUIAsc}else{sSpanClass=oClasses.sSortJUIDesc}}jqSpan.addClass(sSpanClass)}}else{$(oSettings.aoColumns[i].nTh).addClass(oSettings.aoColumns[i].sSortingClass)}}sClass=oClasses.sSortColumn;if(oSettings.oFeatures.bSort&&oSettings.oFeatures.bSortClasses){var nTds=_fnGetTdNodes(oSettings);var iClass,iTargetCol;var asClasses=[];for(i=0;i<iColumns;i++){asClasses.push("")}for(i=0,iClass=1;i<aaSort.length;i++){iTargetCol=parseInt(aaSort[i][0],10);asClasses[iTargetCol]=sClass+iClass;if(iClass<3){iClass++}}var reClass=new RegExp(sClass+"[123]");var sTmpClass,sCurrentClass,sNewClass;for(i=0,iLen=nTds.length;i<iLen;i++){iTargetCol=i%iColumns;sCurrentClass=nTds[i].className;sNewClass=asClasses[iTargetCol];sTmpClass=sCurrentClass.replace(reClass,sNewClass);if(sTmpClass!=sCurrentClass){nTds[i].className=$.trim(sTmpClass)}else{if(sNewClass.length>0&&sCurrentClass.indexOf(sNewClass)==-1){nTds[i].className=sCurrentClass+" "+sNewClass}}}}}function _fnSaveState(oSettings){if(!oSettings.oFeatures.bStateSave||oSettings.bDestroying){return}var i,iLen,bInfinite=oSettings.oScroll.bInfinite;var oState={iCreate:new Date().getTime(),iStart:(bInfinite?0:oSettings._iDisplayStart),iEnd:(bInfinite?oSettings._iDisplayLength:oSettings._iDisplayEnd),iLength:oSettings._iDisplayLength,aaSorting:$.extend(true,[],oSettings.aaSorting),oSearch:$.extend(true,{},oSettings.oPreviousSearch),aoSearchCols:$.extend(true,[],oSettings.aoPreSearchCols),abVisCols:[]};for(i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){oState.abVisCols.push(oSettings.aoColumns[i].bVisible)}_fnCallbackFire(oSettings,"aoStateSaveParams","stateSaveParams",[oSettings,oState]);oSettings.fnStateSave.call(oSettings.oInstance,oSettings,oState)}function _fnLoadState(oSettings,oInit){if(!oSettings.oFeatures.bStateSave){return}var oData=oSettings.fnStateLoad.call(oSettings.oInstance,oSettings);if(!oData){return}var abStateLoad=_fnCallbackFire(oSettings,"aoStateLoadParams","stateLoadParams",[oSettings,oData]);if($.inArray(false,abStateLoad)!==-1){return}oSettings.oLoadedState=$.extend(true,{},oData);oSettings._iDisplayStart=oData.iStart;oSettings.iInitDisplayStart=oData.iStart;oSettings._iDisplayEnd=oData.iEnd;oSettings._iDisplayLength=oData.iLength;oSettings.aaSorting=oData.aaSorting.slice();oSettings.saved_aaSorting=oData.aaSorting.slice();$.extend(oSettings.oPreviousSearch,oData.oSearch);$.extend(true,oSettings.aoPreSearchCols,oData.aoSearchCols);oInit.saved_aoColumns=[];for(var i=0;i<oData.abVisCols.length;i++){oInit.saved_aoColumns[i]={};oInit.saved_aoColumns[i].bVisible=oData.abVisCols[i]}_fnCallbackFire(oSettings,"aoStateLoaded","stateLoaded",[oSettings,oData])}function _fnCreateCookie(sName,sValue,iSecs,sBaseName,fnCallback){var date=new Date();date.setTime(date.getTime()+(iSecs*1000));var aParts=window.location.pathname.split("/");var sNameFile=sName+"_"+aParts.pop().replace(/[\/:]/g,"").toLowerCase();var sFullCookie,oData;if(fnCallback!==null){oData=(typeof $.parseJSON==="function")?$.parseJSON(sValue):eval("("+sValue+")");sFullCookie=fnCallback(sNameFile,oData,date.toGMTString(),aParts.join("/")+"/")}else{sFullCookie=sNameFile+"="+encodeURIComponent(sValue)+"; expires="+date.toGMTString()+"; path="+aParts.join("/")+"/"}var aCookies=document.cookie.split(";"),iNewCookieLen=sFullCookie.split(";")[0].length,aOldCookies=[];if(iNewCookieLen+document.cookie.length+10>4096){for(var i=0,iLen=aCookies.length;i<iLen;i++){if(aCookies[i].indexOf(sBaseName)!=-1){var aSplitCookie=aCookies[i].split("=");try{oData=eval("("+decodeURIComponent(aSplitCookie[1])+")");if(oData&&oData.iCreate){aOldCookies.push({name:aSplitCookie[0],time:oData.iCreate})}}catch(e){}}}aOldCookies.sort(function(a,b){return b.time-a.time});while(iNewCookieLen+document.cookie.length+10>4096){if(aOldCookies.length===0){return}var old=aOldCookies.pop();document.cookie=old.name+"=; expires=Thu, 01-Jan-1970 00:00:01 GMT; path="+aParts.join("/")+"/"}}document.cookie=sFullCookie}function _fnReadCookie(sName){var aParts=window.location.pathname.split("/"),sNameEQ=sName+"_"+aParts[aParts.length-1].replace(/[\/:]/g,"").toLowerCase()+"=",sCookieContents=document.cookie.split(";");for(var i=0;i<sCookieContents.length;i++){var c=sCookieContents[i];while(c.charAt(0)==" "){c=c.substring(1,c.length)}if(c.indexOf(sNameEQ)===0){return decodeURIComponent(c.substring(sNameEQ.length,c.length))}}return null}function _fnSettingsFromNode(nTable){for(var i=0;i<DataTable.settings.length;i++){if(DataTable.settings[i].nTable===nTable){return DataTable.settings[i]}}return null}function _fnGetTrNodes(oSettings){var aNodes=[];var aoData=oSettings.aoData;for(var i=0,iLen=aoData.length;i<iLen;i++){if(aoData[i].nTr!==null){aNodes.push(aoData[i].nTr)}}return aNodes}function _fnGetTdNodes(oSettings,iIndividualRow){var anReturn=[];var iCorrector;var anTds,nTd;var iRow,iRows=oSettings.aoData.length,iColumn,iColumns,oData,sNodeName,iStart=0,iEnd=iRows;if(iIndividualRow!==undefined){iStart=iIndividualRow;iEnd=iIndividualRow+1}for(iRow=iStart;iRow<iEnd;iRow++){oData=oSettings.aoData[iRow];if(oData.nTr!==null){anTds=[];nTd=oData.nTr.firstChild;while(nTd){sNodeName=nTd.nodeName.toLowerCase();if(sNodeName=="td"||sNodeName=="th"){anTds.push(nTd)}nTd=nTd.nextSibling}iCorrector=0;for(iColumn=0,iColumns=oSettings.aoColumns.length;iColumn<iColumns;iColumn++){if(oSettings.aoColumns[iColumn].bVisible){anReturn.push(anTds[iColumn-iCorrector])}else{anReturn.push(oData._anHidden[iColumn]);iCorrector++}}}}return anReturn}function _fnLog(oSettings,iLevel,sMesg){var sAlert=(oSettings===null)?"DataTables warning: "+sMesg:"DataTables warning (table id = '"+oSettings.sTableId+"'): "+sMesg;if(iLevel===0){if(DataTable.ext.sErrMode=="alert"){alert(sAlert)}else{throw new Error(sAlert)}return}else{if(window.console&&console.log){console.log(sAlert)}}}function _fnMap(oRet,oSrc,sName,sMappedName){if(sMappedName===undefined){sMappedName=sName}if(oSrc[sName]!==undefined){oRet[sMappedName]=oSrc[sName]}}function _fnExtend(oOut,oExtender){var val;for(var prop in oExtender){if(oExtender.hasOwnProperty(prop)){val=oExtender[prop];if(typeof oInit[prop]==="object"&&val!==null&&$.isArray(val)===false){$.extend(true,oOut[prop],val)}else{oOut[prop]=val}}}return oOut}function _fnBindAction(n,oData,fn){$(n).bind("click.DT",oData,function(e){n.blur();fn(e)}).bind("keypress.DT",oData,function(e){if(e.which===13){fn(e)}}).bind("selectstart.DT",function(){return false})}function _fnCallbackReg(oSettings,sStore,fn,sName){if(fn){oSettings[sStore].push({fn:fn,sName:sName})}}function _fnCallbackFire(oSettings,sStore,sTrigger,aArgs){var aoStore=oSettings[sStore];var aRet=[];for(var i=aoStore.length-1;i>=0;i--){aRet.push(aoStore[i].fn.apply(oSettings.oInstance,aArgs))}if(sTrigger!==null){$(oSettings.oInstance).trigger(sTrigger,aArgs)}return aRet}var _fnJsonString=(window.JSON)?JSON.stringify:function(o){var sType=typeof o;if(sType!=="object"||o===null){if(sType==="string"){o='"'+o+'"'}return o+""}var sProp,mValue,json=[],bArr=$.isArray(o);for(sProp in o){mValue=o[sProp];sType=typeof mValue;if(sType==="string"){mValue='"'+mValue+'"'}else{if(sType==="object"&&mValue!==null){mValue=_fnJsonString(mValue)}}json.push((bArr?"":'"'+sProp+'":')+mValue)}return(bArr?"[":"{")+json+(bArr?"]":"}")};function _fnBrowserDetect(oSettings){var n=$('<div style="position:absolute; top:0; left:0; height:1px; width:1px; overflow:hidden"><div style="position:absolute; top:1px; left:1px; width:100px; overflow:scroll;"><div id="DT_BrowserTest" style="width:100%; height:10px;"></div></div></div>')[0];document.body.appendChild(n);oSettings.oBrowser.bScrollOversize=$("#DT_BrowserTest",n)[0].offsetWidth===100?true:false;document.body.removeChild(n)}this.$=function(sSelector,oOpts){var i,iLen,a=[],tr;var oSettings=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);var aoData=oSettings.aoData;var aiDisplay=oSettings.aiDisplay;var aiDisplayMaster=oSettings.aiDisplayMaster;if(!oOpts){oOpts={}}oOpts=$.extend({},{filter:"none",order:"current",page:"all"},oOpts);if(oOpts.page=="current"){for(i=oSettings._iDisplayStart,iLen=oSettings.fnDisplayEnd();i<iLen;i++){tr=aoData[aiDisplay[i]].nTr;if(tr){a.push(tr)}}}else{if(oOpts.order=="current"&&oOpts.filter=="none"){for(i=0,iLen=aiDisplayMaster.length;i<iLen;i++){tr=aoData[aiDisplayMaster[i]].nTr;if(tr){a.push(tr)}}}else{if(oOpts.order=="current"&&oOpts.filter=="applied"){for(i=0,iLen=aiDisplay.length;i<iLen;i++){tr=aoData[aiDisplay[i]].nTr;if(tr){a.push(tr)}}}else{if(oOpts.order=="original"&&oOpts.filter=="none"){for(i=0,iLen=aoData.length;i<iLen;i++){tr=aoData[i].nTr;if(tr){a.push(tr)}}}else{if(oOpts.order=="original"&&oOpts.filter=="applied"){for(i=0,iLen=aoData.length;i<iLen;i++){tr=aoData[i].nTr;if($.inArray(i,aiDisplay)!==-1&&tr){a.push(tr)}}}else{_fnLog(oSettings,1,"Unknown selection options")}}}}}var jqA=$(a);var jqTRs=jqA.filter(sSelector);var jqDescendants=jqA.find(sSelector);return $([].concat($.makeArray(jqTRs),$.makeArray(jqDescendants)))};this._=function(sSelector,oOpts){var aOut=[];var i,iLen,iIndex;var aTrs=this.$(sSelector,oOpts);for(i=0,iLen=aTrs.length;i<iLen;i++){aOut.push(this.fnGetData(aTrs[i]))}return aOut};this.fnAddData=function(mData,bRedraw){if(mData.length===0){return[]}var aiReturn=[];var iTest;var oSettings=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);if(typeof mData[0]==="object"&&mData[0]!==null){for(var i=0;i<mData.length;i++){iTest=_fnAddData(oSettings,mData[i]);if(iTest==-1){return aiReturn}aiReturn.push(iTest)}}else{iTest=_fnAddData(oSettings,mData);if(iTest==-1){return aiReturn}aiReturn.push(iTest)}oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();if(bRedraw===undefined||bRedraw){_fnReDraw(oSettings)}return aiReturn};this.fnAdjustColumnSizing=function(bRedraw){var oSettings=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);_fnAdjustColumnSizing(oSettings);if(bRedraw===undefined||bRedraw){this.fnDraw(false)}else{if(oSettings.oScroll.sX!==""||oSettings.oScroll.sY!==""){this.oApi._fnScrollDraw(oSettings)}}};this.fnClearTable=function(bRedraw){var oSettings=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);_fnClearTable(oSettings);if(bRedraw===undefined||bRedraw){_fnDraw(oSettings)}};this.fnClose=function(nTr){var oSettings=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);for(var i=0;i<oSettings.aoOpenRows.length;i++){if(oSettings.aoOpenRows[i].nParent==nTr){var nTrParent=oSettings.aoOpenRows[i].nTr.parentNode;if(nTrParent){nTrParent.removeChild(oSettings.aoOpenRows[i].nTr)}oSettings.aoOpenRows.splice(i,1);return 0}}return 1};this.fnDeleteRow=function(mTarget,fnCallBack,bRedraw){var oSettings=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);var i,iLen,iAODataIndex;iAODataIndex=(typeof mTarget==="object")?_fnNodeToDataIndex(oSettings,mTarget):mTarget;var oData=oSettings.aoData.splice(iAODataIndex,1);for(i=0,iLen=oSettings.aoData.length;i<iLen;i++){if(oSettings.aoData[i].nTr!==null){oSettings.aoData[i].nTr._DT_RowIndex=i}}var iDisplayIndex=$.inArray(iAODataIndex,oSettings.aiDisplay);oSettings.asDataSearch.splice(iDisplayIndex,1);_fnDeleteIndex(oSettings.aiDisplayMaster,iAODataIndex);_fnDeleteIndex(oSettings.aiDisplay,iAODataIndex);if(typeof fnCallBack==="function"){fnCallBack.call(this,oSettings,oData)}if(oSettings._iDisplayStart>=oSettings.fnRecordsDisplay()){oSettings._iDisplayStart-=oSettings._iDisplayLength;if(oSettings._iDisplayStart<0){oSettings._iDisplayStart=0}}if(bRedraw===undefined||bRedraw){_fnCalculateEnd(oSettings);_fnDraw(oSettings)}return oData};this.fnDestroy=function(bRemove){var oSettings=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);var nOrig=oSettings.nTableWrapper.parentNode;var nBody=oSettings.nTBody;var i,iLen;bRemove=(bRemove===undefined)?false:bRemove;oSettings.bDestroying=true;_fnCallbackFire(oSettings,"aoDestroyCallback","destroy",[oSettings]);if(!bRemove){for(i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){if(oSettings.aoColumns[i].bVisible===false){this.fnSetColumnVis(i,true)}}}$(oSettings.nTableWrapper).find("*").andSelf().unbind(".DT");$("tbody>tr>td."+oSettings.oClasses.sRowEmpty,oSettings.nTable).parent().remove();if(oSettings.nTable!=oSettings.nTHead.parentNode){$(oSettings.nTable).children("thead").remove();oSettings.nTable.appendChild(oSettings.nTHead)}if(oSettings.nTFoot&&oSettings.nTable!=oSettings.nTFoot.parentNode){$(oSettings.nTable).children("tfoot").remove();oSettings.nTable.appendChild(oSettings.nTFoot)}oSettings.nTable.parentNode.removeChild(oSettings.nTable);$(oSettings.nTableWrapper).remove();oSettings.aaSorting=[];oSettings.aaSortingFixed=[];_fnSortingClasses(oSettings);$(_fnGetTrNodes(oSettings)).removeClass(oSettings.asStripeClasses.join(" "));$("th, td",oSettings.nTHead).removeClass([oSettings.oClasses.sSortable,oSettings.oClasses.sSortableAsc,oSettings.oClasses.sSortableDesc,oSettings.oClasses.sSortableNone].join(" "));if(oSettings.bJUI){$("th span."+oSettings.oClasses.sSortIcon+", td span."+oSettings.oClasses.sSortIcon,oSettings.nTHead).remove();$("th, td",oSettings.nTHead).each(function(){var jqWrapper=$("div."+oSettings.oClasses.sSortJUIWrapper,this);var kids=jqWrapper.contents();$(this).append(kids);jqWrapper.remove()})}if(!bRemove&&oSettings.nTableReinsertBefore){nOrig.insertBefore(oSettings.nTable,oSettings.nTableReinsertBefore)}else{if(!bRemove){nOrig.appendChild(oSettings.nTable)}}for(i=0,iLen=oSettings.aoData.length;i<iLen;i++){if(oSettings.aoData[i].nTr!==null){nBody.appendChild(oSettings.aoData[i].nTr)}}if(oSettings.oFeatures.bAutoWidth===true){oSettings.nTable.style.width=_fnStringToCss(oSettings.sDestroyWidth)}iLen=oSettings.asDestroyStripes.length;if(iLen){var anRows=$(nBody).children("tr");for(i=0;i<iLen;i++){anRows.filter(":nth-child("+iLen+"n + "+i+")").addClass(oSettings.asDestroyStripes[i])}}for(i=0,iLen=DataTable.settings.length;i<iLen;i++){if(DataTable.settings[i]==oSettings){DataTable.settings.splice(i,1)}}oSettings=null;oInit=null};this.fnDraw=function(bComplete){var oSettings=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);if(bComplete===false){_fnCalculateEnd(oSettings);_fnDraw(oSettings)}else{_fnReDraw(oSettings)}};this.fnFilter=function(sInput,iColumn,bRegex,bSmart,bShowGlobal,bCaseInsensitive){var oSettings=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);if(!oSettings.oFeatures.bFilter){return}if(bRegex===undefined||bRegex===null){bRegex=false}if(bSmart===undefined||bSmart===null){bSmart=true}if(bShowGlobal===undefined||bShowGlobal===null){bShowGlobal=true}if(bCaseInsensitive===undefined||bCaseInsensitive===null){bCaseInsensitive=true}if(iColumn===undefined||iColumn===null){_fnFilterComplete(oSettings,{sSearch:sInput+"",bRegex:bRegex,bSmart:bSmart,bCaseInsensitive:bCaseInsensitive},1);if(bShowGlobal&&oSettings.aanFeatures.f){var n=oSettings.aanFeatures.f;for(var i=0,iLen=n.length;i<iLen;i++){try{if(n[i]._DT_Input!=document.activeElement){$(n[i]._DT_Input).val(sInput)}}catch(e){$(n[i]._DT_Input).val(sInput)}}}}else{$.extend(oSettings.aoPreSearchCols[iColumn],{sSearch:sInput+"",bRegex:bRegex,bSmart:bSmart,bCaseInsensitive:bCaseInsensitive});_fnFilterComplete(oSettings,oSettings.oPreviousSearch,1)}};this.fnGetData=function(mRow,iCol){var oSettings=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);if(mRow!==undefined){var iRow=mRow;if(typeof mRow==="object"){var sNode=mRow.nodeName.toLowerCase();if(sNode==="tr"){iRow=_fnNodeToDataIndex(oSettings,mRow)}else{if(sNode==="td"){iRow=_fnNodeToDataIndex(oSettings,mRow.parentNode);iCol=_fnNodeToColumnIndex(oSettings,iRow,mRow)}}}if(iCol!==undefined){return _fnGetCellData(oSettings,iRow,iCol,"")}return(oSettings.aoData[iRow]!==undefined)?oSettings.aoData[iRow]._aData:null}return _fnGetDataMaster(oSettings)};this.fnGetNodes=function(iRow){var oSettings=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);if(iRow!==undefined){return(oSettings.aoData[iRow]!==undefined)?oSettings.aoData[iRow].nTr:null}return _fnGetTrNodes(oSettings)};this.fnGetPosition=function(nNode){var oSettings=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);var sNodeName=nNode.nodeName.toUpperCase();if(sNodeName=="TR"){return _fnNodeToDataIndex(oSettings,nNode)}else{if(sNodeName=="TD"||sNodeName=="TH"){var iDataIndex=_fnNodeToDataIndex(oSettings,nNode.parentNode);var iColumnIndex=_fnNodeToColumnIndex(oSettings,iDataIndex,nNode);return[iDataIndex,_fnColumnIndexToVisible(oSettings,iColumnIndex),iColumnIndex]}}return null};this.fnIsOpen=function(nTr){var oSettings=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);var aoOpenRows=oSettings.aoOpenRows;for(var i=0;i<oSettings.aoOpenRows.length;i++){if(oSettings.aoOpenRows[i].nParent==nTr){return true}}return false};this.fnOpen=function(nTr,mHtml,sClass){var oSettings=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);var nTableRows=_fnGetTrNodes(oSettings);if($.inArray(nTr,nTableRows)===-1){return}this.fnClose(nTr);var nNewRow=document.createElement("tr");var nNewCell=document.createElement("td");nNewRow.appendChild(nNewCell);nNewCell.className=sClass;nNewCell.colSpan=_fnVisbleColumns(oSettings);if(typeof mHtml==="string"){nNewCell.innerHTML=mHtml}else{$(nNewCell).html(mHtml)}var nTrs=$("tr",oSettings.nTBody);if($.inArray(nTr,nTrs)!=-1){$(nNewRow).insertAfter(nTr)}oSettings.aoOpenRows.push({nTr:nNewRow,nParent:nTr});return nNewRow};this.fnPageChange=function(mAction,bRedraw){var oSettings=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);_fnPageChange(oSettings,mAction);_fnCalculateEnd(oSettings);if(bRedraw===undefined||bRedraw){_fnDraw(oSettings)}};this.fnSetColumnVis=function(iCol,bShow,bRedraw){var oSettings=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);var i,iLen;var aoColumns=oSettings.aoColumns;var aoData=oSettings.aoData;var nTd,bAppend,iBefore;if(aoColumns[iCol].bVisible==bShow){return}if(bShow){var iInsert=0;for(i=0;i<iCol;i++){if(aoColumns[i].bVisible){iInsert++}}bAppend=(iInsert>=_fnVisbleColumns(oSettings));if(!bAppend){for(i=iCol;i<aoColumns.length;i++){if(aoColumns[i].bVisible){iBefore=i;break}}}for(i=0,iLen=aoData.length;i<iLen;i++){if(aoData[i].nTr!==null){if(bAppend){aoData[i].nTr.appendChild(aoData[i]._anHidden[iCol])}else{aoData[i].nTr.insertBefore(aoData[i]._anHidden[iCol],_fnGetTdNodes(oSettings,i)[iBefore])}}}}else{for(i=0,iLen=aoData.length;i<iLen;i++){if(aoData[i].nTr!==null){nTd=_fnGetTdNodes(oSettings,i)[iCol];aoData[i]._anHidden[iCol]=nTd;nTd.parentNode.removeChild(nTd)}}}aoColumns[iCol].bVisible=bShow;_fnDrawHead(oSettings,oSettings.aoHeader);if(oSettings.nTFoot){_fnDrawHead(oSettings,oSettings.aoFooter)}for(i=0,iLen=oSettings.aoOpenRows.length;i<iLen;i++){oSettings.aoOpenRows[i].nTr.colSpan=_fnVisbleColumns(oSettings)}if(bRedraw===undefined||bRedraw){_fnAdjustColumnSizing(oSettings);_fnDraw(oSettings)}_fnSaveState(oSettings)};this.fnSettings=function(){return _fnSettingsFromNode(this[DataTable.ext.iApiIndex])};this.fnSort=function(aaSort){var oSettings=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);oSettings.aaSorting=aaSort;_fnSort(oSettings)};this.fnSortListener=function(nNode,iColumn,fnCallback){_fnSortAttachListener(_fnSettingsFromNode(this[DataTable.ext.iApiIndex]),nNode,iColumn,fnCallback)};this.fnUpdate=function(mData,mRow,iColumn,bRedraw,bAction){var oSettings=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);var i,iLen,sDisplay;var iRow=(typeof mRow==="object")?_fnNodeToDataIndex(oSettings,mRow):mRow;if($.isArray(mData)&&iColumn===undefined){oSettings.aoData[iRow]._aData=mData.slice();for(i=0;i<oSettings.aoColumns.length;i++){this.fnUpdate(_fnGetCellData(oSettings,iRow,i),iRow,i,false,false)}}else{if($.isPlainObject(mData)&&iColumn===undefined){oSettings.aoData[iRow]._aData=$.extend(true,{},mData);for(i=0;i<oSettings.aoColumns.length;i++){this.fnUpdate(_fnGetCellData(oSettings,iRow,i),iRow,i,false,false)}}else{_fnSetCellData(oSettings,iRow,iColumn,mData);sDisplay=_fnGetCellData(oSettings,iRow,iColumn,"display");var oCol=oSettings.aoColumns[iColumn];if(oCol.fnRender!==null){sDisplay=_fnRender(oSettings,iRow,iColumn);if(oCol.bUseRendered){_fnSetCellData(oSettings,iRow,iColumn,sDisplay)}}if(oSettings.aoData[iRow].nTr!==null){_fnGetTdNodes(oSettings,iRow)[iColumn].innerHTML=sDisplay}}}var iDisplayIndex=$.inArray(iRow,oSettings.aiDisplay);oSettings.asDataSearch[iDisplayIndex]=_fnBuildSearchRow(oSettings,_fnGetRowData(oSettings,iRow,"filter",_fnGetColumns(oSettings,"bSearchable")));if(bAction===undefined||bAction){_fnAdjustColumnSizing(oSettings)}if(bRedraw===undefined||bRedraw){_fnReDraw(oSettings)}return 0};this.fnVersionCheck=DataTable.ext.fnVersionCheck;function _fnExternApiFunc(sFunc){return function(){var aArgs=[_fnSettingsFromNode(this[DataTable.ext.iApiIndex])].concat(Array.prototype.slice.call(arguments));return DataTable.ext.oApi[sFunc].apply(this,aArgs)}}this.oApi={_fnExternApiFunc:_fnExternApiFunc,_fnInitialise:_fnInitialise,_fnInitComplete:_fnInitComplete,_fnLanguageCompat:_fnLanguageCompat,_fnAddColumn:_fnAddColumn,_fnColumnOptions:_fnColumnOptions,_fnAddData:_fnAddData,_fnCreateTr:_fnCreateTr,_fnGatherData:_fnGatherData,_fnBuildHead:_fnBuildHead,_fnDrawHead:_fnDrawHead,_fnDraw:_fnDraw,_fnReDraw:_fnReDraw,_fnAjaxUpdate:_fnAjaxUpdate,_fnAjaxParameters:_fnAjaxParameters,_fnAjaxUpdateDraw:_fnAjaxUpdateDraw,_fnServerParams:_fnServerParams,_fnAddOptionsHtml:_fnAddOptionsHtml,_fnFeatureHtmlTable:_fnFeatureHtmlTable,_fnScrollDraw:_fnScrollDraw,_fnAdjustColumnSizing:_fnAdjustColumnSizing,_fnFeatureHtmlFilter:_fnFeatureHtmlFilter,_fnFilterComplete:_fnFilterComplete,_fnFilterCustom:_fnFilterCustom,_fnFilterColumn:_fnFilterColumn,_fnFilter:_fnFilter,_fnBuildSearchArray:_fnBuildSearchArray,_fnBuildSearchRow:_fnBuildSearchRow,_fnFilterCreateSearch:_fnFilterCreateSearch,_fnDataToSearch:_fnDataToSearch,_fnSort:_fnSort,_fnSortAttachListener:_fnSortAttachListener,_fnSortingClasses:_fnSortingClasses,_fnFeatureHtmlPaginate:_fnFeatureHtmlPaginate,_fnPageChange:_fnPageChange,_fnFeatureHtmlInfo:_fnFeatureHtmlInfo,_fnUpdateInfo:_fnUpdateInfo,_fnFeatureHtmlLength:_fnFeatureHtmlLength,_fnFeatureHtmlProcessing:_fnFeatureHtmlProcessing,_fnProcessingDisplay:_fnProcessingDisplay,_fnVisibleToColumnIndex:_fnVisibleToColumnIndex,_fnColumnIndexToVisible:_fnColumnIndexToVisible,_fnNodeToDataIndex:_fnNodeToDataIndex,_fnVisbleColumns:_fnVisbleColumns,_fnCalculateEnd:_fnCalculateEnd,_fnConvertToWidth:_fnConvertToWidth,_fnCalculateColumnWidths:_fnCalculateColumnWidths,_fnScrollingWidthAdjust:_fnScrollingWidthAdjust,_fnGetWidestNode:_fnGetWidestNode,_fnGetMaxLenString:_fnGetMaxLenString,_fnStringToCss:_fnStringToCss,_fnDetectType:_fnDetectType,_fnSettingsFromNode:_fnSettingsFromNode,_fnGetDataMaster:_fnGetDataMaster,_fnGetTrNodes:_fnGetTrNodes,_fnGetTdNodes:_fnGetTdNodes,_fnEscapeRegex:_fnEscapeRegex,_fnDeleteIndex:_fnDeleteIndex,_fnReOrderIndex:_fnReOrderIndex,_fnColumnOrdering:_fnColumnOrdering,_fnLog:_fnLog,_fnClearTable:_fnClearTable,_fnSaveState:_fnSaveState,_fnLoadState:_fnLoadState,_fnCreateCookie:_fnCreateCookie,_fnReadCookie:_fnReadCookie,_fnDetectHeader:_fnDetectHeader,_fnGetUniqueThs:_fnGetUniqueThs,_fnScrollBarWidth:_fnScrollBarWidth,_fnApplyToChildren:_fnApplyToChildren,_fnMap:_fnMap,_fnGetRowData:_fnGetRowData,_fnGetCellData:_fnGetCellData,_fnSetCellData:_fnSetCellData,_fnGetObjectDataFn:_fnGetObjectDataFn,_fnSetObjectDataFn:_fnSetObjectDataFn,_fnApplyColumnDefs:_fnApplyColumnDefs,_fnBindAction:_fnBindAction,_fnExtend:_fnExtend,_fnCallbackReg:_fnCallbackReg,_fnCallbackFire:_fnCallbackFire,_fnJsonString:_fnJsonString,_fnRender:_fnRender,_fnNodeToColumnIndex:_fnNodeToColumnIndex,_fnInfoMacros:_fnInfoMacros,_fnBrowserDetect:_fnBrowserDetect,_fnGetColumns:_fnGetColumns};$.extend(DataTable.ext.oApi,this.oApi);for(var sFunc in DataTable.ext.oApi){if(sFunc){this[sFunc]=_fnExternApiFunc(sFunc)}}var _that=this;this.each(function(){var i=0,iLen,j,jLen,k,kLen;var sId=this.getAttribute("id");var bInitHandedOff=false;var bUsePassedData=false;if(this.nodeName.toLowerCase()!="table"){_fnLog(null,0,"Attempted to initialise DataTables on a node which is not a table: "+this.nodeName);return}for(i=0,iLen=DataTable.settings.length;i<iLen;i++){if(DataTable.settings[i].nTable==this){if(oInit===undefined||oInit.bRetrieve){return DataTable.settings[i].oInstance}else{if(oInit.bDestroy){DataTable.settings[i].oInstance.fnDestroy();break}else{_fnLog(DataTable.settings[i],0,"Cannot reinitialise DataTable.\n\nTo retrieve the DataTables object for this table, pass no arguments or see the docs for bRetrieve and bDestroy");return}}}if(DataTable.settings[i].sTableId==this.id){DataTable.settings.splice(i,1);break}}if(sId===null||sId===""){sId="DataTables_Table_"+(DataTable.ext._oExternConfig.iNextUnique++);this.id=sId}var oSettings=$.extend(true,{},DataTable.models.oSettings,{nTable:this,oApi:_that.oApi,oInit:oInit,sDestroyWidth:$(this).width(),sInstance:sId,sTableId:sId});DataTable.settings.push(oSettings);oSettings.oInstance=(_that.length===1)?_that:$(this).dataTable();if(!oInit){oInit={}}if(oInit.oLanguage){_fnLanguageCompat(oInit.oLanguage)}oInit=_fnExtend($.extend(true,{},DataTable.defaults),oInit);_fnMap(oSettings.oFeatures,oInit,"bPaginate");_fnMap(oSettings.oFeatures,oInit,"bLengthChange");_fnMap(oSettings.oFeatures,oInit,"bFilter");_fnMap(oSettings.oFeatures,oInit,"bSort");_fnMap(oSettings.oFeatures,oInit,"bInfo");_fnMap(oSettings.oFeatures,oInit,"bProcessing");_fnMap(oSettings.oFeatures,oInit,"bAutoWidth");_fnMap(oSettings.oFeatures,oInit,"bSortClasses");_fnMap(oSettings.oFeatures,oInit,"bServerSide");_fnMap(oSettings.oFeatures,oInit,"bDeferRender");_fnMap(oSettings.oScroll,oInit,"sScrollX","sX");_fnMap(oSettings.oScroll,oInit,"sScrollXInner","sXInner");_fnMap(oSettings.oScroll,oInit,"sScrollY","sY");_fnMap(oSettings.oScroll,oInit,"bScrollCollapse","bCollapse");_fnMap(oSettings.oScroll,oInit,"bScrollInfinite","bInfinite");_fnMap(oSettings.oScroll,oInit,"iScrollLoadGap","iLoadGap");_fnMap(oSettings.oScroll,oInit,"bScrollAutoCss","bAutoCss");_fnMap(oSettings,oInit,"asStripeClasses");_fnMap(oSettings,oInit,"asStripClasses","asStripeClasses");_fnMap(oSettings,oInit,"fnServerData");_fnMap(oSettings,oInit,"fnFormatNumber");_fnMap(oSettings,oInit,"sServerMethod");_fnMap(oSettings,oInit,"aaSorting");_fnMap(oSettings,oInit,"aaSortingFixed");_fnMap(oSettings,oInit,"aLengthMenu");_fnMap(oSettings,oInit,"sPaginationType");_fnMap(oSettings,oInit,"sAjaxSource");_fnMap(oSettings,oInit,"sAjaxDataProp");_fnMap(oSettings,oInit,"iCookieDuration");_fnMap(oSettings,oInit,"sCookiePrefix");_fnMap(oSettings,oInit,"sDom");_fnMap(oSettings,oInit,"bSortCellsTop");_fnMap(oSettings,oInit,"iTabIndex");_fnMap(oSettings,oInit,"oSearch","oPreviousSearch");_fnMap(oSettings,oInit,"aoSearchCols","aoPreSearchCols");_fnMap(oSettings,oInit,"iDisplayLength","_iDisplayLength");_fnMap(oSettings,oInit,"bJQueryUI","bJUI");_fnMap(oSettings,oInit,"fnCookieCallback");_fnMap(oSettings,oInit,"fnStateLoad");_fnMap(oSettings,oInit,"fnStateSave");_fnMap(oSettings.oLanguage,oInit,"fnInfoCallback");_fnCallbackReg(oSettings,"aoDrawCallback",oInit.fnDrawCallback,"user");_fnCallbackReg(oSettings,"aoServerParams",oInit.fnServerParams,"user");_fnCallbackReg(oSettings,"aoStateSaveParams",oInit.fnStateSaveParams,"user");_fnCallbackReg(oSettings,"aoStateLoadParams",oInit.fnStateLoadParams,"user");_fnCallbackReg(oSettings,"aoStateLoaded",oInit.fnStateLoaded,"user");_fnCallbackReg(oSettings,"aoRowCallback",oInit.fnRowCallback,"user");_fnCallbackReg(oSettings,"aoRowCreatedCallback",oInit.fnCreatedRow,"user");_fnCallbackReg(oSettings,"aoHeaderCallback",oInit.fnHeaderCallback,"user");_fnCallbackReg(oSettings,"aoFooterCallback",oInit.fnFooterCallback,"user");_fnCallbackReg(oSettings,"aoInitComplete",oInit.fnInitComplete,"user");_fnCallbackReg(oSettings,"aoPreDrawCallback",oInit.fnPreDrawCallback,"user");if(oSettings.oFeatures.bServerSide&&oSettings.oFeatures.bSort&&oSettings.oFeatures.bSortClasses){_fnCallbackReg(oSettings,"aoDrawCallback",_fnSortingClasses,"server_side_sort_classes")}else{if(oSettings.oFeatures.bDeferRender){_fnCallbackReg(oSettings,"aoDrawCallback",_fnSortingClasses,"defer_sort_classes")}}if(oInit.bJQueryUI){$.extend(oSettings.oClasses,DataTable.ext.oJUIClasses);if(oInit.sDom===DataTable.defaults.sDom&&DataTable.defaults.sDom==="lfrtip"){oSettings.sDom='<"H"lfr>t<"F"ip>'}}else{$.extend(oSettings.oClasses,DataTable.ext.oStdClasses)}$(this).addClass(oSettings.oClasses.sTable);if(oSettings.oScroll.sX!==""||oSettings.oScroll.sY!==""){oSettings.oScroll.iBarWidth=_fnScrollBarWidth()}if(oSettings.iInitDisplayStart===undefined){oSettings.iInitDisplayStart=oInit.iDisplayStart;oSettings._iDisplayStart=oInit.iDisplayStart}if(oInit.bStateSave){oSettings.oFeatures.bStateSave=true;_fnLoadState(oSettings,oInit);_fnCallbackReg(oSettings,"aoDrawCallback",_fnSaveState,"state_save")}if(oInit.iDeferLoading!==null){oSettings.bDeferLoading=true;var tmp=$.isArray(oInit.iDeferLoading);oSettings._iRecordsDisplay=tmp?oInit.iDeferLoading[0]:oInit.iDeferLoading;oSettings._iRecordsTotal=tmp?oInit.iDeferLoading[1]:oInit.iDeferLoading}if(oInit.aaData!==null){bUsePassedData=true}if(oInit.oLanguage.sUrl!==""){oSettings.oLanguage.sUrl=oInit.oLanguage.sUrl;$.getJSON(oSettings.oLanguage.sUrl,null,function(json){_fnLanguageCompat(json);$.extend(true,oSettings.oLanguage,oInit.oLanguage,json);_fnInitialise(oSettings)});bInitHandedOff=true}else{$.extend(true,oSettings.oLanguage,oInit.oLanguage)}if(oInit.asStripeClasses===null){oSettings.asStripeClasses=[oSettings.oClasses.sStripeOdd,oSettings.oClasses.sStripeEven]}iLen=oSettings.asStripeClasses.length;oSettings.asDestroyStripes=[];if(iLen){var bStripeRemove=false;var anRows=$(this).children("tbody").children("tr:lt("+iLen+")");for(i=0;i<iLen;i++){if(anRows.hasClass(oSettings.asStripeClasses[i])){bStripeRemove=true;oSettings.asDestroyStripes.push(oSettings.asStripeClasses[i])}}if(bStripeRemove){anRows.removeClass(oSettings.asStripeClasses.join(" "))}}var anThs=[];var aoColumnsInit;var nThead=this.getElementsByTagName("thead");if(nThead.length!==0){_fnDetectHeader(oSettings.aoHeader,nThead[0]);anThs=_fnGetUniqueThs(oSettings)}if(oInit.aoColumns===null){aoColumnsInit=[];for(i=0,iLen=anThs.length;i<iLen;i++){aoColumnsInit.push(null)}}else{aoColumnsInit=oInit.aoColumns}for(i=0,iLen=aoColumnsInit.length;i<iLen;i++){if(oInit.saved_aoColumns!==undefined&&oInit.saved_aoColumns.length==iLen){if(aoColumnsInit[i]===null){aoColumnsInit[i]={}}aoColumnsInit[i].bVisible=oInit.saved_aoColumns[i].bVisible}_fnAddColumn(oSettings,anThs?anThs[i]:null)}_fnApplyColumnDefs(oSettings,oInit.aoColumnDefs,aoColumnsInit,function(iCol,oDef){_fnColumnOptions(oSettings,iCol,oDef)});for(i=0,iLen=oSettings.aaSorting.length;i<iLen;i++){if(oSettings.aaSorting[i][0]>=oSettings.aoColumns.length){oSettings.aaSorting[i][0]=0}var oColumn=oSettings.aoColumns[oSettings.aaSorting[i][0]];if(oSettings.aaSorting[i][2]===undefined){oSettings.aaSorting[i][2]=0}if(oInit.aaSorting===undefined&&oSettings.saved_aaSorting===undefined){oSettings.aaSorting[i][1]=oColumn.asSorting[0]}for(j=0,jLen=oColumn.asSorting.length;j<jLen;j++){if(oSettings.aaSorting[i][1]==oColumn.asSorting[j]){oSettings.aaSorting[i][2]=j;break}}}_fnSortingClasses(oSettings);_fnBrowserDetect(oSettings);var captions=$(this).children("caption").each(function(){this._captionSide=$(this).css("caption-side")});var thead=$(this).children("thead");if(thead.length===0){thead=[document.createElement("thead")];this.appendChild(thead[0])}oSettings.nTHead=thead[0];var tbody=$(this).children("tbody");if(tbody.length===0){tbody=[document.createElement("tbody")];this.appendChild(tbody[0])}oSettings.nTBody=tbody[0];oSettings.nTBody.setAttribute("role","alert");oSettings.nTBody.setAttribute("aria-live","polite");oSettings.nTBody.setAttribute("aria-relevant","all");var tfoot=$(this).children("tfoot");if(tfoot.length===0&&captions.length>0&&(oSettings.oScroll.sX!==""||oSettings.oScroll.sY!=="")){tfoot=[document.createElement("tfoot")];this.appendChild(tfoot[0])}if(tfoot.length>0){oSettings.nTFoot=tfoot[0];_fnDetectHeader(oSettings.aoFooter,oSettings.nTFoot)}if(bUsePassedData){for(i=0;i<oInit.aaData.length;i++){_fnAddData(oSettings,oInit.aaData[i])}}else{_fnGatherData(oSettings)}oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();oSettings.bInitialised=true;if(bInitHandedOff===false){_fnInitialise(oSettings)}});_that=null;return this};DataTable.fnVersionCheck=function(sVersion){var fnZPad=function(Zpad,count){while(Zpad.length<count){Zpad+="0"}return Zpad};var aThis=DataTable.ext.sVersion.split(".");var aThat=sVersion.split(".");var sThis="",sThat="";for(var i=0,iLen=aThat.length;i<iLen;i++){sThis+=fnZPad(aThis[i],3);sThat+=fnZPad(aThat[i],3)}return parseInt(sThis,10)>=parseInt(sThat,10)};DataTable.fnIsDataTable=function(nTable){var o=DataTable.settings;for(var i=0;i<o.length;i++){if(o[i].nTable===nTable||o[i].nScrollHead===nTable||o[i].nScrollFoot===nTable){return true}}return false};DataTable.fnTables=function(bVisible){var out=[];jQuery.each(DataTable.settings,function(i,o){if(!bVisible||(bVisible===true&&$(o.nTable).is(":visible"))){out.push(o.nTable)}});return out};DataTable.version="1.9.4";DataTable.settings=[];DataTable.models={};DataTable.models.ext={afnFiltering:[],afnSortData:[],aoFeatures:[],aTypes:[],fnVersionCheck:DataTable.fnVersionCheck,iApiIndex:0,ofnSearch:{},oApi:{},oStdClasses:{},oJUIClasses:{},oPagination:{},oSort:{},sVersion:DataTable.version,sErrMode:"alert",_oExternConfig:{iNextUnique:0}};DataTable.models.oSearch={bCaseInsensitive:true,sSearch:"",bRegex:false,bSmart:true};DataTable.models.oRow={nTr:null,_aData:[],_aSortData:[],_anHidden:[],_sRowStripe:""};DataTable.models.oColumn={aDataSort:null,asSorting:null,bSearchable:null,bSortable:null,bUseRendered:null,bVisible:null,_bAutoType:true,fnCreatedCell:null,fnGetData:null,fnRender:null,fnSetData:null,mData:null,mRender:null,nTh:null,nTf:null,sClass:null,sContentPadding:null,sDefaultContent:null,sName:null,sSortDataType:"std",sSortingClass:null,sSortingClassJUI:null,sTitle:null,sType:null,sWidth:null,sWidthOrig:null};DataTable.defaults={aaData:null,aaSorting:[[0,"asc"]],aaSortingFixed:null,aLengthMenu:[10,25,50,100],aoColumns:null,aoColumnDefs:null,aoSearchCols:[],asStripeClasses:null,bAutoWidth:true,bDeferRender:false,bDestroy:false,bFilter:true,bInfo:true,bJQueryUI:false,bLengthChange:true,bPaginate:true,bProcessing:false,bRetrieve:false,bScrollAutoCss:true,bScrollCollapse:false,bScrollInfinite:false,bServerSide:false,bSort:true,bSortCellsTop:false,bSortClasses:true,bStateSave:false,fnCookieCallback:null,fnCreatedRow:null,fnDrawCallback:null,fnFooterCallback:null,fnFormatNumber:function(iIn){if(iIn<1000){return iIn}var s=(iIn+""),a=s.split(""),out="",iLen=s.length;for(var i=0;i<iLen;i++){if(i%3===0&&i!==0){out=this.oLanguage.sInfoThousands+out}out=a[iLen-i-1]+out}return out},fnHeaderCallback:null,fnInfoCallback:null,fnInitComplete:null,fnPreDrawCallback:null,fnRowCallback:null,fnServerData:function(sUrl,aoData,fnCallback,oSettings){oSettings.jqXHR=$.ajax({url:sUrl,data:aoData,success:function(json){if(json.sError){oSettings.oApi._fnLog(oSettings,0,json.sError)}$(oSettings.oInstance).trigger("xhr",[oSettings,json]);fnCallback(json)},dataType:"json",cache:false,type:oSettings.sServerMethod,error:function(xhr,error,thrown){if(error=="parsererror"){oSettings.oApi._fnLog(oSettings,0,"DataTables warning: JSON data from server could not be parsed. This is caused by a JSON formatting error.")}}})},fnServerParams:null,fnStateLoad:function(oSettings){var sData=this.oApi._fnReadCookie(oSettings.sCookiePrefix+oSettings.sInstance);var oData;try{oData=(typeof $.parseJSON==="function")?$.parseJSON(sData):eval("("+sData+")")}catch(e){oData=null}return oData},fnStateLoadParams:null,fnStateLoaded:null,fnStateSave:function(oSettings,oData){this.oApi._fnCreateCookie(oSettings.sCookiePrefix+oSettings.sInstance,this.oApi._fnJsonString(oData),oSettings.iCookieDuration,oSettings.sCookiePrefix,oSettings.fnCookieCallback)},fnStateSaveParams:null,iCookieDuration:7200,iDeferLoading:null,iDisplayLength:10,iDisplayStart:0,iScrollLoadGap:100,iTabIndex:0,oLanguage:{oAria:{sSortAscending:": activate to sort column ascending",sSortDescending:": activate to sort column descending"},oPaginate:{sFirst:"First",sLast:"Last",sNext:"Next",sPrevious:"Previous"},sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sInfoThousands:",",sLengthMenu:"Show _MENU_ entries",sLoadingRecords:"Loading...",sProcessing:"Processing...",sSearch:"Search:",sUrl:"",sZeroRecords:"No matching records found"},oSearch:$.extend({},DataTable.models.oSearch),sAjaxDataProp:"aaData",sAjaxSource:null,sCookiePrefix:"SpryMedia_DataTables_",sDom:"lfrtip",sPaginationType:"two_button",sScrollX:"",sScrollXInner:"",sScrollY:"",sServerMethod:"GET"};DataTable.defaults.columns={aDataSort:null,asSorting:["asc","desc"],bSearchable:true,bSortable:true,bUseRendered:true,bVisible:true,fnCreatedCell:null,fnRender:null,iDataSort:-1,mData:null,mRender:null,sCellType:"td",sClass:"",sContentPadding:"",sDefaultContent:null,sName:"",sSortDataType:"std",sTitle:null,sType:null,sWidth:null};DataTable.models.oSettings={oFeatures:{bAutoWidth:null,bDeferRender:null,bFilter:null,bInfo:null,bLengthChange:null,bPaginate:null,bProcessing:null,bServerSide:null,bSort:null,bSortClasses:null,bStateSave:null},oScroll:{bAutoCss:null,bCollapse:null,bInfinite:null,iBarWidth:0,iLoadGap:null,sX:null,sXInner:null,sY:null},oLanguage:{fnInfoCallback:null},oBrowser:{bScrollOversize:false},aanFeatures:[],aoData:[],aiDisplay:[],aiDisplayMaster:[],aoColumns:[],aoHeader:[],aoFooter:[],asDataSearch:[],oPreviousSearch:{},aoPreSearchCols:[],aaSorting:null,aaSortingFixed:null,asStripeClasses:null,asDestroyStripes:[],sDestroyWidth:0,aoRowCallback:[],aoHeaderCallback:[],aoFooterCallback:[],aoDrawCallback:[],aoRowCreatedCallback:[],aoPreDrawCallback:[],aoInitComplete:[],aoStateSaveParams:[],aoStateLoadParams:[],aoStateLoaded:[],sTableId:"",nTable:null,nTHead:null,nTFoot:null,nTBody:null,nTableWrapper:null,bDeferLoading:false,bInitialised:false,aoOpenRows:[],sDom:null,sPaginationType:"two_button",iCookieDuration:0,sCookiePrefix:"",fnCookieCallback:null,aoStateSave:[],aoStateLoad:[],oLoadedState:null,sAjaxSource:null,sAjaxDataProp:null,bAjaxDataGet:true,jqXHR:null,fnServerData:null,aoServerParams:[],sServerMethod:null,fnFormatNumber:null,aLengthMenu:null,iDraw:0,bDrawing:false,iDrawError:-1,_iDisplayLength:10,_iDisplayStart:0,_iDisplayEnd:10,_iRecordsTotal:0,_iRecordsDisplay:0,bJUI:null,oClasses:{},bFiltered:false,bSorted:false,bSortCellsTop:null,oInit:null,aoDestroyCallback:[],fnRecordsTotal:function(){if(this.oFeatures.bServerSide){return parseInt(this._iRecordsTotal,10)}else{return this.aiDisplayMaster.length}},fnRecordsDisplay:function(){if(this.oFeatures.bServerSide){return parseInt(this._iRecordsDisplay,10)}else{return this.aiDisplay.length}},fnDisplayEnd:function(){if(this.oFeatures.bServerSide){if(this.oFeatures.bPaginate===false||this._iDisplayLength==-1){return this._iDisplayStart+this.aiDisplay.length}else{return Math.min(this._iDisplayStart+this._iDisplayLength,this._iRecordsDisplay)}}else{return this._iDisplayEnd}},oInstance:null,sInstance:null,iTabIndex:0,nScrollHead:null,nScrollFoot:null};DataTable.ext=$.extend(true,{},DataTable.models.ext);$.extend(DataTable.ext.oStdClasses,{sTable:"dataTable",sPagePrevEnabled:"paginate_enabled_previous",sPagePrevDisabled:"paginate_disabled_previous",sPageNextEnabled:"paginate_enabled_next",sPageNextDisabled:"paginate_disabled_next",sPageJUINext:"",sPageJUIPrev:"",sPageButton:"paginate_button",sPageButtonActive:"paginate_active",sPageButtonStaticDisabled:"paginate_button paginate_button_disabled",sPageFirst:"first",sPagePrevious:"previous",sPageNext:"next",sPageLast:"last",sStripeOdd:"odd",sStripeEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",sSortJUIDescAllowed:"",sSortJUIWrapper:"",sSortIcon:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",sFooterTH:"",sJUIHeader:"",sJUIFooter:""});$.extend(DataTable.ext.oJUIClasses,DataTable.ext.oStdClasses,{sPagePrevEnabled:"fg-button ui-button ui-state-default ui-corner-left",sPagePrevDisabled:"fg-button ui-button ui-state-default ui-corner-left ui-state-disabled",sPageNextEnabled:"fg-button ui-button ui-state-default ui-corner-right",sPageNextDisabled:"fg-button ui-button ui-state-default ui-corner-right ui-state-disabled",sPageJUINext:"ui-icon ui-icon-circle-arrow-e",sPageJUIPrev:"ui-icon ui-icon-circle-arrow-w",sPageButton:"fg-button ui-button ui-state-default",sPageButtonActive:"fg-button ui-button ui-state-default ui-state-disabled",sPageButtonStaticDisabled:"fg-button ui-button ui-state-default ui-state-disabled",sPageFirst:"first ui-corner-tl ui-corner-bl",sPageLast:"last ui-corner-tr ui-corner-br",sPaging:"dataTables_paginate fg-buttonset ui-buttonset fg-buttonset-multi ui-buttonset-multi paging_",sSortAsc:"ui-state-default",sSortDesc:"ui-state-default",sSortable:"ui-state-default",sSortableAsc:"ui-state-default",sSortableDesc:"ui-state-default",sSortableNone:"ui-state-default",sSortJUIAsc:"css_right ui-icon ui-icon-triangle-1-n",sSortJUIDesc:"css_right ui-icon ui-icon-triangle-1-s",sSortJUI:"css_right ui-icon ui-icon-carat-2-n-s",sSortJUIAscAllowed:"css_right ui-icon ui-icon-carat-1-n",sSortJUIDescAllowed:"css_right ui-icon ui-icon-carat-1-s",sSortJUIWrapper:"DataTables_sort_wrapper",sSortIcon:"DataTables_sort_icon",sScrollHead:"dataTables_scrollHead ui-state-default",sScrollFoot:"dataTables_scrollFoot ui-state-default",sFooterTH:"ui-state-default",sJUIHeader:"fg-toolbar ui-toolbar ui-widget-header ui-corner-tl ui-corner-tr ui-helper-clearfix",sJUIFooter:"fg-toolbar ui-toolbar ui-widget-header ui-corner-bl ui-corner-br ui-helper-clearfix"});$.extend(DataTable.ext.oPagination,{two_button:{fnInit:function(oSettings,nPaging,fnCallbackDraw){var oLang=oSettings.oLanguage.oPaginate;var oClasses=oSettings.oClasses;var fnClickHandler=function(e){if(oSettings.oApi._fnPageChange(oSettings,e.data.action)){fnCallbackDraw(oSettings)}};var sAppend=(!oSettings.bJUI)?'<a class="'+oSettings.oClasses.sPagePrevDisabled+'" tabindex="'+oSettings.iTabIndex+'" role="button">'+oLang.sPrevious+'</a><a class="'+oSettings.oClasses.sPageNextDisabled+'" tabindex="'+oSettings.iTabIndex+'" role="button">'+oLang.sNext+"</a>":'<a class="'+oSettings.oClasses.sPagePrevDisabled+'" tabindex="'+oSettings.iTabIndex+'" role="button"><span class="'+oSettings.oClasses.sPageJUIPrev+'"></span></a><a class="'+oSettings.oClasses.sPageNextDisabled+'" tabindex="'+oSettings.iTabIndex+'" role="button"><span class="'+oSettings.oClasses.sPageJUINext+'"></span></a>';$(nPaging).append(sAppend);var els=$("a",nPaging);var nPrevious=els[0],nNext=els[1];oSettings.oApi._fnBindAction(nPrevious,{action:"previous"},fnClickHandler);oSettings.oApi._fnBindAction(nNext,{action:"next"},fnClickHandler);if(!oSettings.aanFeatures.p){nPaging.id=oSettings.sTableId+"_paginate";nPrevious.id=oSettings.sTableId+"_previous";nNext.id=oSettings.sTableId+"_next";nPrevious.setAttribute("aria-controls",oSettings.sTableId);nNext.setAttribute("aria-controls",oSettings.sTableId)}},fnUpdate:function(oSettings,fnCallbackDraw){if(!oSettings.aanFeatures.p){return}var oClasses=oSettings.oClasses;var an=oSettings.aanFeatures.p;var nNode;for(var i=0,iLen=an.length;i<iLen;i++){nNode=an[i].firstChild;if(nNode){nNode.className=(oSettings._iDisplayStart===0)?oClasses.sPagePrevDisabled:oClasses.sPagePrevEnabled;nNode=nNode.nextSibling;nNode.className=(oSettings.fnDisplayEnd()==oSettings.fnRecordsDisplay())?oClasses.sPageNextDisabled:oClasses.sPageNextEnabled}}}},iFullNumbersShowPages:5,full_numbers:{fnInit:function(oSettings,nPaging,fnCallbackDraw){var oLang=oSettings.oLanguage.oPaginate;var oClasses=oSettings.oClasses;var fnClickHandler=function(e){if(oSettings.oApi._fnPageChange(oSettings,e.data.action)){fnCallbackDraw(oSettings)}};$(nPaging).append('<a  tabindex="'+oSettings.iTabIndex+'" class="'+oClasses.sPageButton+" "+oClasses.sPageFirst+'">'+oLang.sFirst+'</a><a  tabindex="'+oSettings.iTabIndex+'" class="'+oClasses.sPageButton+" "+oClasses.sPagePrevious+'">'+oLang.sPrevious+'</a><span></span><a tabindex="'+oSettings.iTabIndex+'" class="'+oClasses.sPageButton+" "+oClasses.sPageNext+'">'+oLang.sNext+'</a><a tabindex="'+oSettings.iTabIndex+'" class="'+oClasses.sPageButton+" "+oClasses.sPageLast+'">'+oLang.sLast+"</a>");var els=$("a",nPaging);var nFirst=els[0],nPrev=els[1],nNext=els[2],nLast=els[3];oSettings.oApi._fnBindAction(nFirst,{action:"first"},fnClickHandler);oSettings.oApi._fnBindAction(nPrev,{action:"previous"},fnClickHandler);oSettings.oApi._fnBindAction(nNext,{action:"next"},fnClickHandler);oSettings.oApi._fnBindAction(nLast,{action:"last"},fnClickHandler);if(!oSettings.aanFeatures.p){nPaging.id=oSettings.sTableId+"_paginate";nFirst.id=oSettings.sTableId+"_first";nPrev.id=oSettings.sTableId+"_previous";nNext.id=oSettings.sTableId+"_next";nLast.id=oSettings.sTableId+"_last"}},fnUpdate:function(oSettings,fnCallbackDraw){if(!oSettings.aanFeatures.p){return}var iPageCount=DataTable.ext.oPagination.iFullNumbersShowPages;var iPageCountHalf=Math.floor(iPageCount/2);var iPages=Math.ceil((oSettings.fnRecordsDisplay())/oSettings._iDisplayLength);var iCurrentPage=Math.ceil(oSettings._iDisplayStart/oSettings._iDisplayLength)+1;var sList="";var iStartButton,iEndButton,i,iLen;var oClasses=oSettings.oClasses;var anButtons,anStatic,nPaginateList,nNode;var an=oSettings.aanFeatures.p;var fnBind=function(j){oSettings.oApi._fnBindAction(this,{page:j+iStartButton-1},function(e){oSettings.oApi._fnPageChange(oSettings,e.data.page);fnCallbackDraw(oSettings);e.preventDefault()})};if(oSettings._iDisplayLength===-1){iStartButton=1;iEndButton=1;iCurrentPage=1}else{if(iPages<iPageCount){iStartButton=1;iEndButton=iPages}else{if(iCurrentPage<=iPageCountHalf){iStartButton=1;iEndButton=iPageCount}else{if(iCurrentPage>=(iPages-iPageCountHalf)){iStartButton=iPages-iPageCount+1;iEndButton=iPages}else{iStartButton=iCurrentPage-Math.ceil(iPageCount/2)+1;iEndButton=iStartButton+iPageCount-1}}}}for(i=iStartButton;i<=iEndButton;i++){sList+=(iCurrentPage!==i)?'<a tabindex="'+oSettings.iTabIndex+'" class="'+oClasses.sPageButton+'">'+oSettings.fnFormatNumber(i)+"</a>":'<a tabindex="'+oSettings.iTabIndex+'" class="'+oClasses.sPageButtonActive+'">'+oSettings.fnFormatNumber(i)+"</a>"}for(i=0,iLen=an.length;i<iLen;i++){nNode=an[i];if(!nNode.hasChildNodes()){continue}$("span:eq(0)",nNode).html(sList).children("a").each(fnBind);anButtons=nNode.getElementsByTagName("a");anStatic=[anButtons[0],anButtons[1],anButtons[anButtons.length-2],anButtons[anButtons.length-1]];$(anStatic).removeClass(oClasses.sPageButton+" "+oClasses.sPageButtonActive+" "+oClasses.sPageButtonStaticDisabled);$([anStatic[0],anStatic[1]]).addClass((iCurrentPage==1)?oClasses.sPageButtonStaticDisabled:oClasses.sPageButton);$([anStatic[2],anStatic[3]]).addClass((iPages===0||iCurrentPage===iPages||oSettings._iDisplayLength===-1)?oClasses.sPageButtonStaticDisabled:oClasses.sPageButton)}}}});$.extend(DataTable.ext.oSort,{"string-pre":function(a){if(typeof a!="string"){a=(a!==null&&a.toString)?a.toString():""}return a.toLowerCase()},"string-asc":function(x,y){return((x<y)?-1:((x>y)?1:0))},"string-desc":function(x,y){return((x<y)?1:((x>y)?-1:0))},"html-pre":function(a){return a.replace(/<.*?>/g,"").toLowerCase()},"html-asc":function(x,y){return((x<y)?-1:((x>y)?1:0))},"html-desc":function(x,y){return((x<y)?1:((x>y)?-1:0))},"date-pre":function(a){var x=Date.parse(a);if(isNaN(x)||x===""){x=Date.parse("01/01/1970 00:00:00")}return x},"date-asc":function(x,y){return x-y},"date-desc":function(x,y){return y-x},"numeric-pre":function(a){return(a=="-"||a==="")?0:a*1},"numeric-asc":function(x,y){return x-y},"numeric-desc":function(x,y){return y-x}});$.extend(DataTable.ext.aTypes,[function(sData){if(typeof sData==="number"){return"numeric"}else{if(typeof sData!=="string"){return null}}var sValidFirstChars="0123456789-";var sValidChars="0123456789.";var Char;var bDecimal=false;Char=sData.charAt(0);if(sValidFirstChars.indexOf(Char)==-1){return null}for(var i=1;i<sData.length;i++){Char=sData.charAt(i);if(sValidChars.indexOf(Char)==-1){return null}if(Char=="."){if(bDecimal){return null}bDecimal=true}}return"numeric"},function(sData){var iParse=Date.parse(sData);if((iParse!==null&&!isNaN(iParse))||(typeof sData==="string"&&sData.length===0)){return"date"}return null},function(sData){if(typeof sData==="string"&&sData.indexOf("<")!=-1&&sData.indexOf(">")!=-1){return"html"}return null}]);$.fn.DataTable=DataTable;$.fn.dataTable=DataTable;$.fn.dataTableSettings=DataTable.settings;$.fn.dataTableExt=DataTable.ext}))}(window,document));
/*!
 * jQuery Form Plugin
 * version: 3.50.0-2014.02.05
 * Requires jQuery v1.5 or later
 * Copyright (c) 2013 M. Alsup
 * Examples and documentation at: http://malsup.com/jquery/form/
 * Project repository: https://github.com/malsup/form
 * Dual licensed under the MIT and GPL licenses.
 * https://github.com/malsup/form#copyright-and-license
 */
(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{a((typeof(jQuery)!="undefined")?jQuery:window.Zepto)}}(function(f){var c={};c.fileapi=f("<input type='file'/>").get(0).files!==undefined;c.formdata=window.FormData!==undefined;var e=!!f.fn.prop;f.fn.attr2=function(){if(!e){return this.attr.apply(this,arguments)}var g=this.prop.apply(this,arguments);if((g&&g.jquery)||typeof g==="string"){return g}return this.attr.apply(this,arguments)};f.fn.ajaxSubmit=function(j){if(!this.length){d("ajaxSubmit: skipping submit process - no element selected");return this}var i,C,m,o=this;if(typeof j=="function"){j={success:j}}else{if(j===undefined){j={}}}i=j.type||this.attr2("method");C=j.url||this.attr2("action");m=(typeof C==="string")?f.trim(C):"";m=m||window.location.href||"";if(m){m=(m.match(/^([^#]+)/)||[])[1]}j=f.extend(true,{url:m,success:f.ajaxSettings.success,type:i||f.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},j);var u={};this.trigger("form-pre-serialize",[this,j,u]);if(u.veto){d("ajaxSubmit: submit vetoed via form-pre-serialize trigger");return this}if(j.beforeSerialize&&j.beforeSerialize(this,j)===false){d("ajaxSubmit: submit aborted via beforeSerialize callback");return this}var n=j.traditional;if(n===undefined){n=f.ajaxSettings.traditional}var s=[];var E,F=this.formToArray(j.semantic,s);if(j.data){j.extraData=j.data;E=f.param(j.data,n)}if(j.beforeSubmit&&j.beforeSubmit(F,this,j)===false){d("ajaxSubmit: submit aborted via beforeSubmit callback");return this}this.trigger("form-submit-validate",[F,this,j,u]);if(u.veto){d("ajaxSubmit: submit vetoed via form-submit-validate trigger");return this}var y=f.param(F,n);if(E){y=(y?(y+"&"+E):E)}if(j.type.toUpperCase()=="GET"){j.url+=(j.url.indexOf("?")>=0?"&":"?")+y;j.data=null}else{j.data=y}var H=[];if(j.resetForm){H.push(function(){o.resetForm()})}if(j.clearForm){H.push(function(){o.clearForm(j.includeHidden)})}if(!j.dataType&&j.target){var l=j.success||function(){};H.push(function(q){var k=j.replaceTarget?"replaceWith":"html";f(j.target)[k](q).each(l,arguments)})}else{if(j.success){H.push(j.success)}}j.success=function(K,q,L){var J=j.context||this;for(var I=0,k=H.length;I<k;I++){H[I].apply(J,[K,q,L||o,o])}};if(j.error){var z=j.error;j.error=function(J,k,q){var I=j.context||this;z.apply(I,[J,k,q,o])}}if(j.complete){var h=j.complete;j.complete=function(I,k){var q=j.context||this;h.apply(q,[I,k,o])}}var D=f("input[type=file]:enabled",this).filter(function(){return f(this).val()!==""});var p=D.length>0;var B="multipart/form-data";var x=(o.attr("enctype")==B||o.attr("encoding")==B);var w=c.fileapi&&c.formdata;d("fileAPI :"+w);var r=(p||x)&&!w;var v;if(j.iframe!==false&&(j.iframe||r)){if(j.closeKeepAlive){f.get(j.closeKeepAlive,function(){v=G(F)})}else{v=G(F)}}else{if((p||x)&&w){v=t(F)}else{v=f.ajax(j)}}o.removeData("jqxhr").data("jqxhr",v);for(var A=0;A<s.length;A++){s[A]=null}this.trigger("form-submit-notify",[this,j]);return this;function g(K){var L=f.param(K,j.traditional).split("&");var q=L.length;var k=[];var J,I;for(J=0;J<q;J++){L[J]=L[J].replace(/\+/g," ");I=L[J].split("=");k.push([decodeURIComponent(I[0]),decodeURIComponent(I[1])])}return k}function t(q){var k=new FormData();for(var I=0;I<q.length;I++){k.append(q[I].name,q[I].value)}if(j.extraData){var L=g(j.extraData);for(I=0;I<L.length;I++){if(L[I]){k.append(L[I][0],L[I][1])}}}j.data=null;var K=f.extend(true,{},f.ajaxSettings,j,{contentType:false,processData:false,cache:false,type:i||"POST"});if(j.uploadProgress){K.xhr=function(){var M=f.ajaxSettings.xhr();if(M.upload){M.upload.addEventListener("progress",function(Q){var P=0;var N=Q.loaded||Q.position;var O=Q.total;if(Q.lengthComputable){P=Math.ceil(N/O*100)}j.uploadProgress(Q,N,O,P)},false)}return M}}K.data=null;var J=K.beforeSend;K.beforeSend=function(N,M){if(j.formData){M.data=j.formData}else{M.data=k}if(J){J.call(this,N,M)}};return f.ajax(K)}function G(af){var L=o[0],K,ab,V,ad,Y,N,Q,O,P,Z,ac,T;var ai=f.Deferred();ai.abort=function(aj){O.abort(aj)};if(af){for(ab=0;ab<s.length;ab++){K=f(s[ab]);if(e){K.prop("disabled",false)}else{K.removeAttr("disabled")}}}V=f.extend(true,{},f.ajaxSettings,j);V.context=V.context||V;Y="jqFormIO"+(new Date().getTime());if(V.iframeTarget){N=f(V.iframeTarget);Z=N.attr2("name");if(!Z){N.attr2("name",Y)}else{Y=Z}}else{N=f('<iframe name="'+Y+'" src="'+V.iframeSrc+'" />');N.css({position:"absolute",top:"-1000px",left:"-1000px"})}Q=N[0];O={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(aj){var ak=(aj==="timeout"?"timeout":"aborted");d("aborting upload... "+ak);this.aborted=1;try{if(Q.contentWindow.document.execCommand){Q.contentWindow.document.execCommand("Stop")}}catch(al){}N.attr("src",V.iframeSrc);O.error=ak;if(V.error){V.error.call(V.context,O,ak,aj)}if(ad){f.event.trigger("ajaxError",[O,V,ak])}if(V.complete){V.complete.call(V.context,O,ak)}}};ad=V.global;if(ad&&0===f.active++){f.event.trigger("ajaxStart")}if(ad){f.event.trigger("ajaxSend",[O,V])}if(V.beforeSend&&V.beforeSend.call(V.context,O,V)===false){if(V.global){f.active--}ai.reject();return ai}if(O.aborted){ai.reject();return ai}P=L.clk;if(P){Z=P.name;if(Z&&!P.disabled){V.extraData=V.extraData||{};V.extraData[Z]=P.value;if(P.type=="image"){V.extraData[Z+".x"]=L.clk_x;V.extraData[Z+".y"]=L.clk_y}}}var U=1;var R=2;function S(al){var ak=null;try{if(al.contentWindow){ak=al.contentWindow.document}}catch(aj){d("cannot get iframe.contentWindow document: "+aj)}if(ak){return ak}try{ak=al.contentDocument?al.contentDocument:al.document}catch(aj){d("cannot get iframe.contentDocument: "+aj);ak=al.document}return ak}var J=f("meta[name=csrf-token]").attr("content");var I=f("meta[name=csrf-param]").attr("content");if(I&&J){V.extraData=V.extraData||{};V.extraData[I]=J}function aa(){var ar=o.attr2("target"),an=o.attr2("action"),al="multipart/form-data",ao=o.attr("enctype")||o.attr("encoding")||al;L.setAttribute("target",Y);if(!i||/post/i.test(i)){L.setAttribute("method","POST")}if(an!=V.url){L.setAttribute("action",V.url)}if(!V.skipEncodingOverride&&(!i||/post/i.test(i))){o.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"})}if(V.timeout){T=setTimeout(function(){ac=true;X(U)},V.timeout)}function ap(){try{var at=S(Q).readyState;d("state = "+at);if(at&&at.toLowerCase()=="uninitialized"){setTimeout(ap,50)}}catch(au){d("Server abort: ",au," (",au.name,")");X(R);if(T){clearTimeout(T)}T=undefined}}var aq=[];try{if(V.extraData){for(var ak in V.extraData){if(V.extraData.hasOwnProperty(ak)){if(f.isPlainObject(V.extraData[ak])&&V.extraData[ak].hasOwnProperty("name")&&V.extraData[ak].hasOwnProperty("value")){aq.push(f('<input type="hidden" name="'+V.extraData[ak].name+'">').val(V.extraData[ak].value).appendTo(L)[0])}else{aq.push(f('<input type="hidden" name="'+ak+'">').val(V.extraData[ak]).appendTo(L)[0])}}}}if(!V.iframeTarget){N.appendTo("body")}if(Q.attachEvent){Q.attachEvent("onload",X)}else{Q.addEventListener("load",X,false)}setTimeout(ap,15);try{L.submit()}catch(am){var aj=document.createElement("form").submit;aj.apply(L)}}finally{L.setAttribute("action",an);L.setAttribute("enctype",ao);if(ar){L.setAttribute("target",ar)}else{o.removeAttr("target")}f(aq).remove()}}if(V.forceSync){aa()}else{setTimeout(aa,10)}var ag,ah,ae=50,M;function X(ap){if(O.aborted||M){return}ah=S(Q);if(!ah){d("cannot access response document");ap=R}if(ap===U&&O){O.abort("timeout");ai.reject(O,"timeout");return}else{if(ap==R&&O){O.abort("server abort");ai.reject(O,"error","server abort");return}}if(!ah||ah.location.href==V.iframeSrc){if(!ac){return}}if(Q.detachEvent){Q.detachEvent("onload",X)}else{Q.removeEventListener("load",X,false)}var an="success",ar;try{if(ac){throw"timeout"}var am=V.dataType=="xml"||ah.XMLDocument||f.isXMLDoc(ah);d("isXml="+am);if(!am&&window.opera&&(ah.body===null||!ah.body.innerHTML)){if(--ae){d("requeing onLoad callback, DOM not available");setTimeout(X,250);return}}var at=ah.body?ah.body:ah.documentElement;O.responseText=at?at.innerHTML:null;O.responseXML=ah.XMLDocument?ah.XMLDocument:ah;if(am){V.dataType="xml"}O.getResponseHeader=function(aw){var av={"content-type":V.dataType};return av[aw.toLowerCase()]};if(at){O.status=Number(at.getAttribute("status"))||O.status;O.statusText=at.getAttribute("statusText")||O.statusText}var aj=(V.dataType||"").toLowerCase();var aq=/(json|script|text)/.test(aj);if(aq||V.textarea){var ao=ah.getElementsByTagName("textarea")[0];if(ao){O.responseText=ao.value;O.status=Number(ao.getAttribute("status"))||O.status;O.statusText=ao.getAttribute("statusText")||O.statusText}else{if(aq){var ak=ah.getElementsByTagName("pre")[0];var au=ah.getElementsByTagName("body")[0];if(ak){O.responseText=ak.textContent?ak.textContent:ak.innerText}else{if(au){O.responseText=au.textContent?au.textContent:au.innerText}}}}}else{if(aj=="xml"&&!O.responseXML&&O.responseText){O.responseXML=W(O.responseText)}}try{ag=k(O,aj,V)}catch(al){an="parsererror";O.error=ar=(al||an)}}catch(al){d("error caught: ",al);an="error";O.error=ar=(al||an)}if(O.aborted){d("upload aborted");an=null}if(O.status){an=(O.status>=200&&O.status<300||O.status===304)?"success":"error"}if(an==="success"){if(V.success){V.success.call(V.context,ag,"success",O)}ai.resolve(O.responseText,"success",O);if(ad){f.event.trigger("ajaxSuccess",[O,V])}}else{if(an){if(ar===undefined){ar=O.statusText}if(V.error){V.error.call(V.context,O,an,ar)}ai.reject(O,"error",ar);if(ad){f.event.trigger("ajaxError",[O,V,ar])}}}if(ad){f.event.trigger("ajaxComplete",[O,V])}if(ad&&!--f.active){f.event.trigger("ajaxStop")}if(V.complete){V.complete.call(V.context,O,an)}M=true;if(V.timeout){clearTimeout(T)}setTimeout(function(){if(!V.iframeTarget){N.remove()}else{N.attr("src",V.iframeSrc)}O.responseXML=null},100)}var W=f.parseXML||function(aj,ak){if(window.ActiveXObject){ak=new ActiveXObject("Microsoft.XMLDOM");ak.async="false";ak.loadXML(aj)}else{ak=(new DOMParser()).parseFromString(aj,"text/xml")}return(ak&&ak.documentElement&&ak.documentElement.nodeName!="parsererror")?ak:null};var q=f.parseJSON||function(aj){return window["eval"]("("+aj+")")};var k=function(ao,am,al){var ak=ao.getResponseHeader("content-type")||"",aj=am==="xml"||!am&&ak.indexOf("xml")>=0,an=aj?ao.responseXML:ao.responseText;if(aj&&an.documentElement.nodeName==="parsererror"){if(f.error){f.error("parsererror")}}if(al&&al.dataFilter){an=al.dataFilter(an,am)}if(typeof an==="string"){if(am==="json"||!am&&ak.indexOf("json")>=0){an=q(an)}else{if(am==="script"||!am&&ak.indexOf("javascript")>=0){f.globalEval(an)}}}return an};return ai}};f.fn.ajaxForm=function(g){g=g||{};g.delegation=g.delegation&&f.isFunction(f.fn.on);if(!g.delegation&&this.length===0){var h={s:this.selector,c:this.context};if(!f.isReady&&h.s){d("DOM not ready, queuing ajaxForm");f(function(){f(h.s,h.c).ajaxForm(g)});return this}d("terminating; zero elements found by selector"+(f.isReady?"":" (DOM not ready)"));return this}if(g.delegation){f(document).off("submit.form-plugin",this.selector,b).off("click.form-plugin",this.selector,a).on("submit.form-plugin",this.selector,g,b).on("click.form-plugin",this.selector,g,a);return this}return this.ajaxFormUnbind().bind("submit.form-plugin",g,b).bind("click.form-plugin",g,a)};function b(h){var g=h.data;if(!h.isDefaultPrevented()){h.preventDefault();f(h.target).ajaxSubmit(g)}}function a(k){var j=k.target;var h=f(j);if(!(h.is("[type=submit],[type=image]"))){var g=h.closest("[type=submit]");if(g.length===0){return}j=g[0]}var i=this;i.clk=j;if(j.type=="image"){if(k.offsetX!==undefined){i.clk_x=k.offsetX;i.clk_y=k.offsetY}else{if(typeof f.fn.offset=="function"){var l=h.offset();i.clk_x=k.pageX-l.left;i.clk_y=k.pageY-l.top}else{i.clk_x=k.pageX-j.offsetLeft;i.clk_y=k.pageY-j.offsetTop}}}setTimeout(function(){i.clk=i.clk_x=i.clk_y=null},100)}f.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};f.fn.formToArray=function(x,g){var w=[];if(this.length===0){return w}var l=this[0];var z=this.attr("id");var q=x?l.getElementsByTagName("*"):l.elements;var A;if(q&&!/MSIE [678]/.test(navigator.userAgent)){q=f(q).get()}if(z){A=f(":input[form="+z+"]").get();if(A.length){q=(q||[]).concat(A)}}if(!q||!q.length){return w}var r,p,o,y,m,t,k;for(r=0,t=q.length;r<t;r++){m=q[r];o=m.name;if(!o||m.disabled){continue}if(x&&l.clk&&m.type=="image"){if(l.clk==m){w.push({name:o,value:f(m).val(),type:m.type});w.push({name:o+".x",value:l.clk_x},{name:o+".y",value:l.clk_y})}continue}y=f.fieldValue(m,true);if(y&&y.constructor==Array){if(g){g.push(m)}for(p=0,k=y.length;p<k;p++){w.push({name:o,value:y[p]})}}else{if(c.fileapi&&m.type=="file"){if(g){g.push(m)}var h=m.files;if(h.length){for(p=0;p<h.length;p++){w.push({name:o,value:h[p],type:m.type})}}else{w.push({name:o,value:"",type:m.type})}}else{if(y!==null&&typeof y!="undefined"){if(g){g.push(m)}w.push({name:o,value:y,type:m.type,required:m.required})}}}}if(!x&&l.clk){var s=f(l.clk),u=s[0];o=u.name;if(o&&!u.disabled&&u.type=="image"){w.push({name:o,value:s.val()});w.push({name:o+".x",value:l.clk_x},{name:o+".y",value:l.clk_y})}}return w};f.fn.formSerialize=function(g){return f.param(this.formToArray(g))};f.fn.fieldSerialize=function(h){var g=[];this.each(function(){var m=this.name;if(!m){return}var k=f.fieldValue(this,h);if(k&&k.constructor==Array){for(var l=0,j=k.length;l<j;l++){g.push({name:m,value:k[l]})}}else{if(k!==null&&typeof k!="undefined"){g.push({name:this.name,value:k})}}});return f.param(g)};f.fn.fieldValue=function(m){for(var l=[],j=0,g=this.length;j<g;j++){var k=this[j];var h=f.fieldValue(k,m);if(h===null||typeof h=="undefined"||(h.constructor==Array&&!h.length)){continue}if(h.constructor==Array){f.merge(l,h)}else{l.push(h)}}return l};f.fieldValue=function(g,o){var j=g.name,u=g.type,w=g.tagName.toLowerCase();if(o===undefined){o=true}if(o&&(!j||g.disabled||u=="reset"||u=="button"||(u=="checkbox"||u=="radio")&&!g.checked||(u=="submit"||u=="image")&&g.form&&g.form.clk!=g||w=="select"&&g.selectedIndex==-1)){return null}if(w=="select"){var p=g.selectedIndex;if(p<0){return null}var r=[],h=g.options;var l=(u=="select-one");var q=(l?p+1:h.length);for(var k=(l?p:0);k<q;k++){var m=h[k];if(m.selected){var s=m.value;if(!s){s=(m.attributes&&m.attributes.value&&!(m.attributes.value.specified))?m.text:m.value}if(l){return s}r.push(s)}}return r}return f(g).val()};f.fn.clearForm=function(g){return this.each(function(){f("input,select,textarea",this).clearFields(g)})};f.fn.clearFields=f.fn.clearInputs=function(g){var h=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var j=this.type,i=this.tagName.toLowerCase();if(h.test(j)||i=="textarea"){this.value=""}else{if(j=="checkbox"||j=="radio"){this.checked=false}else{if(i=="select"){this.selectedIndex=-1}else{if(j=="file"){if(/MSIE/.test(navigator.userAgent)){f(this).replaceWith(f(this).clone(true))}else{f(this).val("")}}else{if(g){if((g===true&&/hidden/.test(j))||(typeof g=="string"&&f(this).is(g))){this.value=""}}}}}}})};f.fn.resetForm=function(){return this.each(function(){if(typeof this.reset=="function"||(typeof this.reset=="object"&&!this.reset.nodeType)){this.reset()}})};f.fn.enable=function(g){if(g===undefined){g=true}return this.each(function(){this.disabled=!g})};f.fn.selected=function(g){if(g===undefined){g=true}return this.each(function(){var h=this.type;if(h=="checkbox"||h=="radio"){this.checked=g}else{if(this.tagName.toLowerCase()=="option"){var i=f(this).parent("select");if(g&&i[0]&&i[0].type=="select-one"){i.find("option").selected(false)}this.selected=g}}})};f.fn.ajaxSubmit.debug=false;function d(){if(!f.fn.ajaxSubmit.debug){return}var g="[jquery.form] "+Array.prototype.join.call(arguments,"");if(window.console&&window.console.log){window.console.log(g)}else{if(window.opera&&window.opera.postError){window.opera.postError(g)}}}}));(function(a){a.idleTimer=function(j,c){var b;if(typeof j==="object"){b=j;j=null}else{if(typeof j==="number"){b={timeout:j};j=null}}c=c||document;b=a.extend({idle:false,timeout:30000,events:"keydown wheel DOMMouseScroll mousewheel mousedown touchstart touchmove MSPointerDown MSPointerMove"},b);var e=a(c),f=e.data("idleTimerObj")||{},g=function(p){var o=a.data(c,"idleTimerObj")||{};o.idle=!o.idle;o.olddate=+new Date();var n=a.Event((o.idle?"idle":"active")+".idleTimer");a(c).trigger(n,[c,a.extend({},o),p])},i=function(p){var o=a.data(c,"idleTimerObj")||{};if(o.remaining!=null){return}if(p.type==="mousemove"){if(p.pageX===o.pageX&&p.pageY===o.pageY){return}if(typeof p.pageX==="undefined"&&typeof p.pageY==="undefined"){return}var n=(+new Date())-o.olddate;if(n<200){return}}clearTimeout(o.tId);if(o.idle){g(p)}o.lastActive=+new Date();o.pageX=p.pageX;o.pageY=p.pageY;o.tId=setTimeout(g,o.timeout)},h=function(){var n=a.data(c,"idleTimerObj")||{};n.idle=n.idleBackup;n.olddate=+new Date();n.lastActive=n.olddate;n.remaining=null;clearTimeout(n.tId);if(!n.idle){n.tId=setTimeout(g,n.timeout)}},m=function(){var n=a.data(c,"idleTimerObj")||{};if(n.remaining!=null){return}n.remaining=n.timeout-((+new Date())-n.olddate);clearTimeout(n.tId)},d=function(){var n=a.data(c,"idleTimerObj")||{};if(n.remaining==null){return}if(!n.idle){n.tId=setTimeout(g,n.remaining)}n.remaining=null},k=function(){var n=a.data(c,"idleTimerObj")||{};clearTimeout(n.tId);e.removeData("idleTimerObj");e.off("._idleTimer")},l=function(){var o=a.data(c,"idleTimerObj")||{};if(o.idle){return 0}if(o.remaining!=null){return o.remaining}var n=o.timeout-((+new Date())-o.lastActive);if(n<0){n=0}return n};if(j===null&&typeof f.idle!=="undefined"){h();return e}else{if(j===null){}else{if(j!==null&&typeof f.idle==="undefined"){return false}else{if(j==="destroy"){k();return e}else{if(j==="pause"){m();return e}else{if(j==="resume"){d();return e}else{if(j==="reset"){h();return e}else{if(j==="getRemainingTime"){return l()}else{if(j==="getElapsedTime"){return(+new Date())-f.olddate}else{if(j==="getLastActiveTime"){return f.lastActive}else{if(j==="isIdle"){return f.idle}}}}}}}}}}}e.on(a.trim((b.events+" ").split(" ").join("._idleTimer ")),function(n){i(n)});f=a.extend({},{olddate:+new Date(),lastActive:+new Date(),idle:b.idle,idleBackup:b.idle,timeout:b.timeout,remaining:null,tId:null,pageX:null,pageY:null});if(!f.idle){f.tId=setTimeout(g,f.timeout)}a.data(c,"idleTimerObj",f);return e};a.fn.idleTimer=function(b){if(this[0]){return a.idleTimer(b,this[0])}return this}})(jQuery);
/*! Backbone.js 1.0.0 */
(function(){var u=this;var B=u.Backbone;var g=[];var D=g.push;var n=g.slice;var t=g.splice;var z;if(typeof exports!=="undefined"){z=exports}else{z=u.Backbone={}}z.VERSION="1.0.0";var L=u._;if(!L&&(typeof require!=="undefined")){L=require("underscore")}z.$=u.jQuery||u.Zepto||u.ender||u.$;z.noConflict=function(){u.Backbone=B;return this};z.emulateHTTP=false;z.emulateJSON=false;var J=z.Events={on:function(M,P,O){if(!x(this,"on",M,[P,O])||!P){return this}this._events||(this._events={});var N=this._events[M]||(this._events[M]=[]);N.push({callback:P,context:O,ctx:O||this});return this},once:function(N,Q,O){if(!x(this,"once",N,[Q,O])||!Q){return this}var M=this;var P=L.once(function(){M.off(N,P);Q.apply(this,arguments)});P._callback=Q;return this.on(N,P,O)},off:function(M,V,N){var T,U,W,S,R,O,Q,P;if(!this._events||!x(this,"off",M,[V,N])){return this}if(!M&&!V&&!N){this._events={};return this}S=M?[M]:L.keys(this._events);for(R=0,O=S.length;R<O;R++){M=S[R];if(W=this._events[M]){this._events[M]=T=[];if(V||N){for(Q=0,P=W.length;Q<P;Q++){U=W[Q];if((V&&V!==U.callback&&V!==U.callback._callback)||(N&&N!==U.context)){T.push(U)}}}if(!T.length){delete this._events[M]}}}return this},trigger:function(O){if(!this._events){return this}var N=n.call(arguments,1);if(!x(this,"trigger",O,N)){return this}var P=this._events[O];var M=this._events.all;if(P){b(P,N)}if(M){b(M,arguments)}return this},stopListening:function(P,M,R){var N=this._listeners;if(!N){return this}var O=!M&&!R;if(typeof M==="object"){R=this}if(P){(N={})[P._listenerId]=P}for(var Q in N){N[Q].off(M,R,this);if(O){delete this._listeners[Q]}}return this}};var w=/\s+/;var x=function(T,R,N,Q){if(!N){return true}if(typeof N==="object"){for(var P in N){T[R].apply(T,[P,N[P]].concat(Q))}return false}if(w.test(N)){var S=N.split(w);for(var O=0,M=S.length;O<M;O++){T[R].apply(T,[S[O]].concat(Q))}return false}return true};var b=function(R,P){var S,Q=-1,O=R.length,N=P[0],M=P[1],T=P[2];switch(P.length){case 0:while(++Q<O){(S=R[Q]).callback.call(S.ctx)}return;case 1:while(++Q<O){(S=R[Q]).callback.call(S.ctx,N)}return;case 2:while(++Q<O){(S=R[Q]).callback.call(S.ctx,N,M)}return;case 3:while(++Q<O){(S=R[Q]).callback.call(S.ctx,N,M,T)}return;default:while(++Q<O){(S=R[Q]).callback.apply(S.ctx,P)}}};var C={listenTo:"on",listenToOnce:"once"};L.each(C,function(M,N){J[N]=function(Q,O,S){var P=this._listeners||(this._listeners={});var R=Q._listenerId||(Q._listenerId=L.uniqueId("l"));P[R]=Q;if(typeof O==="object"){S=this}Q[M](O,S,this);return this}});J.bind=J.on;J.unbind=J.off;L.extend(z,J);var E=z.Model=function(M,O){var P;var N=M||{};O||(O={});this.cid=L.uniqueId("c");this.attributes={};L.extend(this,L.pick(O,F));if(O.parse){N=this.parse(N,O)||{}}if(P=L.result(this,"defaults")){N=L.defaults({},N,P)}this.set(N,O);this.changed={};this.initialize.apply(this,arguments)};var F=["url","urlRoot","collection"];L.extend(E.prototype,J,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(M){return L.clone(this.attributes)},sync:function(){return z.sync.apply(this,arguments)},get:function(M){return this.attributes[M]},escape:function(M){return L.escape(this.get(M))},has:function(M){return this.get(M)!=null},set:function(U,M,Y){var S,V,W,T,R,X,O,Q;if(U==null){return this}if(typeof U==="object"){V=U;Y=M}else{(V={})[U]=M}Y||(Y={});if(!this._validate(V,Y)){return false}W=Y.unset;R=Y.silent;T=[];X=this._changing;this._changing=true;if(!X){this._previousAttributes=L.clone(this.attributes);this.changed={}}Q=this.attributes,O=this._previousAttributes;if(this.idAttribute in V){this.id=V[this.idAttribute]}for(S in V){M=V[S];if(!L.isEqual(Q[S],M)){T.push(S)}if(!L.isEqual(O[S],M)){this.changed[S]=M}else{delete this.changed[S]}W?delete Q[S]:Q[S]=M}if(!R){if(T.length){this._pending=true}for(var P=0,N=T.length;P<N;P++){this.trigger("change:"+T[P],this,Q[T[P]],Y)}}if(X){return this}if(!R){while(this._pending){this._pending=false;this.trigger("change",this,Y)}}this._pending=false;this._changing=false;return this},unset:function(M,N){return this.set(M,void 0,L.extend({},N,{unset:true}))},clear:function(N){var M={};for(var O in this.attributes){M[O]=void 0}return this.set(M,L.extend({},N,{unset:true}))},hasChanged:function(M){if(M==null){return !L.isEmpty(this.changed)}return L.has(this.changed,M)},changedAttributes:function(O){if(!O){return this.hasChanged()?L.clone(this.changed):false}var Q,P=false;var N=this._changing?this._previousAttributes:this.attributes;for(var M in O){if(L.isEqual(N[M],(Q=O[M]))){continue}(P||(P={}))[M]=Q}return P},previous:function(M){if(M==null||!this._previousAttributes){return null}return this._previousAttributes[M]},previousAttributes:function(){return L.clone(this._previousAttributes)},fetch:function(N){N=N?L.clone(N):{};if(N.parse===void 0){N.parse=true}var M=this;var O=N.success;N.success=function(P){if(!M.set(M.parse(P,N),N)){return false}if(O){O(M,P,N)}M.trigger("sync",M,P,N)};H(this,N);return this.sync("read",this,N)},save:function(Q,N,U){var R,M,T,O=this.attributes;if(Q==null||typeof Q==="object"){R=Q;U=N}else{(R={})[Q]=N}if(R&&(!U||!U.wait)&&!this.set(R,U)){return false}U=L.extend({validate:true},U);if(!this._validate(R,U)){return false}if(R&&U.wait){this.attributes=L.extend({},O,R)}if(U.parse===void 0){U.parse=true}var P=this;var S=U.success;U.success=function(W){P.attributes=O;var V=P.parse(W,U);if(U.wait){V=L.extend(R||{},V)}if(L.isObject(V)&&!P.set(V,U)){return false}if(S){S(P,W,U)}P.trigger("sync",P,W,U)};H(this,U);M=this.isNew()?"create":(U.patch?"patch":"update");if(M==="patch"){U.attrs=R}T=this.sync(M,this,U);if(R&&U.wait){this.attributes=O}return T},destroy:function(N){N=N?L.clone(N):{};var M=this;var Q=N.success;var O=function(){M.trigger("destroy",M,M.collection,N)};N.success=function(R){if(N.wait||M.isNew()){O()}if(Q){Q(M,R,N)}if(!M.isNew()){M.trigger("sync",M,R,N)}};if(this.isNew()){N.success();return false}H(this,N);var P=this.sync("delete",this,N);if(!N.wait){O()}return P},url:function(){var M=L.result(this,"urlRoot")||L.result(this.collection,"url")||r();if(this.isNew()){return M}return M+(M.charAt(M.length-1)==="/"?"":"/")+encodeURIComponent(this.id)},parse:function(N,M){return N},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return this.id==null},isValid:function(M){return this._validate({},L.extend(M||{},{validate:true}))},_validate:function(O,N){if(!N.validate||!this.validate){return true}O=L.extend({},this.attributes,O);var M=this.validationError=this.validate(O,N)||null;if(!M){return true}this.trigger("invalid",this,M,L.extend(N||{},{validationError:M}));return false}});var a=["keys","values","pairs","invert","pick","omit"];L.each(a,function(M){E.prototype[M]=function(){var N=n.call(arguments);N.unshift(this.attributes);return L[M].apply(L,N)}});var c=z.Collection=function(N,M){M||(M={});if(M.url){this.url=M.url}if(M.model){this.model=M.model}if(M.comparator!==void 0){this.comparator=M.comparator}this._reset();this.initialize.apply(this,arguments);if(N){this.reset(N,L.extend({silent:true},M))}};var o={add:true,remove:true,merge:true};var K={add:true,merge:false,remove:false};L.extend(c.prototype,J,{model:E,initialize:function(){},toJSON:function(M){return this.map(function(N){return N.toJSON(M)})},sync:function(){return z.sync.apply(this,arguments)},add:function(N,M){return this.set(N,L.defaults(M||{},K))},remove:function(R,P){R=L.isArray(R)?R.slice():[R];P||(P={});var Q,M,O,N;for(Q=0,M=R.length;Q<M;Q++){N=this.get(R[Q]);if(!N){continue}delete this._byId[N.id];delete this._byId[N.cid];O=this.indexOf(N);this.models.splice(O,1);this.length--;if(!P.silent){P.index=O;N.trigger("remove",N,this,P)}this._removeReference(N)}return this},set:function(N,Z){Z=L.defaults(Z||{},o);if(Z.parse){N=this.parse(N,Z)}if(!L.isArray(N)){N=N?[N]:[]}var U,Q,W,X,O,V;var P=Z.at;var T=this.comparator&&(P==null)&&Z.sort!==false;var R=L.isString(this.comparator)?this.comparator:null;var Y=[],M=[],S={};for(U=0,Q=N.length;U<Q;U++){if(!(W=this._prepareModel(N[U],Z))){continue}if(O=this.get(W)){if(Z.remove){S[O.cid]=true}if(Z.merge){O.set(W.attributes,Z);if(T&&!V&&O.hasChanged(R)){V=true}}}else{if(Z.add){Y.push(W);W.on("all",this._onModelEvent,this);this._byId[W.cid]=W;if(W.id!=null){this._byId[W.id]=W}}}}if(Z.remove){for(U=0,Q=this.length;U<Q;++U){if(!S[(W=this.models[U]).cid]){M.push(W)}}if(M.length){this.remove(M,Z)}}if(Y.length){if(T){V=true}this.length+=Y.length;if(P!=null){t.apply(this.models,[P,0].concat(Y))}else{D.apply(this.models,Y)}}if(V){this.sort({silent:true})}if(Z.silent){return this}for(U=0,Q=Y.length;U<Q;U++){(W=Y[U]).trigger("add",W,this,Z)}if(V){this.trigger("sort",this,Z)}return this},reset:function(P,N){N||(N={});for(var O=0,M=this.models.length;O<M;O++){this._removeReference(this.models[O])}N.previousModels=this.models;this._reset();this.add(P,L.extend({silent:true},N));if(!N.silent){this.trigger("reset",this,N)}return this},push:function(N,M){N=this._prepareModel(N,M);this.add(N,L.extend({at:this.length},M));return N},pop:function(N){var M=this.at(this.length-1);this.remove(M,N);return M},unshift:function(N,M){N=this._prepareModel(N,M);this.add(N,L.extend({at:0},M));return N},shift:function(N){var M=this.at(0);this.remove(M,N);return M},slice:function(N,M){return this.models.slice(N,M)},get:function(M){if(M==null){return void 0}return this._byId[M.id!=null?M.id:M.cid||M]},at:function(M){return this.models[M]},where:function(M,N){if(L.isEmpty(M)){return N?void 0:[]}return this[N?"find":"filter"](function(O){for(var P in M){if(M[P]!==O.get(P)){return false}}return true})},findWhere:function(M){return this.where(M,true)},sort:function(M){if(!this.comparator){throw new Error("Cannot sort a set without a comparator")}M||(M={});if(L.isString(this.comparator)||this.comparator.length===1){this.models=this.sortBy(this.comparator,this)}else{this.models.sort(L.bind(this.comparator,this))}if(!M.silent){this.trigger("sort",this,M)}return this},sortedIndex:function(M,P,N){P||(P=this.comparator);var O=L.isFunction(P)?P:function(Q){return Q.get(P)};return L.sortedIndex(this.models,M,O,N)},pluck:function(M){return L.invoke(this.models,"get",M)},fetch:function(M){M=M?L.clone(M):{};if(M.parse===void 0){M.parse=true}var O=M.success;var N=this;M.success=function(P){var Q=M.reset?"reset":"set";N[Q](P,M);if(O){O(N,P,M)}N.trigger("sync",N,P,M)};H(this,M);return this.sync("read",this,M)},create:function(N,M){M=M?L.clone(M):{};if(!(N=this._prepareModel(N,M))){return false}if(!M.wait){this.add(N,M)}var P=this;var O=M.success;M.success=function(Q){if(M.wait){P.add(N,M)}if(O){O(N,Q,M)}};N.save(null,M);return N},parse:function(N,M){return N},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0;this.models=[];this._byId={}},_prepareModel:function(O,N){if(O instanceof E){if(!O.collection){O.collection=this}return O}N||(N={});N.collection=this;var M=new this.model(O,N);if(!M._validate(O,N)){this.trigger("invalid",this,O,N);return false}return M},_removeReference:function(M){if(this===M.collection){delete M.collection}M.off("all",this._onModelEvent,this)},_onModelEvent:function(O,N,P,M){if((O==="add"||O==="remove")&&P!==this){return}if(O==="destroy"){this.remove(N,M)}if(N&&O==="change:"+N.idAttribute){delete this._byId[N.previous(N.idAttribute)];if(N.id!=null){this._byId[N.id]=N}}this.trigger.apply(this,arguments)}});var y=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];L.each(y,function(M){c.prototype[M]=function(){var N=n.call(arguments);N.unshift(this.models);return L[M].apply(L,N)}});var k=["groupBy","countBy","sortBy"];L.each(k,function(M){c.prototype[M]=function(P,N){var O=L.isFunction(P)?P:function(Q){return Q.get(P)};return L[M](this.models,O,N)}});var G=z.View=function(M){this.cid=L.uniqueId("view");this._configure(M||{});this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()};var v=/^(\S+)\s*(.*)$/;var e=["model","collection","el","id","attributes","className","tagName","events"];L.extend(G.prototype,J,{tagName:"div",$:function(M){return this.$el.find(M)},initialize:function(){},render:function(){return this},remove:function(){this.$el.remove();this.stopListening();return this},setElement:function(M,N){if(this.$el){this.undelegateEvents()}this.$el=M instanceof z.$?M:z.$(M);this.el=this.$el[0];if(N!==false){this.delegateEvents()}return this},delegateEvents:function(Q){if(!(Q||(Q=L.result(this,"events")))){return this}this.undelegateEvents();for(var P in Q){var R=Q[P];if(!L.isFunction(R)){R=this[Q[P]]}if(!R){continue}var O=P.match(v);var N=O[1],M=O[2];R=L.bind(R,this);N+=".delegateEvents"+this.cid;if(M===""){this.$el.on(N,R)}else{this.$el.on(N,M,R)}}return this},undelegateEvents:function(){this.$el.off(".delegateEvents"+this.cid);return this},_configure:function(M){if(this.options){M=L.extend({},L.result(this,"options"),M)}L.extend(this,L.pick(M,e));this.options=M},_ensureElement:function(){if(!this.el){var M=L.extend({},L.result(this,"attributes"));if(this.id){M.id=L.result(this,"id")}if(this.className){M["class"]=L.result(this,"className")}var N=z.$("<"+L.result(this,"tagName")+">").attr(M);this.setElement(N,false)}else{this.setElement(L.result(this,"el"),false)}}});z.sync=function(S,N,M){var P=j[S];L.defaults(M||(M={}),{emulateHTTP:z.emulateHTTP,emulateJSON:z.emulateJSON});var R={type:P,dataType:"json"};if(!M.url){R.url=L.result(N,"url")||r()}if(M.data==null&&N&&(S==="create"||S==="update"||S==="patch")){R.contentType="application/json";R.data=JSON.stringify(M.attrs||N.toJSON(M))}if(M.emulateJSON){R.contentType="application/x-www-form-urlencoded";R.data=R.data?{model:R.data}:{}}if(M.emulateHTTP&&(P==="PUT"||P==="DELETE"||P==="PATCH")){R.type="POST";if(M.emulateJSON){R.data._method=P}var O=M.beforeSend;M.beforeSend=function(T){T.setRequestHeader("X-HTTP-Method-Override",P);if(O){return O.apply(this,arguments)}}}if(R.type!=="GET"&&!M.emulateJSON){R.processData=false}if(R.type==="PATCH"&&window.ActiveXObject&&!(window.external&&window.external.msActiveXFilteringEnabled)){R.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")}}var Q=M.xhr=z.ajax(L.extend(R,M));N.trigger("request",N,Q,M);return Q};var j={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};z.ajax=function(){return z.$.ajax.apply(z.$,arguments)};var p=z.Router=function(M){M||(M={});if(M.routes){this.routes=M.routes}this._bindRoutes();this.initialize.apply(this,arguments)};var q=/\((.*?)\)/g;var s=/(\(\?)?:\w+/g;var d=/\*\w+/g;var h=/[\-{}\[\]+?.,\\\^$|#\s]/g;L.extend(p.prototype,J,{initialize:function(){},route:function(N,O,P){if(!L.isRegExp(N)){N=this._routeToRegExp(N)}if(L.isFunction(O)){P=O;O=""}if(!P){P=this[O]}var M=this;z.history.route(N,function(R){var Q=M._extractParameters(N,R);P&&P.apply(M,Q);M.trigger.apply(M,["route:"+O].concat(Q));M.trigger("route",O,Q);z.history.trigger("route",M,O,Q)});return this},navigate:function(N,M){z.history.navigate(N,M);return this},_bindRoutes:function(){if(!this.routes){return}this.routes=L.result(this,"routes");var N,M=L.keys(this.routes);while((N=M.pop())!=null){this.route(N,this.routes[N])}},_routeToRegExp:function(M){M=M.replace(h,"\\$&").replace(q,"(?:$1)?").replace(s,function(O,N){return N?O:"([^/]+)"}).replace(d,"(.*?)");return new RegExp("^"+M+"$")},_extractParameters:function(M,N){var O=M.exec(N).slice(1);return L.map(O,function(P){return P?decodeURIComponent(P):null})}});var i=z.History=function(){this.handlers=[];L.bindAll(this,"checkUrl");if(typeof window!=="undefined"){this.location=window.location;this.history=window.history}};var A=/^[#\/]|\s+$/g;var f=/^\/+|\/+$/g;var I=/msie [\w.]+/;var m=/\/$/;i.started=false;L.extend(i.prototype,J,{interval:50,getHash:function(N){var M=(N||this).location.href.match(/#(.*)$/);return M?M[1]:""},getFragment:function(O,N){if(O==null){if(this._hasPushState||!this._wantsHashChange||N){O=this.location.pathname;var M=this.root.replace(m,"");if(!O.indexOf(M)){O=O.substr(M.length)}}else{O=this.getHash()}}return O.replace(A,"")},start:function(O){if(i.started){throw new Error("Backbone.history has already been started")}i.started=true;this.options=L.extend({},{root:"/"},this.options,O);this.root=this.options.root;this._wantsHashChange=this.options.hashChange!==false;this._wantsPushState=!!this.options.pushState;this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var N=this.getFragment();var M=document.documentMode;var Q=(I.exec(navigator.userAgent.toLowerCase())&&(!M||M<=7));this.root=("/"+this.root+"/").replace(f,"/");if(Q&&this._wantsHashChange){this.iframe=z.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow;this.navigate(N)}if(this._hasPushState){z.$(window).on("popstate",this.checkUrl)}else{if(this._wantsHashChange&&("onhashchange" in window)&&!Q){z.$(window).on("hashchange",this.checkUrl)}else{if(this._wantsHashChange){this._checkUrlInterval=setInterval(this.checkUrl,this.interval)}}}this.fragment=N;var R=this.location;var P=R.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!P){this.fragment=this.getFragment(null,true);this.location.replace(this.root+this.location.search+"#"+this.fragment);return true}else{if(this._wantsPushState&&this._hasPushState&&P&&R.hash){this.fragment=this.getHash().replace(A,"");this.history.replaceState({},document.title,this.root+this.fragment+R.search)}}if(!this.options.silent){return this.loadUrl()}},stop:function(){z.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl);clearInterval(this._checkUrlInterval);i.started=false},route:function(M,N){this.handlers.unshift({route:M,callback:N})},checkUrl:function(N){var M=this.getFragment();if(M===this.fragment&&this.iframe){M=this.getFragment(this.getHash(this.iframe))}if(M===this.fragment){return false}if(this.iframe){this.navigate(M)}this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(O){var N=this.fragment=this.getFragment(O);var M=L.any(this.handlers,function(P){if(P.route.test(N)){P.callback(N);return true}});return M},navigate:function(O,N){if(!i.started){return false}if(!N||N===true){N={trigger:N}}O=this.getFragment(O||"");if(this.fragment===O){return}this.fragment=O;var M=this.root+O;if(this._hasPushState){this.history[N.replace?"replaceState":"pushState"]({},document.title,M)}else{if(this._wantsHashChange){this._updateHash(this.location,O,N.replace);if(this.iframe&&(O!==this.getFragment(this.getHash(this.iframe)))){if(!N.replace){this.iframe.document.open().close()}this._updateHash(this.iframe.location,O,N.replace)}}else{return this.location.assign(M)}}if(N.trigger){this.loadUrl(O)}},_updateHash:function(M,O,P){if(P){var N=M.href.replace(/(javascript:|#).*$/,"");M.replace(N+"#"+O)}else{M.hash="#"+O}}});z.history=new i;var l=function(M,O){var N=this;var Q;if(M&&L.has(M,"constructor")){Q=M.constructor}else{Q=function(){return N.apply(this,arguments)}}L.extend(Q,N,O);var P=function(){this.constructor=Q};P.prototype=N.prototype;Q.prototype=new P;if(M){L.extend(Q.prototype,M)}Q.__super__=N.prototype;return Q};E.extend=c.extend=p.extend=G.extend=i.extend=l;var r=function(){throw new Error('A "url" property or function must be specified')};var H=function(O,N){var M=N.error;N.error=function(P){if(M){M(O,P,N)}O.trigger("error",O,P,N)}}}).call(this);
/*! Backbone.CrossDomainModel 0.1.0 */
(function(a,b){if(typeof define==="function"&&define.amd){define(["underscore","backbone"],function(c,d){return b(c||a._,d||a.Backbone)})}else{b(_,Backbone)}}(this,function(a,e){function b(h,g){var i=null;try{i=g.url}catch(f){}if(!i){try{i=a.result(h,"url")}catch(f){}}return i}function d(g,f){if(g===":"||f===":"){return false}else{if(g===f){return false}}return true}var c={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};e.vanillaSync=e.sync;e.sync=function(f,j,s){var g=false;var l=document.createElement("a");l.href=document.URL;var n=document.createElement("a");n.href=b(j,s);if(n.host!==""&&(l.host!==n.host)){g=true}if(g&&!e.$.support.cors){var m=c[f];a.defaults(s||(s={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});if(!s.emulateHTTP&&(f==="update"||f==="patch"||f==="delete")){throw new Error("Backbone.CrossDomain cannot use PUT, PATCH, DELETE with XDomainRequest (IE) and emulateHTTP=false")}var i={type:m,dataType:"json"};if(!s.url){i.url=a.result(j,"url")||urlError()}if(d(l.protocol,n.protocol)){i.url=i.url.replace(new RegExp(n.protocol),l.protocol)}if(s.data==null&&j&&(f==="create"||f==="update"||f==="patch")){i.data=JSON.stringify(s.attrs||j.toJSON(s))}if(s.emulateJSON){i.data=i.data?{model:i.data}:{}}if(s.emulateHTTP&&(m==="PUT"||m==="DELETE"||m==="PATCH")){i.type="POST";if(s.emulateJSON){i.data._method=m}var o=s.beforeSend;s.beforeSend=function(t){t.setRequestHeader("X-HTTP-Method-Override",m);if(o){return o.apply(this,arguments)}}}if(i.type!=="GET"&&!s.emulateJSON){i.processData=false}if(i.type==="POST"){i.data=e.$.param(e.$.parseJSON(i.data))}var h=s.xhr=new XDomainRequest(),q=s.success,k=s.error;if(e.$.fn.jquery){var r=e.$.Deferred(),p=e.$.Callbacks("once memory");r.promise(h).complete=p.add;h.onload=function(){var t={};if(h.responseText){t=e.$.parseJSON(h.responseText)}if(t){r.resolveWith(this,[q,"success",h]);q(t)}else{r.resolveWith(this,[q,"success",h]);q(t)}};h.onerror=function(){if(k){k(j,h,s);r.resolveWith(this,[h,"error",k])}j.trigger("error",j,h,s)};h.done(h.onload);h.fail(h.onerror)}else{h.onload=function(u){var t={};if(h.responseText){t=e.$.parseJSON(h.responseText)}if(t){q(t)}};h.onerror=function(t){if(k){k(j,t,s)}j.trigger("error",j,t,s)}}h.open(i.type,i.url);h.onprogress=function(){};h.ontimeout=function(){};setTimeout(function(){h.send(i.data)},0);j.trigger("request",j,h,s);return h}else{return e.vanillaSync.apply(this,arguments)}};return e}));
/*! xssValidator */
function xssClean(k){var d={"document.cookie":"","document.write":"",".parentNode":"",".innerHTML":"","window.location":"","-moz-binding":"","<!--":"&lt;!--","-->":"--&gt;","<![CDATA[":"&lt;![CDATA["};var l={"javascript\\s*:":"","expression\\s*(\\(|&\\#40;)":"","vbscript\\s*:":"","Redirect\\s+302":""};var n=[/%0[0-8bcef]/g,/%1[0-9a-f]/g,/[\x00-\x08]/g,/\x0b/g,/\x0c/g,/[\x0e-\x1f]/g];var g=["javascript","expression","vbscript","script","applet","alert","document","write","cookie","window"];k=h(k);k=k.replace(/(&\#?[0-9a-z]{2,})([\x00-\x20])*;?/i,"$1;$2");k=k.replace(/(&\#x?)([0-9A-F]+);?/i,"$1;$2");try{k=decodeURIComponent(k)}catch(j){}k=k.replace(/[a-z]+=([\'\"]).*?\1/gi,function(e,i){return e.replace(i,a(i))});k=k.replace("\t"," ");for(var f in d){k=k.replace(f,d[f])}for(var f in l){k=k.replace(new RegExp(f,"i"),l[f])}for(var f in g){var b=g[f].split("").join("\\s*")+"\\s*";k=k.replace(new RegExp("("+b+")(\\W)","ig"),function(e,i,o){return i.replace(/\s+/g,"")+o})}var c="alert|applet|audio|basefont|base|behavior|bgsound|blink|body|embed|expression|form|frameset|frame|head|html|ilayer|iframe|input|isindex|layer|link|meta|object|plaintext|style|script|textarea|title|video|xml|xss";k=k.replace(new RegExp("<(/*\\s*)("+c+")([^><]*)([><]*)","gi"),function(i,o,e,q,p){return"&lt;"+o+e+q+p.replace(">","&gt;").replace("<","&lt;")});k=k.replace(/(alert|cmd|passthru|eval|exec|expression|system|fopen|fsockopen|file|file_get_contents|readfile|unlink)(\s*)\((.*?)\)/gi,"$1$2&#40;$3&#41;");if(k.match(/<a/i)){k=k.replace(/<a\s+([^>]*?)(>|$)/gi,function(e,i,o){i=m(i.replace("<","").replace(">",""));return e.replace(i,i.replace(/href=.*?(alert\(|alert&\#40;|javascript\:|charset\=|window\.|document\.|\.cookie|<script|<xss|base64\s*,)/gi,""))})}if(k.match(/<img/i)){k=k.replace(/<img\s+([^>]*?)(\s?\/?>|$)/gi,function(e,i,o){i=m(i.replace("<","").replace(">",""));return e.replace(i,i.replace(/src=.*?(alert\(|alert&\#40;|javascript\:|charset\=|window\.|document\.|\.cookie|<script|<xss|base64\s*,)/gi,""))})}if(k.match(/script/i)||k.match(/xss/i)){k=k.replace(/<(\/*)(script|xss)(.*?)\>/gi,"")}function h(o){for(var e in n){o=o.replace(n[e],"")}return o}function a(e){return e.replace(">","&gt;").replace("<","&lt;").replace("\\","\\\\")}function m(i){var e=/\/\*.*?\*\//g;return i.replace(/\s*[a-z-]+\s*=\s*'[^']*'/gi,function(o){return o.replace(e,"")}).replace(/\s*[a-z-]+\s*=\s*"[^"]*"/gi,function(o){return o.replace(e,"")}).replace(/\s*[a-z-]+\s*=\s*[^\s]+/gi,function(o){return o.replace(e,"")})}return k}(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{a(jQuery)}}(function(d){d.timeago=function(h){if(h instanceof Date){return a(h)}else{if(typeof h==="string"){return a(d.timeago.parse(h))}else{if(typeof h==="number"){return a(new Date(h))}else{return a(d.timeago.datetime(h))}}}};var g=d.timeago;d.extend(d.timeago,{settings:{refreshMillis:60000,allowFuture:false,localeTitle:false,cutoff:0,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",wordSeparator:" ",numbers:[]}},inWords:function(n){var o=this.settings.strings;var k=o.prefixAgo;var s=o.suffixAgo;if(this.settings.allowFuture){if(n<0){k=o.prefixFromNow;s=o.suffixFromNow}}var q=Math.abs(n)/1000;var h=q/60;var p=h/60;var r=p/24;var l=r/365;function j(t,v){var u=d.isFunction(t)?t(v,n):t;var w=(o.numbers&&o.numbers[v])||v;return u.replace(/%d/i,w)}var m=q<45&&j(o.seconds,Math.round(q))||q<90&&j(o.minute,1)||h<45&&j(o.minutes,Math.round(h))||h<90&&j(o.hour,1)||p<24&&j(o.hours,Math.round(p))||p<42&&j(o.day,1)||r<30&&j(o.days,Math.round(r))||r<45&&j(o.month,1)||r<365&&j(o.months,Math.round(r/30))||l<1.5&&j(o.year,1)||j(o.years,Math.round(l));var i=o.wordSeparator||"";if(o.wordSeparator===undefined){i=" "}return d.trim([k,m,s].join(i))},parse:function(i){var h=d.trim(i);h=h.replace(/\.\d+/,"");h=h.replace(/-/,"/").replace(/-/,"/");h=h.replace(/T/," ").replace(/Z/," UTC");h=h.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2");h=h.replace(/([\+\-]\d\d)$/," $100");return new Date(h)},datetime:function(i){var h=g.isTime(i)?d(i).attr("datetime"):d(i).attr("title");return g.parse(h)},isTime:function(h){return d(h).get(0).tagName.toLowerCase()==="time"}});var e={init:function(){var i=d.proxy(c,this);i();var h=g.settings;if(h.refreshMillis>0){this._timeagoInterval=setInterval(i,h.refreshMillis)}},update:function(h){var i=g.parse(h);d(this).data("timeago",{datetime:i});if(g.settings.localeTitle){d(this).attr("title",i.toLocaleString())}c.apply(this)},updateFromDOM:function(){d(this).data("timeago",{datetime:g.parse(g.isTime(this)?d(this).attr("datetime"):d(this).attr("title"))});c.apply(this)},dispose:function(){if(this._timeagoInterval){window.clearInterval(this._timeagoInterval);this._timeagoInterval=null}}};d.fn.timeago=function(j,h){var i=j?e[j]:e.init;if(!i){throw new Error("Unknown function name '"+j+"' for timeago")}this.each(function(){i.call(this,h)});return this};function c(){var i=b(this);var h=g.settings;if(!isNaN(i.datetime)){if(h.cutoff==0||f(i.datetime)<h.cutoff){d(this).text(a(i.datetime))}}return this}function b(h){h=d(h);if(!h.data("timeago")){h.data("timeago",{datetime:g.datetime(h)});var i=d.trim(h.text());if(g.settings.localeTitle){h.attr("title",h.data("timeago").datetime.toLocaleString())}else{if(i.length>0&&!(g.isTime(h)&&h.attr("title"))){h.attr("title",i)}}}return h.data("timeago")}function a(h){return g.inWords(f(h))}function f(h){return(new Date().getTime()-h.getTime())}document.createElement("abbr");document.createElement("time")}));
/*! CryptoJS */
var CryptoJS=CryptoJS||(function(e,g){var a={};var b=a.lib={};var j=b.Base=(function(){function n(){}return{extend:function(p){n.prototype=this;var o=new n();if(p){o.mixIn(p)}if(!o.hasOwnProperty("init")){o.init=function(){o.$super.init.apply(this,arguments)}}o.init.prototype=o;o.$super=this;return o},create:function(){var o=this.extend();o.init.apply(o,arguments);return o},init:function(){},mixIn:function(p){for(var o in p){if(p.hasOwnProperty(o)){this[o]=p[o]}}if(p.hasOwnProperty("toString")){this.toString=p.toString}},clone:function(){return this.init.prototype.extend(this)}}}());var l=b.WordArray=j.extend({init:function(o,n){o=this.words=o||[];if(n!=g){this.sigBytes=n}else{this.sigBytes=o.length*4}},toString:function(n){return(n||h).stringify(this)},concat:function(t){var q=this.words;var p=t.words;var n=this.sigBytes;var s=t.sigBytes;this.clamp();if(n%4){for(var r=0;r<s;r++){var o=(p[r>>>2]>>>(24-(r%4)*8))&255;q[(n+r)>>>2]|=o<<(24-((n+r)%4)*8)}}else{if(p.length>65535){for(var r=0;r<s;r+=4){q[(n+r)>>>2]=p[r>>>2]}}else{q.push.apply(q,p)}}this.sigBytes+=s;return this},clamp:function(){var o=this.words;var n=this.sigBytes;o[n>>>2]&=4294967295<<(32-(n%4)*8);o.length=e.ceil(n/4)},clone:function(){var n=j.clone.call(this);n.words=this.words.slice(0);return n},random:function(p){var o=[];for(var n=0;n<p;n+=4){o.push((e.random()*4294967296)|0)}return new l.init(o,p)}});var m=a.enc={};var h=m.Hex={stringify:function(p){var r=p.words;var o=p.sigBytes;var q=[];for(var n=0;n<o;n++){var s=(r[n>>>2]>>>(24-(n%4)*8))&255;q.push((s>>>4).toString(16));q.push((s&15).toString(16))}return q.join("")},parse:function(p){var n=p.length;var q=[];for(var o=0;o<n;o+=2){q[o>>>3]|=parseInt(p.substr(o,2),16)<<(24-(o%8)*4)}return new l.init(q,n/2)}};var d=m.Latin1={stringify:function(q){var r=q.words;var p=q.sigBytes;var n=[];for(var o=0;o<p;o++){var s=(r[o>>>2]>>>(24-(o%4)*8))&255;n.push(String.fromCharCode(s))}return n.join("")},parse:function(p){var n=p.length;var q=[];for(var o=0;o<n;o++){q[o>>>2]|=(p.charCodeAt(o)&255)<<(24-(o%4)*8)}return new l.init(q,n)}};var c=m.Utf8={stringify:function(n){try{return decodeURIComponent(escape(d.stringify(n)))}catch(o){throw new Error("Malformed UTF-8 data")}},parse:function(n){return d.parse(unescape(encodeURIComponent(n)))}};var i=b.BufferedBlockAlgorithm=j.extend({reset:function(){this._data=new l.init();this._nDataBytes=0},_append:function(n){if(typeof n=="string"){n=c.parse(n)}this._data.concat(n);this._nDataBytes+=n.sigBytes},_process:function(w){var q=this._data;var x=q.words;var n=q.sigBytes;var t=this.blockSize;var v=t*4;var u=n/v;if(w){u=e.ceil(u)}else{u=e.max((u|0)-this._minBufferSize,0)}var s=u*t;var r=e.min(s*4,n);if(s){for(var p=0;p<s;p+=t){this._doProcessBlock(x,p)}var o=x.splice(0,s);q.sigBytes-=r}return new l.init(o,r)},clone:function(){var n=j.clone.call(this);n._data=this._data.clone();return n},_minBufferSize:0});var f=b.Hasher=i.extend({cfg:j.extend(),init:function(n){this.cfg=this.cfg.extend(n);this.reset()},reset:function(){i.reset.call(this);this._doReset()},update:function(n){this._append(n);this._process();return this},finalize:function(n){if(n){this._append(n)}var o=this._doFinalize();return o},blockSize:512/32,_createHelper:function(n){return function(p,o){return new n.init(o).finalize(p)}},_createHmacHelper:function(n){return function(p,o){return new k.HMAC.init(n,o).finalize(p)}}});var k=a.algo={};return a}(Math));
/*! CryptoJS Base64 */
(function(){var e=CryptoJS;var a=e.lib;var b=a.WordArray;var d=e.enc;var c=d.Base64={stringify:function(l){var n=l.words;var p=l.sigBytes;var g=this._map;l.clamp();var m=[];for(var k=0;k<p;k+=3){var s=(n[k>>>2]>>>(24-(k%4)*8))&255;var q=(n[(k+1)>>>2]>>>(24-((k+1)%4)*8))&255;var o=(n[(k+2)>>>2]>>>(24-((k+2)%4)*8))&255;var r=(s<<16)|(q<<8)|o;for(var h=0;(h<4)&&(k+h*0.75<p);h++){m.push(g.charAt((r>>>(6*(3-h)))&63))}}var f=g.charAt(64);if(f){while(m.length%4){m.push(f)}}return m.join("")},parse:function(o){var m=o.length;var g=this._map;var f=g.charAt(64);if(f){var p=o.indexOf(f);if(p!=-1){m=p}}var n=[];var l=0;for(var k=0;k<m;k++){if(k%4){var j=g.indexOf(o.charAt(k-1))<<((k%4)*2);var h=g.indexOf(o.charAt(k))>>>(6-(k%4)*2);n[l>>>2]|=(j|h)<<(24-(l%4)*8);l++}}return b.create(n,l)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}());
/*! CryptoJS MD5 */
(function(c){var a=CryptoJS;var b=a.lib;var i=b.WordArray;var e=b.Hasher;var j=a.algo;var f=[];(function(){for(var m=0;m<64;m++){f[m]=(c.abs(c.sin(m+1))*4294967296)|0}}());var k=j.MD5=e.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(s,n){for(var I=0;I<16;I++){var m=n+I;var o=s[m];s[m]=((((o<<8)|(o>>>24))&16711935)|(((o<<24)|(o>>>8))&4278255360))}var x=this._hash.words;var A=s[n+0];var z=s[n+1];var y=s[n+2];var w=s[n+3];var v=s[n+4];var u=s[n+5];var t=s[n+6];var r=s[n+7];var q=s[n+8];var p=s[n+9];var G=s[n+10];var F=s[n+11];var E=s[n+12];var D=s[n+13];var C=s[n+14];var B=s[n+15];var N=x[0];var L=x[1];var K=x[2];var J=x[3];N=h(N,L,K,J,A,7,f[0]);J=h(J,N,L,K,z,12,f[1]);K=h(K,J,N,L,y,17,f[2]);L=h(L,K,J,N,w,22,f[3]);N=h(N,L,K,J,v,7,f[4]);J=h(J,N,L,K,u,12,f[5]);K=h(K,J,N,L,t,17,f[6]);L=h(L,K,J,N,r,22,f[7]);N=h(N,L,K,J,q,7,f[8]);J=h(J,N,L,K,p,12,f[9]);K=h(K,J,N,L,G,17,f[10]);L=h(L,K,J,N,F,22,f[11]);N=h(N,L,K,J,E,7,f[12]);J=h(J,N,L,K,D,12,f[13]);K=h(K,J,N,L,C,17,f[14]);L=h(L,K,J,N,B,22,f[15]);N=d(N,L,K,J,z,5,f[16]);J=d(J,N,L,K,t,9,f[17]);K=d(K,J,N,L,F,14,f[18]);L=d(L,K,J,N,A,20,f[19]);N=d(N,L,K,J,u,5,f[20]);J=d(J,N,L,K,G,9,f[21]);K=d(K,J,N,L,B,14,f[22]);L=d(L,K,J,N,v,20,f[23]);N=d(N,L,K,J,p,5,f[24]);J=d(J,N,L,K,C,9,f[25]);K=d(K,J,N,L,w,14,f[26]);L=d(L,K,J,N,q,20,f[27]);N=d(N,L,K,J,D,5,f[28]);J=d(J,N,L,K,y,9,f[29]);K=d(K,J,N,L,r,14,f[30]);L=d(L,K,J,N,E,20,f[31]);N=l(N,L,K,J,u,4,f[32]);J=l(J,N,L,K,q,11,f[33]);K=l(K,J,N,L,F,16,f[34]);L=l(L,K,J,N,C,23,f[35]);N=l(N,L,K,J,z,4,f[36]);J=l(J,N,L,K,v,11,f[37]);K=l(K,J,N,L,r,16,f[38]);L=l(L,K,J,N,G,23,f[39]);N=l(N,L,K,J,D,4,f[40]);J=l(J,N,L,K,A,11,f[41]);K=l(K,J,N,L,w,16,f[42]);L=l(L,K,J,N,t,23,f[43]);N=l(N,L,K,J,p,4,f[44]);J=l(J,N,L,K,E,11,f[45]);K=l(K,J,N,L,B,16,f[46]);L=l(L,K,J,N,y,23,f[47]);N=g(N,L,K,J,A,6,f[48]);J=g(J,N,L,K,r,10,f[49]);K=g(K,J,N,L,C,15,f[50]);L=g(L,K,J,N,u,21,f[51]);N=g(N,L,K,J,E,6,f[52]);J=g(J,N,L,K,w,10,f[53]);K=g(K,J,N,L,G,15,f[54]);L=g(L,K,J,N,z,21,f[55]);N=g(N,L,K,J,q,6,f[56]);J=g(J,N,L,K,B,10,f[57]);K=g(K,J,N,L,t,15,f[58]);L=g(L,K,J,N,D,21,f[59]);N=g(N,L,K,J,v,6,f[60]);J=g(J,N,L,K,F,10,f[61]);K=g(K,J,N,L,y,15,f[62]);L=g(L,K,J,N,p,21,f[63]);x[0]=(x[0]+N)|0;x[1]=(x[1]+L)|0;x[2]=(x[2]+K)|0;x[3]=(x[3]+J)|0},_doFinalize:function(){var q=this._data;var v=q.words;var s=this._nDataBytes*8;var t=q.sigBytes*8;v[t>>>5]|=128<<(24-t%32);var r=c.floor(s/4294967296);var n=s;v[(((t+64)>>>9)<<4)+15]=((((r<<8)|(r>>>24))&16711935)|(((r<<24)|(r>>>8))&4278255360));v[(((t+64)>>>9)<<4)+14]=((((n<<8)|(n>>>24))&16711935)|(((n<<24)|(n>>>8))&4278255360));q.sigBytes=(v.length+1)*4;this._process();var p=this._hash;var u=p.words;for(var o=0;o<4;o++){var m=u[o];u[o]=(((m<<8)|(m>>>24))&16711935)|(((m<<24)|(m>>>8))&4278255360)}return p},clone:function(){var m=e.clone.call(this);m._hash=this._hash.clone();return m}});function h(p,o,w,u,m,r,q){var v=p+((o&w)|(~o&u))+m+q;return((v<<r)|(v>>>(32-r)))+o}function d(p,o,w,u,m,r,q){var v=p+((o&u)|(w&~u))+m+q;return((v<<r)|(v>>>(32-r)))+o}function l(p,o,w,u,m,r,q){var v=p+(o^w^u)+m+q;return((v<<r)|(v>>>(32-r)))+o}function g(p,o,w,u,m,r,q){var v=p+(w^(o|~u))+m+q;return((v<<r)|(v>>>(32-r)))+o}a.MD5=e._createHelper(k);a.HmacMD5=e._createHmacHelper(k)}(Math));
/*! CryptoJS EvpKDF */
(function(){var g=CryptoJS;var d=g.lib;var b=d.Base;var f=d.WordArray;var e=g.algo;var c=e.MD5;var a=e.EvpKDF=b.extend({cfg:b.extend({keySize:128/32,hasher:c,iterations:1}),init:function(h){this.cfg=this.cfg.extend(h)},compute:function(q,l){var n=this.cfg;var r=n.hasher.create();var m=f.create();var p=m.words;var o=n.keySize;var h=n.iterations;while(p.length<o){if(j){r.update(j)}var j=r.update(q).finalize(l);r.reset();for(var k=1;k<h;k++){j=r.finalize(j);r.reset()}m.concat(j)}m.sigBytes=o*4;return m}});g.EvpKDF=function(i,j,h){return a.create(h).compute(i,j)}}());
/*! CryptoJS Cipher */
CryptoJS.lib.Cipher||(function(d){var m=CryptoJS;var w=m.lib;var i=w.Base;var t=w.WordArray;var v=w.BufferedBlockAlgorithm;var r=m.enc;var f=r.Utf8;var l=r.Base64;var b=m.algo;var h=b.EvpKDF;var j=w.Cipher=v.extend({cfg:i.extend(),createEncryptor:function(B,A){return this.create(this._ENC_XFORM_MODE,B,A)},createDecryptor:function(B,A){return this.create(this._DEC_XFORM_MODE,B,A)},init:function(C,B,A){this.cfg=this.cfg.extend(A);this._xformMode=C;this._key=B;this.reset()},reset:function(){v.reset.call(this);this._doReset()},process:function(A){this._append(A);return this._process()},finalize:function(B){if(B){this._append(B)}var A=this._doFinalize();return A},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:(function(){function A(B){if(typeof B=="string"){return g}else{return z}}return function(B){return{encrypt:function(E,D,C){return A(D).encrypt(B,E,D,C)},decrypt:function(E,D,C){return A(D).decrypt(B,E,D,C)}}}}())});var p=w.StreamCipher=j.extend({_doFinalize:function(){var A=this._process(!!"flush");return A},blockSize:1});var s=m.mode={};var y=w.BlockCipherMode=i.extend({createEncryptor:function(A,B){return this.Encryptor.create(A,B)},createDecryptor:function(A,B){return this.Decryptor.create(A,B)},init:function(A,B){this._cipher=A;this._iv=B}});var c=s.CBC=(function(){var A=y.extend();A.Encryptor=A.extend({processBlock:function(F,E){var C=this._cipher;var D=C.blockSize;B.call(this,F,E,D);C.encryptBlock(F,E);this._prevBlock=F.slice(E,E+D)}});A.Decryptor=A.extend({processBlock:function(G,F){var C=this._cipher;var E=C.blockSize;var D=G.slice(F,F+E);C.decryptBlock(G,F);B.call(this,G,F,E);this._prevBlock=D}});function B(H,G,E){var C=this._iv;if(C){var F=C;this._iv=d}else{var F=this._prevBlock}for(var D=0;D<E;D++){H[G+D]^=F[D]}}return A}());var e=m.pad={};var a=e.Pkcs7={pad:function(F,D){var E=D*4;var H=E-F.sigBytes%E;var A=(H<<24)|(H<<16)|(H<<8)|H;var C=[];for(var B=0;B<H;B+=4){C.push(A)}var G=t.create(C,H);F.concat(G)},unpad:function(A){var B=A.words[(A.sigBytes-1)>>>2]&255;A.sigBytes-=B}};var q=w.BlockCipher=j.extend({cfg:j.cfg.extend({mode:c,padding:a}),reset:function(){j.reset.call(this);var A=this.cfg;var B=A.iv;var D=A.mode;if(this._xformMode==this._ENC_XFORM_MODE){var C=D.createEncryptor}else{var C=D.createDecryptor;this._minBufferSize=1}this._mode=C.call(D,this,B&&B.words)},_doProcessBlock:function(B,A){this._mode.processBlock(B,A)},_doFinalize:function(){var B=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){B.pad(this._data,this.blockSize);var A=this._process(!!"flush")}else{var A=this._process(!!"flush");B.unpad(A)}return A},blockSize:128/32});var o=w.CipherParams=i.extend({init:function(A){this.mixIn(A)},toString:function(A){return(A||this.formatter).stringify(this)}});var n=m.format={};var u=n.OpenSSL={stringify:function(A){var D=A.ciphertext;var B=A.salt;if(B){var C=t.create([1398893684,1701076831]).concat(B).concat(D)}else{var C=D}return C.toString(l)},parse:function(C){var B=l.parse(C);var D=B.words;if(D[0]==1398893684&&D[1]==1701076831){var A=t.create(D.slice(2,4));D.splice(0,4);B.sigBytes-=16}return o.create({ciphertext:B,salt:A})}};var z=w.SerializableCipher=i.extend({cfg:i.extend({format:u}),encrypt:function(A,F,D,B){B=this.cfg.extend(B);var C=A.createEncryptor(D,B);var G=C.finalize(F);var E=C.cfg;return o.create({ciphertext:G,key:D,iv:E.iv,algorithm:A,mode:E.mode,padding:E.padding,blockSize:A.blockSize,formatter:B.format})},decrypt:function(A,E,C,B){B=this.cfg.extend(B);E=this._parse(E,B.format);var D=A.createDecryptor(C,B).finalize(E.ciphertext);return D},_parse:function(A,B){if(typeof A=="string"){return B.parse(A,this)}else{return A}}});var k=m.kdf={};var x=k.OpenSSL={execute:function(C,F,A,E){if(!E){E=t.random(64/8)}var D=h.create({keySize:F+A}).compute(C,E);var B=t.create(D.words.slice(F),A*4);D.sigBytes=F*4;return o.create({key:D,iv:B,salt:E})}};var g=w.PasswordBasedCipher=z.extend({cfg:z.cfg.extend({kdf:x}),encrypt:function(A,D,C,B){B=this.cfg.extend(B);var F=B.kdf.execute(C,A.keySize,A.ivSize);B.iv=F.iv;var E=z.encrypt.call(this,A,D,F.key,B);E.mixIn(F);return E},decrypt:function(A,E,C,B){B=this.cfg.extend(B);E=this._parse(E,B.format);var F=B.kdf.execute(C,A.keySize,A.ivSize,E.salt);B.iv=F.iv;var D=z.decrypt.call(this,A,E,F.key,B);return D}})}());
/*! CryptoJS AES */
(function(){var a=CryptoJS;var b=a.lib;var p=b.BlockCipher;var k=a.algo;var d=[];var l=[];var o=[];var n=[];var m=[];var j=[];var i=[];var h=[];var g=[];var f=[];(function(){var s=[];for(var r=0;r<256;r++){if(r<128){s[r]=r<<1}else{s[r]=(r<<1)^283}}var w=0;var u=0;for(var r=0;r<256;r++){var v=u^(u<<1)^(u<<2)^(u<<3)^(u<<4);v=(v>>>8)^(v&255)^99;d[w]=v;l[v]=w;var q=s[w];var A=s[q];var y=s[A];var z=(s[v]*257)^(v*16843008);o[w]=(z<<24)|(z>>>8);n[w]=(z<<16)|(z>>>16);m[w]=(z<<8)|(z>>>24);j[w]=z;var z=(y*16843009)^(A*65537)^(q*257)^(w*16843008);i[v]=(z<<24)|(z>>>8);h[v]=(z<<16)|(z>>>16);g[v]=(z<<8)|(z>>>24);f[v]=z;if(!w){w=u=1}else{w=q^s[s[s[y^q]]];u^=s[s[u]]}}}());var c=[0,1,2,4,8,16,32,64,128,27,54];var e=k.AES=p.extend({_doReset:function(){var z=this._key;var r=z.words;var y=z.sigBytes/4;var x=this._nRounds=y+6;var q=(x+1)*4;var s=this._keySchedule=[];for(var w=0;w<q;w++){if(w<y){s[w]=r[w]}else{var A=s[w-1];if(!(w%y)){A=(A<<8)|(A>>>24);A=(d[A>>>24]<<24)|(d[(A>>>16)&255]<<16)|(d[(A>>>8)&255]<<8)|d[A&255];A^=c[(w/y)|0]<<24}else{if(y>6&&w%y==4){A=(d[A>>>24]<<24)|(d[(A>>>16)&255]<<16)|(d[(A>>>8)&255]<<8)|d[A&255]}}s[w]=s[w-y]^A}}var u=this._invKeySchedule=[];for(var v=0;v<q;v++){var w=q-v;if(v%4){var A=s[w]}else{var A=s[w-4]}if(v<4||w<=4){u[v]=A}else{u[v]=i[d[A>>>24]]^h[d[(A>>>16)&255]]^g[d[(A>>>8)&255]]^f[d[A&255]]}}},encryptBlock:function(r,q){this._doCryptBlock(r,q,this._keySchedule,o,n,m,j,d)},decryptBlock:function(s,r){var q=s[r+1];s[r+1]=s[r+3];s[r+3]=q;this._doCryptBlock(s,r,this._invKeySchedule,i,h,g,f,l);var q=s[r+1];s[r+1]=s[r+3];s[r+3]=q},_doCryptBlock:function(z,y,H,v,t,r,q,G){var E=this._nRounds;var x=z[y]^H[0];var w=z[y+1]^H[1];var u=z[y+2]^H[2];var s=z[y+3]^H[3];var F=4;for(var I=1;I<E;I++){var D=v[x>>>24]^t[(w>>>16)&255]^r[(u>>>8)&255]^q[s&255]^H[F++];var C=v[w>>>24]^t[(u>>>16)&255]^r[(s>>>8)&255]^q[x&255]^H[F++];var B=v[u>>>24]^t[(s>>>16)&255]^r[(x>>>8)&255]^q[w&255]^H[F++];var A=v[s>>>24]^t[(x>>>16)&255]^r[(w>>>8)&255]^q[u&255]^H[F++];x=D;w=C;u=B;s=A}var D=((G[x>>>24]<<24)|(G[(w>>>16)&255]<<16)|(G[(u>>>8)&255]<<8)|G[s&255])^H[F++];var C=((G[w>>>24]<<24)|(G[(u>>>16)&255]<<16)|(G[(s>>>8)&255]<<8)|G[x&255])^H[F++];var B=((G[u>>>24]<<24)|(G[(s>>>16)&255]<<16)|(G[(x>>>8)&255]<<8)|G[w&255])^H[F++];var A=((G[s>>>24]<<24)|(G[(x>>>16)&255]<<16)|(G[(w>>>8)&255]<<8)|G[u&255])^H[F++];z[y]=D;z[y+1]=C;z[y+2]=B;z[y+3]=A},keySize:256/32});a.AES=p._createHelper(e)}());
/*!
 * Bootstrap v3.1.1 (http://getbootstrap.com)
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 */
if("undefined"==typeof jQuery){throw new Error("Bootstrap's JavaScript requires jQuery")}+function(d){function c(){var f=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var g in e){if(void 0!==f.style[g]){return{end:e[g]}}}return !1}d.fn.emulateTransitionEnd=function(a){var h=!1,g=this;d(this).one(d.support.transition.end,function(){h=!0});var f=function(){h||d(g).trigger(d.support.transition.end)};return setTimeout(f,a),this},d(function(){d.support.transition=c()})}(jQuery),+function(f){var e='[data-dismiss="alert"]',h=function(a){f(a).on("click",e,this.close)};h.prototype.close=function(a){function l(){i.trigger("closed.bs.alert").remove()}var k=f(this),j=k.attr("data-target");j||(j=k.attr("href"),j=j&&j.replace(/.*(?=#[^\s]*$)/,""));var i=f(j);a&&a.preventDefault(),i.length||(i=k.hasClass("alert")?k:k.parent()),i.trigger(a=f.Event("close.bs.alert")),a.isDefaultPrevented()||(i.removeClass("in"),f.support.transition&&i.hasClass("fade")?i.one(f.support.transition.end,l).emulateTransitionEnd(150):l())};var g=f.fn.alert;f.fn.alert=function(a){return this.each(function(){var c=f(this),b=c.data("bs.alert");b||c.data("bs.alert",b=new h(this)),"string"==typeof a&&b[a].call(c)})},f.fn.alert.Constructor=h,f.fn.alert.noConflict=function(){return f.fn.alert=g,this},f(document).on("click.bs.alert.data-api",e,h.prototype.close)}(jQuery),+function(e){var d=function(b,a){this.$element=e(b),this.options=e.extend({},d.DEFAULTS,a),this.isLoading=!1};d.DEFAULTS={loadingText:"loading..."},d.prototype.setState=function(a){var j="disabled",i=this.$element,h=i.is("input")?"val":"html",g=i.data();a+="Text",g.resetText||i.data("resetText",i[h]()),i[h](g[a]||this.options[a]),setTimeout(e.proxy(function(){"loadingText"==a?(this.isLoading=!0,i.addClass(j).attr(j,j)):this.isLoading&&(this.isLoading=!1,i.removeClass(j).removeAttr(j))},this),0)},d.prototype.toggle=function(){var h=!0,g=this.$element.closest('[data-toggle="buttons"]');if(g.length){var i=this.$element.find("input");"radio"==i.prop("type")&&(i.prop("checked")&&this.$element.hasClass("active")?h=!1:g.find(".active").removeClass("active")),h&&i.prop("checked",!this.$element.hasClass("active")).trigger("change")}h&&this.$element.toggleClass("active")};var f=e.fn.button;e.fn.button=function(a){return this.each(function(){var g=e(this),c=g.data("bs.button"),b="object"==typeof a&&a;c||g.data("bs.button",c=new d(this,b)),"toggle"==a?c.toggle():a&&c.setState(a)})},e.fn.button.Constructor=d,e.fn.button.noConflict=function(){return e.fn.button=f,this},e(document).on("click.bs.button.data-api","[data-toggle^=button]",function(a){var g=e(a.target);g.hasClass("btn")||(g=g.closest(".btn")),g.button("toggle"),a.preventDefault()})}(jQuery),+function(e){var d=function(a,g){this.$element=e(a),this.$indicators=this.$element.find(".carousel-indicators"),this.options=g,this.paused=this.sliding=this.interval=this.$active=this.$items=null,"hover"==this.options.pause&&this.$element.on("mouseenter",e.proxy(this.pause,this)).on("mouseleave",e.proxy(this.cycle,this))};d.DEFAULTS={interval:5000,pause:"hover",wrap:!0},d.prototype.cycle=function(a){return a||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},d.prototype.getActiveIndex=function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},d.prototype.to=function(a){var h=this,g=this.getActiveIndex();return a>this.$items.length-1||0>a?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){h.to(a)}):g==a?this.pause().cycle():this.slide(a>g?"next":"prev",e(this.$items[a]))},d.prototype.pause=function(a){return a||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},d.prototype.next=function(){return this.sliding?void 0:this.slide("next")},d.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},d.prototype.slide=function(r,q){var p=this.$element.find(".item.active"),o=q||p[r](),n=this.interval,m="next"==r?"left":"right",l="next"==r?"first":"last",k=this;if(!o.length){if(!this.options.wrap){return}o=this.$element.find(".item")[l]()}if(o.hasClass("active")){return this.sliding=!1}var a=e.Event("slide.bs.carousel",{relatedTarget:o[0],direction:m});return this.$element.trigger(a),a.isDefaultPrevented()?void 0:(this.sliding=!0,n&&this.pause(),this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid.bs.carousel",function(){var c=e(k.$indicators.children()[k.getActiveIndex()]);c&&c.addClass("active")})),e.support.transition&&this.$element.hasClass("slide")?(o.addClass(r),o[0].offsetWidth,p.addClass(m),o.addClass(m),p.one(e.support.transition.end,function(){o.removeClass([r,m].join(" ")).addClass("active"),p.removeClass(["active",m].join(" ")),k.sliding=!1,setTimeout(function(){k.$element.trigger("slid.bs.carousel")},0)}).emulateTransitionEnd(1000*p.css("transition-duration").slice(0,-1))):(p.removeClass("active"),o.addClass("active"),this.sliding=!1,this.$element.trigger("slid.bs.carousel")),n&&this.cycle(),this)};var f=e.fn.carousel;e.fn.carousel=function(a){return this.each(function(){var i=e(this),h=i.data("bs.carousel"),c=e.extend({},d.DEFAULTS,i.data(),"object"==typeof a&&a),b="string"==typeof a?a:c.slide;h||i.data("bs.carousel",h=new d(this,c)),"number"==typeof a?h.to(a):b?h[b]():c.interval&&h.pause().cycle()})},e.fn.carousel.Constructor=d,e.fn.carousel.noConflict=function(){return e.fn.carousel=f,this},e(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(a){var l,k=e(this),j=e(k.attr("data-target")||(l=k.attr("href"))&&l.replace(/.*(?=#[^\s]+$)/,"")),i=e.extend({},j.data(),k.data()),h=k.attr("data-slide-to");h&&(i.interval=!1),j.carousel(i),(h=k.attr("data-slide-to"))&&j.data("bs.carousel").to(h),a.preventDefault()}),e(window).on("load",function(){e('[data-ride="carousel"]').each(function(){var a=e(this);a.carousel(a.data())})})}(jQuery),+function(e){var d=function(b,a){this.$element=e(b),this.options=e.extend({},d.DEFAULTS,a),this.transitioning=null,this.options.parent&&(this.$parent=e(this.options.parent)),this.options.toggle&&this.toggle()};d.DEFAULTS={toggle:!0},d.prototype.dimension=function(){var b=this.$element.hasClass("width");return b?"width":"height"},d.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var a=e.Event("show.bs.collapse");if(this.$element.trigger(a),!a.isDefaultPrevented()){var l=this.$parent&&this.$parent.find("> .panel > .in");if(l&&l.length){var k=l.data("bs.collapse");if(k&&k.transitioning){return}l.collapse("hide"),k||l.data("bs.collapse",null)}var j=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[j](0),this.transitioning=1;var i=function(){this.$element.removeClass("collapsing").addClass("collapse in")[j]("auto"),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition){return i.call(this)}var h=e.camelCase(["scroll",j].join("-"));this.$element.one(e.support.transition.end,e.proxy(i,this)).emulateTransitionEnd(350)[j](this.$element[0][h])}}},d.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var a=e.Event("hide.bs.collapse");if(this.$element.trigger(a),!a.isDefaultPrevented()){var h=this.dimension();this.$element[h](this.$element[h]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var g=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};return e.support.transition?void this.$element[h](0).one(e.support.transition.end,e.proxy(g,this)).emulateTransitionEnd(350):g.call(this)}}},d.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var f=e.fn.collapse;e.fn.collapse=function(a){return this.each(function(){var g=e(this),c=g.data("bs.collapse"),b=e.extend({},d.DEFAULTS,g.data(),"object"==typeof a&&a);!c&&b.toggle&&"show"==a&&(a=!a),c||g.data("bs.collapse",c=new d(this,b)),"string"==typeof a&&c[a]()})},e.fn.collapse.Constructor=d,e.fn.collapse.noConflict=function(){return e.fn.collapse=f,this},e(document).on("click.bs.collapse.data-api","[data-toggle=collapse]",function(r){var q,p=e(this),o=p.attr("data-target")||r.preventDefault()||(q=p.attr("href"))&&q.replace(/.*(?=#[^\s]+$)/,""),n=e(o),m=n.data("bs.collapse"),l=m?"toggle":p.data(),k=p.attr("data-parent"),a=k&&e(k);m&&m.transitioning||(a&&a.find('[data-toggle=collapse][data-parent="'+k+'"]').not(p).addClass("collapsed"),p[n.hasClass("in")?"addClass":"removeClass"]("collapsed")),n.collapse(l)})}(jQuery),+function(i){function h(a){i(m).remove(),i(l).each(function(){var c=n(i(this)),b={relatedTarget:this};c.hasClass("open")&&(c.trigger(a=i.Event("hide.bs.dropdown",b)),a.isDefaultPrevented()||c.removeClass("open").trigger("hidden.bs.dropdown",b))})}function n(a){var f=a.attr("data-target");f||(f=a.attr("href"),f=f&&/#[A-Za-z]/.test(f)&&f.replace(/.*(?=#[^\s]*$)/,""));var e=f&&i(f);return e&&e.length?e:a.parent()}var m=".dropdown-backdrop",l="[data-toggle=dropdown]",k=function(a){i(a).on("click.bs.dropdown",this.toggle)};k.prototype.toggle=function(p){var o=i(this);if(!o.is(".disabled, :disabled")){var c=n(o),b=c.hasClass("open");if(h(),!b){"ontouchstart" in document.documentElement&&!c.closest(".navbar-nav").length&&i('<div class="dropdown-backdrop"/>').insertAfter(i(this)).on("click",h);var a={relatedTarget:this};if(c.trigger(p=i.Event("show.bs.dropdown",a)),p.isDefaultPrevented()){return}c.toggleClass("open").trigger("shown.bs.dropdown",a),o.focus()}return !1}},k.prototype.keydown=function(a){if(/(38|40|27)/.test(a.keyCode)){var r=i(this);if(a.preventDefault(),a.stopPropagation(),!r.is(".disabled, :disabled")){var q=n(r),p=q.hasClass("open");if(!p||p&&27==a.keyCode){return 27==a.which&&q.find(l).focus(),r.click()}var o=" li:not(.divider):visible a",e=q.find("[role=menu]"+o+", [role=listbox]"+o);if(e.length){var c=e.index(e.filter(":focus"));38==a.keyCode&&c>0&&c--,40==a.keyCode&&c<e.length-1&&c++,~c||(c=0),e.eq(c).focus()}}}};var j=i.fn.dropdown;i.fn.dropdown=function(a){return this.each(function(){var e=i(this),b=e.data("bs.dropdown");b||e.data("bs.dropdown",b=new k(this)),"string"==typeof a&&b[a].call(e)})},i.fn.dropdown.Constructor=k,i.fn.dropdown.noConflict=function(){return i.fn.dropdown=j,this},i(document).on("click.bs.dropdown.data-api",h).on("click.bs.dropdown.data-api",".dropdown form",function(b){b.stopPropagation()}).on("click.bs.dropdown.data-api",l,k.prototype.toggle).on("keydown.bs.dropdown.data-api",l+", [role=menu], [role=listbox]",k.prototype.keydown)}(jQuery),+function(e){var d=function(a,g){this.options=g,this.$element=e(a),this.$backdrop=this.isShown=null,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,e.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};d.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},d.prototype.toggle=function(b){return this[this.isShown?"hide":"show"](b)},d.prototype.show=function(a){var h=this,g=e.Event("show.bs.modal",{relatedTarget:a});this.$element.trigger(g),this.isShown||g.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.backdrop(function(){var c=e.support.transition&&h.$element.hasClass("fade");h.$element.parent().length||h.$element.appendTo(document.body),h.$element.show().scrollTop(0),c&&h.$element[0].offsetWidth,h.$element.addClass("in").attr("aria-hidden",!1),h.enforceFocus();var b=e.Event("shown.bs.modal",{relatedTarget:a});c?h.$element.find(".modal-dialog").one(e.support.transition.end,function(){h.$element.focus().trigger(b)}).emulateTransitionEnd(300):h.$element.focus().trigger(b)}))},d.prototype.hide=function(a){a&&a.preventDefault(),a=e.Event("hide.bs.modal"),this.$element.trigger(a),this.isShown&&!a.isDefaultPrevented()&&(this.isShown=!1,this.escape(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one(e.support.transition.end,e.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},d.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(b){this.$element[0]===b.target||this.$element.has(b.target).length||this.$element.focus()},this))},d.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",e.proxy(function(b){27==b.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},d.prototype.hideModal=function(){var b=this;this.$element.hide(),this.backdrop(function(){b.removeBackdrop(),b.$element.trigger("hidden.bs.modal")})},d.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},d.prototype.backdrop=function(a){var h=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var g=e.support.transition&&h;if(this.$backdrop=e('<div class="modal-backdrop '+h+'" />').appendTo(document.body),this.$element.on("click.dismiss.bs.modal",e.proxy(function(b){b.target===b.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),g&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!a){return}g?this.$backdrop.one(e.support.transition.end,a).emulateTransitionEnd(150):a()}else{!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(e.support.transition.end,a).emulateTransitionEnd(150):a()):a&&a()}};var f=e.fn.modal;e.fn.modal=function(b,a){return this.each(function(){var i=e(this),h=i.data("bs.modal"),c=e.extend({},d.DEFAULTS,i.data(),"object"==typeof b&&b);h||i.data("bs.modal",h=new d(this,c)),"string"==typeof b?h[b](a):c.show&&h.show(a)})},e.fn.modal.Constructor=d,e.fn.modal.noConflict=function(){return e.fn.modal=f,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(a){var j=e(this),i=j.attr("href"),h=e(j.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),g=h.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(i)&&i},h.data(),j.data());j.is("a")&&a.preventDefault(),h.modal(g,this).one("hide",function(){j.is(":visible")&&j.focus()})}),e(document).on("show.bs.modal",".modal",function(){e(document.body).addClass("modal-open")}).on("hidden.bs.modal",".modal",function(){e(document.body).removeClass("modal-open")})}(jQuery),+function(e){var d=function(g,c){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",g,c)};d.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},d.prototype.init=function(a,p,o){this.enabled=!0,this.type=a,this.$element=e(p),this.options=this.getOptions(o);for(var n=this.options.trigger.split(" "),m=n.length;m--;){var l=n[m];if("click"==l){this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this))}else{if("manual"!=l){var k="hover"==l?"mouseenter":"focusin",j="hover"==l?"mouseleave":"focusout";this.$element.on(k+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(j+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},d.prototype.getDefaults=function(){return d.DEFAULTS},d.prototype.getOptions=function(a){return a=e.extend({},this.getDefaults(),this.$element.data(),a),a.delay&&"number"==typeof a.delay&&(a.delay={show:a.delay,hide:a.delay}),a},d.prototype.getDelegateOptions=function(){var a={},g=this.getDefaults();return this._options&&e.each(this._options,function(b,c){g[b]!=c&&(a[b]=c)}),a},d.prototype.enter=function(a){var g=a instanceof this.constructor?a:e(a.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(g.timeout),g.hoverState="in",g.options.delay&&g.options.delay.show?void (g.timeout=setTimeout(function(){"in"==g.hoverState&&g.show()},g.options.delay.show)):g.show()},d.prototype.leave=function(a){var g=a instanceof this.constructor?a:e(a.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(g.timeout),g.hoverState="out",g.options.delay&&g.options.delay.hide?void (g.timeout=setTimeout(function(){"out"==g.hoverState&&g.hide()},g.options.delay.hide)):g.hide()},d.prototype.show=function(){var H=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){if(this.$element.trigger(H),H.isDefaultPrevented()){return}var G=this,F=this.tip();this.setContent(),this.options.animation&&F.addClass("fade");var E="function"==typeof this.options.placement?this.options.placement.call(this,F[0],this.$element[0]):this.options.placement,D=/\s?auto?\s?/i,C=D.test(E);C&&(E=E.replace(D,"")||"top"),F.detach().css({top:0,left:0,display:"block"}).addClass(E),this.options.container?F.appendTo(this.options.container):F.insertAfter(this.$element);var B=this.getPosition(),A=F[0].offsetWidth,z=F[0].offsetHeight;if(C){var y=this.$element.parent(),x=E,w=document.documentElement.scrollTop||document.body.scrollTop,v="body"==this.options.container?window.innerWidth:y.outerWidth(),u="body"==this.options.container?window.innerHeight:y.outerHeight(),t="body"==this.options.container?0:y.offset().left;E="bottom"==E&&B.top+B.height+z-w>u?"top":"top"==E&&B.top-w-z<0?"bottom":"right"==E&&B.right+A>v?"left":"left"==E&&B.left-A<t?"right":E,F.removeClass(x).addClass(E)}var s=this.getCalculatedOffset(E,B,A,z);this.applyPlacement(s,E),this.hoverState=null;var a=function(){G.$element.trigger("shown.bs."+G.type)};e.support.transition&&this.$tip.hasClass("fade")?F.one(e.support.transition.end,a).emulateTransitionEnd(150):a()}},d.prototype.applyPlacement=function(v,u){var t,s=this.tip(),r=s[0].offsetWidth,q=s[0].offsetHeight,p=parseInt(s.css("margin-top"),10),o=parseInt(s.css("margin-left"),10);isNaN(p)&&(p=0),isNaN(o)&&(o=0),v.top=v.top+p,v.left=v.left+o,e.offset.setOffset(s[0],e.extend({using:function(b){s.css({top:Math.round(b.top),left:Math.round(b.left)})}},v),0),s.addClass("in");var n=s[0].offsetWidth,m=s[0].offsetHeight;if("top"==u&&m!=q&&(t=!0,v.top=v.top+q-m),/bottom|top/.test(u)){var a=0;v.left<0&&(a=-2*v.left,v.left=0,s.offset(v),n=s[0].offsetWidth,m=s[0].offsetHeight),this.replaceArrow(a-r+n,n,"left")}else{this.replaceArrow(m-q,m,"top")}t&&s.offset(v)},d.prototype.replaceArrow=function(h,g,i){this.arrow().css(i,h?50*(1-h/g)+"%":"")},d.prototype.setContent=function(){var g=this.tip(),c=this.getTitle();g.find(".tooltip-inner")[this.options.html?"html":"text"](c),g.removeClass("fade in top bottom left right")},d.prototype.hide=function(){function a(){"in"!=i.hoverState&&h.detach(),i.$element.trigger("hidden.bs."+i.type)}var i=this,h=this.tip(),g=e.Event("hide.bs."+this.type);return this.$element.trigger(g),g.isDefaultPrevented()?void 0:(h.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?h.one(e.support.transition.end,a).emulateTransitionEnd(150):a(),this.hoverState=null,this)},d.prototype.fixTitle=function(){var b=this.$element;(b.attr("title")||"string"!=typeof b.attr("data-original-title"))&&b.attr("data-original-title",b.attr("title")||"").attr("title","")},d.prototype.hasContent=function(){return this.getTitle()},d.prototype.getPosition=function(){var a=this.$element[0];return e.extend({},"function"==typeof a.getBoundingClientRect?a.getBoundingClientRect():{width:a.offsetWidth,height:a.offsetHeight},this.$element.offset())},d.prototype.getCalculatedOffset=function(h,g,j,i){return"bottom"==h?{top:g.top+g.height,left:g.left+g.width/2-j/2}:"top"==h?{top:g.top-i,left:g.left+g.width/2-j/2}:"left"==h?{top:g.top+g.height/2-i/2,left:g.left-j}:{top:g.top+g.height/2-i/2,left:g.left+g.width}},d.prototype.getTitle=function(){var h,g=this.$element,i=this.options;return h=g.attr("data-original-title")||("function"==typeof i.title?i.title.call(g[0]):i.title)},d.prototype.tip=function(){return this.$tip=this.$tip||e(this.options.template)},d.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},d.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},d.prototype.enable=function(){this.enabled=!0},d.prototype.disable=function(){this.enabled=!1},d.prototype.toggleEnabled=function(){this.enabled=!this.enabled},d.prototype.toggle=function(a){var g=a?e(a.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;g.tip().hasClass("in")?g.leave(g):g.enter(g)},d.prototype.destroy=function(){clearTimeout(this.timeout),this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var f=e.fn.tooltip;e.fn.tooltip=function(a){return this.each(function(){var g=e(this),c=g.data("bs.tooltip"),b="object"==typeof a&&a;(c||"destroy"!=a)&&(c||g.data("bs.tooltip",c=new d(this,b)),"string"==typeof a&&c[a]())})},e.fn.tooltip.Constructor=d,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=f,this}}(jQuery),+function(e){var d=function(g,c){this.init("popover",g,c)};if(!e.fn.tooltip){throw new Error("Popover requires tooltip.js")}d.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),d.prototype=e.extend({},e.fn.tooltip.Constructor.prototype),d.prototype.constructor=d,d.prototype.getDefaults=function(){return d.DEFAULTS},d.prototype.setContent=function(){var h=this.tip(),g=this.getTitle(),i=this.getContent();h.find(".popover-title")[this.options.html?"html":"text"](g),h.find(".popover-content")[this.options.html?"string"==typeof i?"html":"append":"text"](i),h.removeClass("fade top bottom left right in"),h.find(".popover-title").html()||h.find(".popover-title").hide()},d.prototype.hasContent=function(){return this.getTitle()||this.getContent()},d.prototype.getContent=function(){var g=this.$element,c=this.options;return g.attr("data-content")||("function"==typeof c.content?c.content.call(g[0]):c.content)},d.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},d.prototype.tip=function(){return this.$tip||(this.$tip=e(this.options.template)),this.$tip};var f=e.fn.popover;e.fn.popover=function(a){return this.each(function(){var g=e(this),c=g.data("bs.popover"),b="object"==typeof a&&a;(c||"destroy"!=a)&&(c||g.data("bs.popover",c=new d(this,b)),"string"==typeof a&&c[a]())})},e.fn.popover.Constructor=d,e.fn.popover.noConflict=function(){return e.fn.popover=f,this}}(jQuery),+function(e){function d(h,g){var b,a=e.proxy(this.process,this);this.$element=e(e(h).is("body")?window:h),this.$body=e("body"),this.$scrollElement=this.$element.on("scroll.bs.scroll-spy.data-api",a),this.options=e.extend({},d.DEFAULTS,g),this.selector=(this.options.target||(b=e(h).attr("href"))&&b.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.offsets=e([]),this.targets=e([]),this.activeTarget=null,this.refresh(),this.process()}d.DEFAULTS={offset:10},d.prototype.refresh=function(){var a=this.$element[0]==window?"offset":"position";this.offsets=e([]),this.targets=e([]);var g=this;this.$body.find(this.selector).map(function(){var h=e(this),c=h.data("target")||h.attr("href"),b=/^#./.test(c)&&e(c);return b&&b.length&&b.is(":visible")&&[[b[a]().top+(!e.isWindow(g.$scrollElement.get(0))&&g.$scrollElement.scrollTop()),c]]||null}).sort(function(h,c){return h[0]-c[0]}).each(function(){g.offsets.push(this[0]),g.targets.push(this[1])})},d.prototype.process=function(){var i,h=this.$scrollElement.scrollTop()+this.options.offset,n=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,m=n-this.$scrollElement.height(),l=this.offsets,k=this.targets,j=this.activeTarget;if(h>=m){return j!=(i=k.last()[0])&&this.activate(i)}if(j&&h<=l[0]){return j!=(i=k[0])&&this.activate(i)}for(i=l.length;i--;){j!=k[i]&&h>=l[i]&&(!l[i+1]||h<=l[i+1])&&this.activate(k[i])}},d.prototype.activate=function(a){this.activeTarget=a,e(this.selector).parentsUntil(this.options.target,".active").removeClass("active");var h=this.selector+'[data-target="'+a+'"],'+this.selector+'[href="'+a+'"]',g=e(h).parents("li").addClass("active");g.parent(".dropdown-menu").length&&(g=g.closest("li.dropdown").addClass("active")),g.trigger("activate.bs.scrollspy")};var f=e.fn.scrollspy;e.fn.scrollspy=function(a){return this.each(function(){var g=e(this),c=g.data("bs.scrollspy"),b="object"==typeof a&&a;c||g.data("bs.scrollspy",c=new d(this,b)),"string"==typeof a&&c[a]()})},e.fn.scrollspy.Constructor=d,e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=f,this},e(window).on("load",function(){e('[data-spy="scroll"]').each(function(){var a=e(this);a.scrollspy(a.data())})})}(jQuery),+function(e){var d=function(a){this.element=e(a)};d.prototype.show=function(){var a=this.element,l=a.closest("ul:not(.dropdown-menu)"),k=a.data("target");if(k||(k=a.attr("href"),k=k&&k.replace(/.*(?=#[^\s]*$)/,"")),!a.parent("li").hasClass("active")){var j=l.find(".active:last a")[0],i=e.Event("show.bs.tab",{relatedTarget:j});if(a.trigger(i),!i.isDefaultPrevented()){var h=e(k);this.activate(a.parent("li"),l),this.activate(h,h.parent(),function(){a.trigger({type:"shown.bs.tab",relatedTarget:j})})}}},d.prototype.activate=function(a,l,k){function j(){i.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),a.addClass("active"),h?(a[0].offsetWidth,a.addClass("in")):a.removeClass("fade"),a.parent(".dropdown-menu")&&a.closest("li.dropdown").addClass("active"),k&&k()}var i=l.find("> .active"),h=k&&e.support.transition&&i.hasClass("fade");h?i.one(e.support.transition.end,j).emulateTransitionEnd(150):j(),i.removeClass("in")};var f=e.fn.tab;e.fn.tab=function(a){return this.each(function(){var c=e(this),b=c.data("bs.tab");b||c.data("bs.tab",b=new d(this)),"string"==typeof a&&b[a]()})},e.fn.tab.Constructor=d,e.fn.tab.noConflict=function(){return e.fn.tab=f,this},e(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(a){a.preventDefault(),e(this).tab("show")})}(jQuery),+function(e){var d=function(b,a){this.options=e.extend({},d.DEFAULTS,a),this.$window=e(window).on("scroll.bs.affix.data-api",e.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",e.proxy(this.checkPositionWithEventLoop,this)),this.$element=e(b),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()};d.RESET="affix affix-top affix-bottom",d.DEFAULTS={offset:0},d.prototype.getPinnedOffset=function(){if(this.pinnedOffset){return this.pinnedOffset}this.$element.removeClass(d.RESET).addClass("affix");var b=this.$window.scrollTop(),g=this.$element.offset();return this.pinnedOffset=g.top-b},d.prototype.checkPositionWithEventLoop=function(){setTimeout(e.proxy(this.checkPosition,this),1)},d.prototype.checkPosition=function(){if(this.$element.is(":visible")){var r=e(document).height(),q=this.$window.scrollTop(),p=this.$element.offset(),o=this.options.offset,n=o.top,m=o.bottom;"top"==this.affixed&&(p.top+=q),"object"!=typeof o&&(m=n=o),"function"==typeof n&&(n=o.top(this.$element)),"function"==typeof m&&(m=o.bottom(this.$element));var l=null!=this.unpin&&q+this.unpin<=p.top?!1:null!=m&&p.top+this.$element.height()>=r-m?"bottom":null!=n&&n>=q?"top":!1;if(this.affixed!==l){this.unpin&&this.$element.css("top","");var b="affix"+(l?"-"+l:""),a=e.Event(b+".bs.affix");this.$element.trigger(a),a.isDefaultPrevented()||(this.affixed=l,this.unpin="bottom"==l?this.getPinnedOffset():null,this.$element.removeClass(d.RESET).addClass(b).trigger(e.Event(b.replace("affix","affixed"))),"bottom"==l&&this.$element.offset({top:r-m-this.$element.height()}))}}};var f=e.fn.affix;e.fn.affix=function(a){return this.each(function(){var g=e(this),c=g.data("bs.affix"),b="object"==typeof a&&a;c||g.data("bs.affix",c=new d(this,b)),"string"==typeof a&&c[a]()})},e.fn.affix.Constructor=d,e.fn.affix.noConflict=function(){return e.fn.affix=f,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var a=e(this),g=a.data();g.offset=g.offset||{},g.offsetBottom&&(g.offset.bottom=g.offsetBottom),g.offsetTop&&(g.offset.top=g.offsetTop),a.affix(g)})})}(jQuery);!function(b){"function"==typeof define&&define.amd?define(["./blueimp-helper"],b):(window.blueimp=window.blueimp||{},window.blueimp.Gallery=b(window.blueimp.helper||window.jQuery))}(function(d){function c(b,e){return void 0===document.body.style.maxHeight?null:this&&this.options===c.prototype.options?b&&b.length?(this.list=b,this.num=b.length,this.initOptions(e),void this.initialize()):void this.console.log("blueimp Gallery: No or empty list provided as first argument.",b):new c(b,e)}return d.extend(c.prototype,{options:{container:"#blueimp-gallery",slidesContainer:"div",titleElement:"h3",displayClass:"blueimp-gallery-display",controlsClass:"blueimp-gallery-controls",singleClass:"blueimp-gallery-single",leftEdgeClass:"blueimp-gallery-left",rightEdgeClass:"blueimp-gallery-right",playingClass:"blueimp-gallery-playing",slideClass:"slide",slideLoadingClass:"slide-loading",slideErrorClass:"slide-error",slideContentClass:"slide-content",toggleClass:"toggle",prevClass:"prev",nextClass:"next",closeClass:"close",playPauseClass:"play-pause",typeProperty:"type",titleProperty:"title",urlProperty:"href",displayTransition:!0,clearSlides:!0,stretchImages:!1,toggleControlsOnReturn:!0,toggleSlideshowOnSpace:!0,enableKeyboardNavigation:!0,closeOnEscape:!0,closeOnSlideClick:!0,closeOnSwipeUpOrDown:!0,emulateTouchEvents:!0,stopTouchEventsPropagation:!1,hidePageScrollbars:!0,disableScroll:!0,carousel:!1,continuous:!0,unloadElements:!0,startSlideshow:!1,slideshowInterval:5000,index:0,preloadRange:2,transitionSpeed:400,slideshowTransitionSpeed:void 0,event:void 0,onopen:void 0,onopened:void 0,onslide:void 0,onslideend:void 0,onslidecomplete:void 0,onclose:void 0,onclosed:void 0},carouselOptions:{hidePageScrollbars:!1,toggleControlsOnReturn:!1,toggleSlideshowOnSpace:!1,enableKeyboardNavigation:!1,closeOnEscape:!1,closeOnSlideClick:!1,closeOnSwipeUpOrDown:!1,disableScroll:!1,startSlideshow:!0},console:window.console&&"function"==typeof window.console.log?window.console:{log:function(){}},support:function(a){var h={touch:void 0!==window.ontouchstart||window.DocumentTouch&&document instanceof DocumentTouch},g={webkitTransition:{end:"webkitTransitionEnd",prefix:"-webkit-"},MozTransition:{end:"transitionend",prefix:"-moz-"},OTransition:{end:"otransitionend",prefix:"-o-"},transition:{end:"transitionend",prefix:""}},f=function(){var b,j,i=h.transition;document.body.appendChild(a),i&&(b=i.name.slice(0,-9)+"ransform",void 0!==a.style[b]&&(a.style[b]="translateZ(0)",j=window.getComputedStyle(a).getPropertyValue(i.prefix+"transform"),h.transform={prefix:i.prefix,name:b,translate:!0,translateZ:!!j&&"none"!==j})),void 0!==a.style.backgroundSize&&(h.backgroundSize={},a.style.backgroundSize="contain",h.backgroundSize.contain="contain"===window.getComputedStyle(a).getPropertyValue("background-size"),a.style.backgroundSize="cover",h.backgroundSize.cover="cover"===window.getComputedStyle(a).getPropertyValue("background-size")),document.body.removeChild(a)};return function(b,i){var e;for(e in i){if(i.hasOwnProperty(e)&&void 0!==a.style[e]){b.transition=i[e],b.transition.name=e;break}}}(h,g),document.body?f():d(document).on("DOMContentLoaded",f),h}(document.createElement("div")),requestAnimationFrame:window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame,initialize:function(){return this.initStartIndex(),this.initWidget()===!1?!1:(this.initEventListeners(),this.onslide(this.index),this.ontransitionend(),void (this.options.startSlideshow&&this.play()))},slide:function(h,g){window.clearTimeout(this.timeout);var l,k,j,i=this.index;if(i!==h&&1!==this.num){if(g||(g=this.options.transitionSpeed),this.support.transition){for(this.options.continuous||(h=this.circle(h)),l=Math.abs(i-h)/(i-h),this.options.continuous&&(k=l,l=-this.positions[this.circle(h)]/this.slideWidth,l!==k&&(h=-l*this.num+h)),j=Math.abs(i-h)-1;j;){j-=1,this.move(this.circle((h>i?h:i)-j-1),this.slideWidth*l,0)}h=this.circle(h),this.move(i,this.slideWidth*l,g),this.move(h,0,g),this.options.continuous&&this.move(this.circle(h-l),-(this.slideWidth*l),0)}else{h=this.circle(h),this.animate(i*-this.slideWidth,h*-this.slideWidth,g)}this.onslide(h)}},getIndex:function(){return this.index},getNumber:function(){return this.num},prev:function(){(this.options.continuous||this.index)&&this.slide(this.index-1)},next:function(){(this.options.continuous||this.index<this.num-1)&&this.slide(this.index+1)},play:function(f){var e=this;window.clearTimeout(this.timeout),this.interval=f||this.options.slideshowInterval,this.elements[this.index]>1&&(this.timeout=this.setTimeout(!this.requestAnimationFrame&&this.slide||function(b,g){e.animationFrameId=e.requestAnimationFrame.call(window,function(){e.slide(b,g)})},[this.index+1,this.options.slideshowTransitionSpeed],this.interval)),this.container.addClass(this.options.playingClass)},pause:function(){window.clearTimeout(this.timeout),this.interval=null,this.container.removeClass(this.options.playingClass)},add:function(f){var e;for(f.concat||(f=Array.prototype.slice.call(f)),this.list.concat||(this.list=Array.prototype.slice.call(this.list)),this.list=this.list.concat(f),this.num=this.list.length,this.num>2&&null===this.options.continuous&&(this.options.continuous=!0,this.container.removeClass(this.options.leftEdgeClass)),this.container.removeClass(this.options.rightEdgeClass).removeClass(this.options.singleClass),e=this.num-f.length;e<this.num;e+=1){this.addSlide(e),this.positionSlide(e)}this.positions.length=this.num,this.initSlides(!0)},resetSlides:function(){this.slidesContainer.empty(),this.slides=[]},handleClose:function(){var b=this.options;this.destroyEventListeners(),this.pause(),this.container[0].style.display="none",this.container.removeClass(b.displayClass).removeClass(b.singleClass).removeClass(b.leftEdgeClass).removeClass(b.rightEdgeClass),b.hidePageScrollbars&&(document.body.style.overflow=this.bodyOverflowStyle),this.options.clearSlides&&this.resetSlides(),this.options.onclosed&&this.options.onclosed.call(this)},close:function(){var f=this,e=function(a){a.target===f.container[0]&&(f.container.off(f.support.transition.end,e),f.handleClose())};this.options.onclose&&this.options.onclose.call(this),this.support.transition&&this.options.displayTransition?(this.container.on(this.support.transition.end,e),this.container.removeClass(this.options.displayClass)):this.handleClose()},circle:function(b){return(this.num+b%this.num)%this.num},move:function(f,e,g){this.translateX(f,e,g),this.positions[f]=e},translate:function(i,h,n,m){var l=this.slides[i].style,k=this.support.transition,j=this.support.transform;l[k.name+"Duration"]=m+"ms",l[j.name]="translate("+h+"px, "+n+"px)"+(j.translateZ?" translateZ(0)":"")},translateX:function(f,e,g){this.translate(f,e,0,g)},translateY:function(f,e,g){this.translate(f,0,e,g)},animate:function(h,g,l){if(!l){return void (this.slidesContainer[0].style.left=g+"px")}var k=this,j=(new Date).getTime(),i=window.setInterval(function(){var a=(new Date).getTime()-j;return a>l?(k.slidesContainer[0].style.left=g+"px",k.ontransitionend(),void window.clearInterval(i)):void (k.slidesContainer[0].style.left=(g-h)*(Math.floor(a/l*100)/100)+h+"px")},4)},preventDefault:function(b){b.preventDefault?b.preventDefault():b.returnValue=!1},stopPropagation:function(b){b.stopPropagation?b.stopPropagation():b.cancelBubble=!0},onresize:function(){this.initSlides(!0)},onmousedown:function(b){b.which&&1===b.which&&"VIDEO"!==b.target.nodeName&&(b.preventDefault(),(b.originalEvent||b).touches=[{pageX:b.pageX,pageY:b.pageY}],this.ontouchstart(b))},onmousemove:function(b){this.touchStart&&((b.originalEvent||b).touches=[{pageX:b.pageX,pageY:b.pageY}],this.ontouchmove(b))},onmouseup:function(b){this.touchStart&&(this.ontouchend(b),delete this.touchStart)},onmouseout:function(a){if(this.touchStart){var f=a.target,e=a.relatedTarget;(!e||e!==f&&!d.contains(f,e))&&this.onmouseup(a)}},ontouchstart:function(f){this.options.stopTouchEventsPropagation&&this.stopPropagation(f);var e=(f.originalEvent||f).touches[0];this.touchStart={x:e.pageX,y:e.pageY,time:Date.now()},this.isScrolling=void 0,this.touchDelta={}},ontouchmove:function(h){this.options.stopTouchEventsPropagation&&this.stopPropagation(h);var g,l,k=(h.originalEvent||h).touches[0],j=(h.originalEvent||h).scale,i=this.index;if(!(k.length>1||j&&1!==j)){if(this.options.disableScroll&&h.preventDefault(),this.touchDelta={x:k.pageX-this.touchStart.x,y:k.pageY-this.touchStart.y},g=this.touchDelta.x,void 0===this.isScrolling&&(this.isScrolling=this.isScrolling||Math.abs(g)<Math.abs(this.touchDelta.y)),this.isScrolling){this.options.closeOnSwipeUpOrDown&&this.translateY(i,this.touchDelta.y+this.positions[i],0)}else{for(h.preventDefault(),window.clearTimeout(this.timeout),this.options.continuous?l=[this.circle(i+1),i,this.circle(i-1)]:(this.touchDelta.x=g/=!i&&g>0||i===this.num-1&&0>g?Math.abs(g)/this.slideWidth+1:1,l=[i],i&&l.push(i-1),i<this.num-1&&l.unshift(i+1));l.length;){i=l.pop(),this.translateX(i,g+this.positions[i],0)}}}},ontouchend:function(z){this.options.stopTouchEventsPropagation&&this.stopPropagation(z);var y,x,w,v,u,t=this.index,s=this.options.transitionSpeed,r=this.slideWidth,q=Number(Date.now()-this.touchStart.time)<250,p=q&&Math.abs(this.touchDelta.x)>20||Math.abs(this.touchDelta.x)>r/2,o=!t&&this.touchDelta.x>0||t===this.num-1&&this.touchDelta.x<0,n=!p&&this.options.closeOnSwipeUpOrDown&&(q&&Math.abs(this.touchDelta.y)>20||Math.abs(this.touchDelta.y)>this.slideHeight/2);this.options.continuous&&(o=!1),y=this.touchDelta.x<0?-1:1,this.isScrolling?n?this.close():this.translateY(t,0,s):p&&!o?(x=t+y,w=t-y,v=r*y,u=-r*y,this.options.continuous?(this.move(this.circle(x),v,0),this.move(this.circle(t-2*y),u,0)):x>=0&&x<this.num&&this.move(x,v,0),this.move(t,this.positions[t]+v,s),this.move(this.circle(w),this.positions[this.circle(w)]+v,s),t=this.circle(w),this.onslide(t)):this.options.continuous?(this.move(this.circle(t-1),-r,s),this.move(t,0,s),this.move(this.circle(t+1),r,s)):(t&&this.move(t-1,-r,s),this.move(t,0,s),t<this.num-1&&this.move(t+1,r,s))},ontouchcancel:function(b){this.touchStart&&(this.ontouchend(b),delete this.touchStart)},ontransitionend:function(f){var e=this.slides[this.index];f&&e!==f.target||(this.interval&&this.play(),this.setTimeout(this.options.onslideend,[this.index,e]))},oncomplete:function(a){var h,g=a.target||a.srcElement,f=g&&g.parentNode;g&&f&&(h=this.getNodeIndex(f),d(f).removeClass(this.options.slideLoadingClass),"error"===a.type?(d(f).addClass(this.options.slideErrorClass),this.elements[h]=3):this.elements[h]=2,g.clientHeight>this.container[0].clientHeight&&(g.style.maxHeight=this.container[0].clientHeight),this.interval&&this.slides[this.index]===f&&this.play(),this.setTimeout(this.options.onslidecomplete,[h,f]))},onload:function(b){this.oncomplete(b)},onerror:function(b){this.oncomplete(b)},onkeydown:function(b){switch(b.which||b.keyCode){case 13:this.options.toggleControlsOnReturn&&(this.preventDefault(b),this.toggleControls());break;case 27:this.options.closeOnEscape&&this.close();break;case 32:this.options.toggleSlideshowOnSpace&&(this.preventDefault(b),this.toggleSlideshow());break;case 37:this.options.enableKeyboardNavigation&&(this.preventDefault(b),this.prev());break;case 39:this.options.enableKeyboardNavigation&&(this.preventDefault(b),this.next())}},handleClick:function(a){var j=this.options,i=a.target||a.srcElement,h=i.parentNode,g=function(e){return d(i).hasClass(e)||d(h).hasClass(e)};g(j.toggleClass)?(this.preventDefault(a),this.toggleControls()):g(j.prevClass)?(this.preventDefault(a),this.prev()):g(j.nextClass)?(this.preventDefault(a),this.next()):g(j.closeClass)?(this.preventDefault(a),this.close()):g(j.playPauseClass)?(this.preventDefault(a),this.toggleSlideshow()):h===this.slidesContainer[0]?(this.preventDefault(a),j.closeOnSlideClick?this.close():this.toggleControls()):h.parentNode&&h.parentNode===this.slidesContainer[0]&&(this.preventDefault(a),this.toggleControls())},onclick:function(b){return this.options.emulateTouchEvents&&this.touchDelta&&(Math.abs(this.touchDelta.x)>20||Math.abs(this.touchDelta.y)>20)?void delete this.touchDelta:this.handleClick(b)},updateEdgeClasses:function(b){b?this.container.removeClass(this.options.leftEdgeClass):this.container.addClass(this.options.leftEdgeClass),b===this.num-1?this.container.addClass(this.options.rightEdgeClass):this.container.removeClass(this.options.rightEdgeClass)},handleSlide:function(b){this.options.continuous||this.updateEdgeClasses(b),this.loadElements(b),this.options.unloadElements&&this.unloadElements(b),this.setTitle(b)},onslide:function(b){this.index=b,this.handleSlide(b),this.setTimeout(this.options.onslide,[b,this.slides[b]])},setTitle:function(f){var e=this.slides[f].firstChild.title,g=this.titleElement;g.length&&(this.titleElement.empty(),e&&g[0].appendChild(document.createTextNode(e)))},setTimeout:function(f,e,h){var g=this;return f&&window.setTimeout(function(){f.apply(g,e||[])},h||0)},imageFactory:function(t,s){var r,q,p,o=this,n=this.imagePrototype.cloneNode(!1),m=t,l=this.options.stretchImages,a=function(e){if(!r){if(e={type:e.type,target:q},!q.parentNode){return o.setTimeout(a,[e])}r=!0,d(n).off("load error",a),l&&"load"===e.type&&(q.style.background='url("'+m+'") center no-repeat',q.style.backgroundSize=l),s(e)}};return"string"!=typeof m&&(m=this.getItemProperty(t,this.options.urlProperty),p=this.getItemProperty(t,this.options.titleProperty)),l===!0&&(l="contain"),l=this.support.backgroundSize&&this.support.backgroundSize[l]&&l,l?q=this.elementPrototype.cloneNode(!1):(q=n,n.draggable=!1),p&&(q.title=p),d(n).on("load error",a),n.src=m,q},createElement:function(a,j){var i=a&&this.getItemProperty(a,this.options.typeProperty),h=i&&this[i.split("/")[0]+"Factory"]||this.imageFactory,g=a&&h.call(this,a,j);return g||(g=this.elementPrototype.cloneNode(!1),this.setTimeout(j,[{type:"error",target:g}])),d(g).addClass(this.options.slideContentClass),g},loadElement:function(a){this.elements[a]||(this.slides[a].firstChild?this.elements[a]=d(this.slides[a]).hasClass(this.options.slideErrorClass)?3:2:(this.elements[a]=1,d(this.slides[a]).addClass(this.options.slideLoadingClass),this.slides[a].appendChild(this.createElement(this.list[a],this.proxyListener))))},loadElements:function(f){var e,h=Math.min(this.num,2*this.options.preloadRange+1),g=f;for(e=0;h>e;e+=1){g+=e*(e%2===0?-1:1),g=this.circle(g),this.loadElement(g)}},unloadElements:function(f){var e,h,g;for(e in this.elements){this.elements.hasOwnProperty(e)&&(g=Math.abs(f-e),g>this.options.preloadRange&&g+this.options.preloadRange<this.num&&(h=this.slides[e],h.removeChild(h.firstChild),delete this.elements[e]))}},addSlide:function(f){var e=this.slidePrototype.cloneNode(!1);e.setAttribute("data-index",f),this.slidesContainer[0].appendChild(e),this.slides.push(e)},positionSlide:function(f){var e=this.slides[f];e.style.width=this.slideWidth+"px",this.support.transition&&(e.style.left=f*-this.slideWidth+"px",this.move(f,this.index>f?-this.slideWidth:this.index<f?this.slideWidth:0,0))},initSlides:function(a){var f,e;for(a||(this.positions=[],this.positions.length=this.num,this.elements={},this.imagePrototype=document.createElement("img"),this.elementPrototype=document.createElement("div"),this.slidePrototype=document.createElement("div"),d(this.slidePrototype).addClass(this.options.slideClass),this.slides=this.slidesContainer[0].children,f=this.options.clearSlides||this.slides.length!==this.num),this.slideWidth=this.container[0].offsetWidth,this.slideHeight=this.container[0].offsetHeight,this.slidesContainer[0].style.width=this.num*this.slideWidth+"px",f&&this.resetSlides(),e=0;e<this.num;e+=1){f&&this.addSlide(e),this.positionSlide(e)}this.options.continuous&&this.support.transition&&(this.move(this.circle(this.index-1),-this.slideWidth,0),this.move(this.circle(this.index+1),this.slideWidth,0)),this.support.transition||(this.slidesContainer[0].style.left=this.index*-this.slideWidth+"px")},toggleControls:function(){var b=this.options.controlsClass;this.container.hasClass(b)?this.container.removeClass(b):this.container.addClass(b)},toggleSlideshow:function(){this.interval?this.pause():this.play()},getNodeIndex:function(b){return parseInt(b.getAttribute("data-index"),10)},getNestedProperty:function(f,e){return e.replace(/\[(?:'([^']+)'|"([^"]+)"|(\d+))\]|(?:(?:^|\.)([^\.\[]+))/g,function(a,l,k,j,i){var h=i||l||k||j&&parseInt(j,10);a&&f&&(f=f[h])}),f},getDataProperty:function(a,h){if(a.getAttribute){var g=a.getAttribute("data-"+h.replace(/([A-Z])/g,"-$1").toLowerCase());if("string"==typeof g){if(/^(true|false|null|-?\d+(\.\d+)?|\{[\s\S]*\}|\[[\s\S]*\])$/.test(g)){try{return d.parseJSON(g)}catch(f){}}return g}}},getItemProperty:function(f,e){var g=f[e];return void 0===g&&(g=this.getDataProperty(f,e),void 0===g&&(g=this.getNestedProperty(f,e))),g},initStartIndex:function(){var f,e=this.options.index,g=this.options.urlProperty;if(e&&"number"!=typeof e){for(f=0;f<this.num;f+=1){if(this.list[f]===e||this.getItemProperty(this.list[f],g)===this.getItemProperty(e,g)){e=f;break}}}this.index=this.circle(parseInt(e,10)||0)},initEventListeners:function(){var a=this,f=this.slidesContainer,e=function(b){var g=a.support.transition&&a.support.transition.end===b.type?"transitionend":b.type;a["on"+g](b)};d(window).on("resize",e),d(document.body).on("keydown",e),this.container.on("click",e),this.support.touch?f.on("touchstart touchmove touchend touchcancel",e):this.options.emulateTouchEvents&&this.support.transition&&f.on("mousedown mousemove mouseup mouseout",e),this.support.transition&&f.on(this.support.transition.end,e),this.proxyListener=e},destroyEventListeners:function(){var a=this.slidesContainer,e=this.proxyListener;d(window).off("resize",e),d(document.body).off("keydown",e),this.container.off("click",e),this.support.touch?a.off("touchstart touchmove touchend touchcancel",e):this.options.emulateTouchEvents&&this.support.transition&&a.off("mousedown mousemove mouseup mouseout",e),this.support.transition&&a.off(this.support.transition.end,e)},handleOpen:function(){this.options.onopened&&this.options.onopened.call(this)},initWidget:function(){var a=this,e=function(b){b.target===a.container[0]&&(a.container.off(a.support.transition.end,e),a.handleOpen())};return this.container=d(this.options.container),this.container.length?(this.slidesContainer=this.container.find(this.options.slidesContainer).first(),this.slidesContainer.length?(this.titleElement=this.container.find(this.options.titleElement).first(),1===this.num&&this.container.addClass(this.options.singleClass),this.options.onopen&&this.options.onopen.call(this),this.support.transition&&this.options.displayTransition?this.container.on(this.support.transition.end,e):this.handleOpen(),this.options.hidePageScrollbars&&(this.bodyOverflowStyle=document.body.style.overflow,document.body.style.overflow="hidden"),this.container[0].style.display="block",this.initSlides(),void this.container.addClass(this.options.displayClass)):(this.console.log("blueimp Gallery: Slides container not found.",this.options.slidesContainer),!1)):(this.console.log("blueimp Gallery: Widget container not found.",this.options.container),!1)},initOptions:function(a){this.options=d.extend({},this.options),(a&&a.carousel||this.options.carousel&&(!a||a.carousel!==!1))&&d.extend(this.options,this.carouselOptions),d.extend(this.options,a),this.num<3&&(this.options.continuous=this.options.continuous?null:!1),this.support.transition||(this.options.emulateTouchEvents=!1),this.options.event&&this.preventDefault(this.options.event)}}),c}),function(b){"function"==typeof define&&define.amd?define(["./blueimp-helper","./blueimp-gallery"],b):b(window.blueimp.helper||window.jQuery,window.blueimp.Gallery)}(function(f,e){f.extend(e.prototype.options,{fullScreen:!1});var h=e.prototype.initialize,g=e.prototype.close;return f.extend(e.prototype,{getFullScreenElement:function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},requestFullScreen:function(b){b.requestFullscreen?b.requestFullscreen():b.webkitRequestFullscreen?b.webkitRequestFullscreen():b.mozRequestFullScreen?b.mozRequestFullScreen():b.msRequestFullscreen&&b.msRequestFullscreen()},exitFullScreen:function(){document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()},initialize:function(){h.call(this),this.options.fullScreen&&!this.getFullScreenElement()&&this.requestFullScreen(this.container[0])},close:function(){this.getFullScreenElement()===this.container[0]&&this.exitFullScreen(),g.call(this)}}),e}),function(b){"function"==typeof define&&define.amd?define(["./blueimp-helper","./blueimp-gallery"],b):b(window.blueimp.helper||window.jQuery,window.blueimp.Gallery)}(function(j,i){j.extend(i.prototype.options,{indicatorContainer:"ol",activeIndicatorClass:"active",thumbnailProperty:"thumbnail",thumbnailIndicators:!0});var p=i.prototype.initSlides,o=i.prototype.addSlide,n=i.prototype.resetSlides,m=i.prototype.handleClick,l=i.prototype.handleSlide,k=i.prototype.handleClose;return j.extend(i.prototype,{createIndicator:function(a){var t,s,r=this.indicatorPrototype.cloneNode(!1),q=this.getItemProperty(a,this.options.titleProperty),h=this.options.thumbnailProperty;return this.options.thumbnailIndicators&&(s=a.getElementsByTagName&&j(a).find("img")[0],s?t=s.src:h&&(t=this.getItemProperty(a,h)),t&&(r.style.backgroundImage='url("'+t+'")')),q&&(r.title=q),r},addIndicator:function(d){if(this.indicatorContainer.length){var c=this.createIndicator(this.list[d]);c.setAttribute("data-index",d),this.indicatorContainer[0].appendChild(c),this.indicators.push(c)}},setActiveIndicator:function(a){this.indicators&&(this.activeIndicator&&this.activeIndicator.removeClass(this.options.activeIndicatorClass),this.activeIndicator=j(this.indicators[a]),this.activeIndicator.addClass(this.options.activeIndicatorClass))},initSlides:function(b){b||(this.indicatorContainer=this.container.find(this.options.indicatorContainer),this.indicatorContainer.length&&(this.indicatorPrototype=document.createElement("li"),this.indicators=this.indicatorContainer[0].children)),p.call(this,b)},addSlide:function(b){o.call(this,b),this.addIndicator(b)},resetSlides:function(){n.call(this),this.indicatorContainer.empty(),this.indicators=[]},handleClick:function(e){var d=e.target||e.srcElement,f=d.parentNode;if(f===this.indicatorContainer[0]){this.preventDefault(e),this.slide(this.getNodeIndex(d))}else{if(f.parentNode!==this.indicatorContainer[0]){return m.call(this,e)}this.preventDefault(e),this.slide(this.getNodeIndex(f))}},handleSlide:function(b){l.call(this,b),this.setActiveIndicator(b)},handleClose:function(){this.activeIndicator&&this.activeIndicator.removeClass(this.options.activeIndicatorClass),k.call(this)}}),i}),function(b){"function"==typeof define&&define.amd?define(["./blueimp-helper","./blueimp-gallery"],b):b(window.blueimp.helper||window.jQuery,window.blueimp.Gallery)}(function(e,d){e.extend(d.prototype.options,{videoContentClass:"video-content",videoLoadingClass:"video-loading",videoPlayingClass:"video-playing",videoPosterProperty:"poster",videoSourcesProperty:"sources"});var f=d.prototype.handleSlide;return e.extend(d.prototype,{handleSlide:function(b){f.call(this,b),this.playingVideo&&this.playingVideo.pause()},videoFactory:function(L,K,J){var I,H,G,F,E,D=this,C=this.options,B=this.elementPrototype.cloneNode(!1),A=e(B),z=[{type:"error",target:B}],y=J||document.createElement("video"),x=this.getItemProperty(L,C.urlProperty),w=this.getItemProperty(L,C.typeProperty),v=this.getItemProperty(L,C.titleProperty),u=this.getItemProperty(L,C.videoPosterProperty),a=this.getItemProperty(L,C.videoSourcesProperty);if(A.addClass(C.videoContentClass),v&&(B.title=v),y.canPlayType){if(x&&w&&y.canPlayType(w)){y.src=x}else{for(;a&&a.length;){if(H=a.shift(),x=this.getItemProperty(H,C.urlProperty),w=this.getItemProperty(H,C.typeProperty),x&&w&&y.canPlayType(w)){y.src=x;break}}}}return u&&(y.poster=u,I=this.imagePrototype.cloneNode(!1),e(I).addClass(C.toggleClass),I.src=u,I.draggable=!1,B.appendChild(I)),G=document.createElement("a"),G.setAttribute("target","_blank"),J||G.setAttribute("download",v),G.href=x,y.src&&(y.controls=!0,(J||e(y)).on("error",function(){D.setTimeout(K,z)}).on("pause",function(){F=!1,A.removeClass(D.options.videoLoadingClass).removeClass(D.options.videoPlayingClass),E&&D.container.addClass(D.options.controlsClass),delete D.playingVideo,D.interval&&D.play()}).on("playing",function(){F=!1,A.removeClass(D.options.videoLoadingClass).addClass(D.options.videoPlayingClass),D.container.hasClass(D.options.controlsClass)?(E=!0,D.container.removeClass(D.options.controlsClass)):E=!1}).on("play",function(){window.clearTimeout(D.timeout),F=!0,A.addClass(D.options.videoLoadingClass),D.playingVideo=y}),e(G).on("click",function(b){D.preventDefault(b),F?y.pause():y.play()}),B.appendChild(J&&J.element||y)),B.appendChild(G),this.setTimeout(K,[{type:"load",target:B}]),B}}),d}),function(b){"function"==typeof define&&define.amd?define(["./blueimp-helper","./blueimp-gallery-video"],b):b(window.blueimp.helper||window.jQuery,window.blueimp.Gallery)}(function(g,f){if(!window.postMessage){return f}g.extend(f.prototype.options,{vimeoVideoIdProperty:"vimeo",vimeoPlayerUrl:"//player.vimeo.com/video/VIDEO_ID?api=1&player_id=PLAYER_ID",vimeoPlayerIdPrefix:"vimeo-player-",vimeoClickToPlay:!0});var j=f.prototype.textFactory||f.prototype.imageFactory,i=function(k,e,m,l){this.url=k,this.videoId=e,this.playerId=m,this.clickToPlay=l,this.element=document.createElement("div"),this.listeners={}},h=0;return g.extend(i.prototype,{canPlayType:function(){return !0},on:function(d,c){return this.listeners[d]=c,this},loadAPI:function(){for(var a,p,o=this,n="//"+("https"===location.protocol?"secure-":"")+"a.vimeocdn.com/js/froogaloop2.min.js",m=document.getElementsByTagName("script"),l=m.length,k=function(){!p&&o.playOnReady&&o.play(),p=!0};l;){if(l-=1,m[l].src===n){a=m[l];break}}a||(a=document.createElement("script"),a.src=n),g(a).on("load",k),m[0].parentNode.insertBefore(a,m[0]),/loaded|complete/.test(a.readyState)&&k()},onReady:function(){var b=this;this.ready=!0,this.player.addEvent("play",function(){b.hasPlayed=!0,b.onPlaying()}),this.player.addEvent("pause",function(){b.onPause()}),this.player.addEvent("finish",function(){b.onPause()}),this.playOnReady&&this.play()},onPlaying:function(){this.playStatus<2&&(this.listeners.playing(),this.playStatus=2)},onPause:function(){this.listeners.pause(),delete this.playStatus},insertIframe:function(){var b=document.createElement("iframe");b.src=this.url.replace("VIDEO_ID",this.videoId).replace("PLAYER_ID",this.playerId),b.id=this.playerId,this.element.parentNode.replaceChild(b,this.element),this.element=b},play:function(){var b=this;this.playStatus||(this.listeners.play(),this.playStatus=1),this.ready?!this.hasPlayed&&(this.clickToPlay||window.navigator&&/iP(hone|od|ad)/.test(window.navigator.platform))?this.onPlaying():this.player.api("play"):(this.playOnReady=!0,window.$f?this.player||(this.insertIframe(),this.player=$f(this.element),this.player.addEvent("ready",function(){b.onReady()})):this.loadAPI())},pause:function(){this.ready?this.player.api("pause"):this.playStatus&&(delete this.playOnReady,this.listeners.pause(),delete this.playStatus)}}),g.extend(f.prototype,{VimeoPlayer:i,textFactory:function(d,c){var e=this.getItemProperty(d,this.options.vimeoVideoIdProperty);return e?(h+=1,this.videoFactory(d,c,new i(this.options.vimeoPlayerUrl,e,this.options.vimeoPlayerIdPrefix+h,this.options.vimeoClickToPlay))):j.call(this,d,c)}}),f}),function(b){"function"==typeof define&&define.amd?define(["./blueimp-helper","./blueimp-gallery-video"],b):b(window.blueimp.helper||window.jQuery,window.blueimp.Gallery)}(function(f,e){if(!window.postMessage){return e}f.extend(e.prototype.options,{youTubeVideoIdProperty:"youtube",youTubePlayerVars:{wmode:"transparent"},youTubeClickToPlay:!0});var h=e.prototype.textFactory||e.prototype.imageFactory,g=function(i,d,j){this.videoId=i,this.playerVars=d,this.clickToPlay=j,this.element=document.createElement("div"),this.listeners={}};return f.extend(g.prototype,{canPlayType:function(){return !0},on:function(d,c){return this.listeners[d]=c,this},loadAPI:function(){var j,i=this,n=window.onYouTubeIframeAPIReady,m="//www.youtube.com/iframe_api",l=document.getElementsByTagName("script"),k=l.length;for(window.onYouTubeIframeAPIReady=function(){n&&n.apply(this),i.playOnReady&&i.play()};k;){if(k-=1,l[k].src===m){return}}j=document.createElement("script"),j.src=m,l[0].parentNode.insertBefore(j,l[0])},onReady:function(){this.ready=!0,this.playOnReady&&this.play()},onPlaying:function(){this.playStatus<2&&(this.listeners.playing(),this.playStatus=2)},onPause:function(){e.prototype.setTimeout.call(this,this.checkSeek,null,2000)},checkSeek:function(){(this.stateChange===YT.PlayerState.PAUSED||this.stateChange===YT.PlayerState.ENDED)&&(this.listeners.pause(),delete this.playStatus)},onStateChange:function(b){switch(b.data){case YT.PlayerState.PLAYING:this.hasPlayed=!0,this.onPlaying();break;case YT.PlayerState.PAUSED:case YT.PlayerState.ENDED:this.onPause()}this.stateChange=b.data},onError:function(b){this.listeners.error(b)},play:function(){var b=this;this.playStatus||(this.listeners.play(),this.playStatus=1),this.ready?!this.hasPlayed&&(this.clickToPlay||window.navigator&&/iP(hone|od|ad)/.test(window.navigator.platform))?this.onPlaying():this.player.playVideo():(this.playOnReady=!0,window.YT&&YT.Player?this.player||(this.player=new YT.Player(this.element,{videoId:this.videoId,playerVars:this.playerVars,events:{onReady:function(){b.onReady()},onStateChange:function(a){b.onStateChange(a)},onError:function(a){b.onError(a)}}})):this.loadAPI())},pause:function(){this.ready?this.player.pauseVideo():this.playStatus&&(delete this.playOnReady,this.listeners.pause(),delete this.playStatus)}}),f.extend(e.prototype,{YouTubePlayer:g,textFactory:function(d,c){var i=this.getItemProperty(d,this.options.youTubeVideoIdProperty);return i?this.videoFactory(d,c,new g(i,this.options.youTubePlayerVars,this.options.youTubeClickToPlay)):h.call(this,d,c)}}),e}),function(b){"function"==typeof define&&define.amd?define(["jquery","./blueimp-gallery"],b):b(window.jQuery,window.blueimp.Gallery)}(function(d,c){d(document).on("click","[data-gallery]",function(n){var m=d(this).data("gallery"),l=d(m),k=l.length&&l||d(c.prototype.options.container),j={onopen:function(){k.data("gallery",this).trigger("open")},onopened:function(){k.trigger("opened")},onslide:function(){k.trigger("slide",arguments)},onslideend:function(){k.trigger("slideend",arguments)},onslidecomplete:function(){k.trigger("slidecomplete",arguments)},onclose:function(){k.trigger("close")},onclosed:function(){k.trigger("closed").removeData("gallery")}},b=d.extend(k.data(),{container:k[0],index:this,event:n},j),a=d('[data-gallery="'+m+'"]');return b.filter&&(a=a.filter(b.filter)),new c(a,b)})});(function(a){if(typeof define==="function"&&define.amd){define(["jquery","./blueimp-gallery"],a)}else{a(window.jQuery,window.blueimp.Gallery)}}(function(a,b){}));
/*! AMA */
if(typeof AMA==="undefined"){AMA={}}AMA.config={enableDebug:false,logger:null,ignoreAborts:false,onAbort:function(a){}};AMA.envs={};AMA.namespace=function(b){var d=this,c=[],a=0;if(b.indexOf(".")>-1){c=b.split(".");for(a=(c[0]==="AMA")?1:0;a<c.length;a++){d[c[a]]=d[c[a]]||{};d=d[c[a]]}}else{d[b]=d[b]||{};d=d[b]}return d};AMA.enums=function(){var b={},a;if(typeof AMA.__enumCtr==="undefined"){AMA.__enumCtr=0}for(a=0;a<arguments.length;a++){b[arguments[a]]=AMA.__enumCtr++}return b};AMA.augment=function(e,d,a){if(!d){return e}if(typeof a==="undefined"){a=true}var b,c;for(b in d){if(!Object.prototype.hasOwnProperty.call(d,b)){continue}if(b=="__onAugment__"){continue}if(a||!(b in e)){e[b]=d[b]}}if(d.__onAugment__){d.__onAugment__(e)}return e};AMA.define=function(a,b){return AMA.extend(a,Object,b)};AMA.extend=function(e,d,c){if(!d){return e}var f=d.prototype,a=null;function b(){}b.prototype=f;a=new b();a.constructor=e;a.superclass=f;e.prototype=a;if(d!=Object&&f.constructor===Object.prototype.constructor){f.constructor=d}if(c){AMA.augment(a,c,true)}return e};AMA.log=function(e,b){if(!AMA.counter){AMA.counter=0}var a=AMA.config.logger;if(a&&typeof a.log==="function"){return a.log(e,b)}var c={info:"INFO",warning:"WARNING",error:"ERROR",debug:"DEBUG",abort:"ABORT"},d=b&&c[b]?c[b]+": ":"";e=d+e;if(window.console&&console.log){AMA.counter++;console.log(AMA.counter+" "+e)}return e};AMA.info=function(a){return AMA.log(a,"info")};AMA.warning=function(a){return AMA.log(a,"warning")};AMA.error=function(a){return AMA.log(a,"error")};AMA.debug=function(e,d){var c=true,b=AMA.config.debugMsgFilter;if(d&&b){c=false;for(var a=0;a<b.length;a++){if(b[a]===d){c=true;break}}}if(AMA.config.enableDebug&&c){return AMA.log(e,"debug")}return""};AMA.abort=function(a){if(AMA.config.ignoreAborts){return}AMA.log("Javascript execution aborted due to the following error: "+a);AMA.config.onAbort.call(this,a);throw a};AMA.assert=function(a,b){if(!a){AMA.abort(b)}return true};AMA.namespace("views");AMA.namespace("models");
/*! UI-LABS Envs */
(function(){var a={"amssb01-web.amafib.com":{type:"DEV",securityHostUrl:"https://amssb01-security.amafib.com/api/v1",apiHostUrl:"https://amssb01-api.amafib.com/v1",secureProtocol:true},"amssb02-web.amafib.com":{type:"DEV",securityHostUrl:"https://amssb02-security.amafib.com/api/v1",apiHostUrl:"https://amssb02-api.amafib.com/v1",secureProtocol:true},"coredev03-web.amafib.com":{type:"DEV",securityHostUrl:"https://coredev03-security.amafib.com/api/v1",apiHostUrl:"https://coredev03-api.amafib.com/v1",secureProtocol:true},"coreqa01-web.amafib.com":{type:"DEV",securityHostUrl:"https://coreqa01-security.amafib.com/api/v1",apiHostUrl:"https://coreqa01-api.amafib.com/v1",secureProtocol:true},"coreqa03-web.amafib.com":{type:"DEV",securityHostUrl:"https://coreqa03-security.amafib.com/api/v1",apiHostUrl:"https://coreqa03-api.amafib.com/v1",secureProtocol:true},"coreint03-web.amafib.com":{type:"DEV",securityHostUrl:"https://coreint03-security.amafib.com/api/v1",apiHostUrl:"https://coreint03-api.amafib.com/v1",secureProtocol:true},"labsdevsp01-web.amafib.com":{type:"DEV",securityHostUrl:"https://labsdevsp01-security.amafib.com/api/v1",apiHostUrl:"https://labsdevsp01-api.amafib.com/v1",secureProtocol:true},"labsdevsp02-web.amafib.com":{type:"DEV",securityHostUrl:"https://labsdevsp02-security.amafib.com/api/v1",apiHostUrl:"https://labsdevsp02-api.amafib.com/v1",secureProtocol:true},"labsqasp01-web.amafib.com":{type:"DEV",securityHostUrl:"https://labsqasp01-security.amafib.com/api/v1",apiHostUrl:"https://labsqasp01-api.amafib.com/v1",secureProtocol:true},"labsqasp02-web.amafib.com":{type:"DEV",securityHostUrl:"https://labsqasp02-security.amafib.com/api/v1",apiHostUrl:"https://labsqasp02-api.amafib.com/v1",secureProtocol:true},localhost:{type:"DEV",securityHostUrl:"http://localhost:8080/core/security/api/v1",apiHostUrl:"http://localhost:8080/core/api/v1",secureProtocol:false},"10.45.222.109":{type:"DEV",securityHostUrl:"http://10.45.222.109:8080/core/security/api/v1",apiHostUrl:"http://10.45.222.109:8080/core/api/v1",secureProtocol:false}};_.extend(AMA.envs,a)})();
/*! Util */
AMA.Util={deepClone:function(b){var a=JSON.stringify(b);return JSON.parse(a)},S4:function(){return(((1+Math.random())*65536)|0).toString(16).substring(1)},guid:function(){return(this.S4()+this.S4()+"-"+this.S4()+"-"+this.S4()+"-"+this.S4()+"-"+this.S4()+this.S4()+this.S4())},eventTarget:function(c,b){var a;if(c==null){c=b.event}if(c.target!=null){a=c.target}else{if(c.srcElement){a=c.srcElement}}return a},prettyPrintJson:function(a){var b=JSON.stringify(a);return this.addSpacesToJsonString(b)},addSpacesToJsonString:function(a){return a.replace(/,/g,", ")},replaceQuestionMarks:function(e,a,d){if(d==null){d=/\?/}var c=e;for(var b=0;b<a.length;b++){c=c.replace(d,a[b])}return c},itemExistsInArray:function(a,b){if(typeof(a)!=="undefined"&&typeof(b)!=="undefined"&&$.inArray(a,b)>-1){return true}return false},objectKeyCount:function(b){if(b==null){return 0}if(b.__count__!==undefined){return b.__count__}var d=0;for(var a in b){if(b.hasOwnProperty(a)){d+=1}}return d},formattedLastBackup:function(b){if(b.synctimes.length==0){return Strings.never}var a=b.synctimes[0];return this.formatDateAndTime(a)},formatDateAndTime:function(b){var a=new Date(b);return this.formatDate(a,AMA.config.dateAndTimeFormat).replace("@","at")},locationFormat:function(d,b){var f="";var a="";if(!AMA.models.capabilities.canRead("locationHistory")){b=null}if(d!=null&&d!=""){var c=new Date(d);if(b!=null){var e=new Date(b);if(c.getDate()==e.getDate()){if(c.getHours()==e.getHours()&&c.getMinutes()==e.getMinutes()){return this.formatDateAndTime(c,AMA.config.dateAndTimeFormat)}}return(this.formatDateAndTime(c,AMA.config.dateAndTimeFormat)+" - "+this.formatDateAndTime(e,AMA.config.dateAndTimeFormat))}return this.formatDateAndTime(c,AMA.config.dateAndTimeFormat)}return f},dateFormat:function(b){var c="";if(b!=null&&b!=""){var a=new Date(parseInt(b));c=this.formatDate(a,AMA.config.dateFormat,true)}return c},timeFormat:function(c){var b="";if(c!=null&&c!=""){var a=new Date(parseInt(c));b=this.formatDate(a,AMA.config.timeFormat,true)}return b},timeElapsed:function(d,t,b){b=b||{};b.depth=b.depth||2;b.strings=b.strings||{year:"yr.",month:"month",week:"week",day:"day",hour:"hr.",minute:"min."};var e=function(w,v,u){if(w>0){u.push(w+" "+v+" ")}};var g=60*1000;var a=60*g;var n=24*a;var m=7*n;var s=30*n;var h=12*s;var o=[];var l=t-d;var q=Math.floor(l/h);e(q,b.strings.year,o);l=l-(q*h);var i=Math.floor(l/s);e(i,b.strings.month,o);l=l-(i*s);var f=Math.floor(l/m);e(f,b.strings.week,o);l=l-(f*m);var c=Math.floor(l/n);e(c,b.strings.day,o);l=l-(c*n);var r=Math.floor(l/a);e(r,b.strings.hour,o);l=l-(r*a);var p=Math.floor(l/g);e(p,b.strings.minute,o);var k="";for(var j=0;j<o.length;j++){k+=o[j];if(j>=(b.depth-1)){break}}k=(k.length>0)?k+"Ago":"Less than a "+b.strings.minute+" Ago";return k},arraySubtraction:function(d,c){var e={};for(var b=0;b<c.length;b++){e[c[b]]=c[b]}var a=[];for(var b=0;b<d.length;b++){if(e[d[b]]==null){a.push(d[b])}}return a},formatPhone:function(a){a=a.replace(/[^0-9]/g,"");return("("+a.substring(0,3)+") "+a.substring(3,6)+"-"+a.substring(6))},isType:function(a,b){return((a&b)==b)},plusToggle:function(c,a){var b=this.eventTarget(c,window);var d=$J("#"+a);d.toggleClass("invisible");$J(b).toggleClass("lp_plus");$J(b).toggleClass("lp_minus")},plusOpen:function(a,b){$J("#"+a).removeClass("invisible");$J("#"+b).removeClass("lp_plus");$J("#"+b).addClass("lp_minus")},addUnitToFileSize:function(a){a=parseFloat(a);if(a==null||a==""){return""}if(a<1024){return a+"B"}if(a<1048576){return(a/1024)+"KB"}return(a/1073741824)+"GB"},validateEmail:function(b){var a=/^[-a-z0-9~!$%^&*_=+}{\'?]+(\.[-a-z0-9~!$%^&*_=+}{\'?]+)*@([a-z0-9_][-a-z0-9_]*(\.[-a-z0-9_]+)*\.(aero|arpa|biz|com|coop|edu|gov|info|int|mil|museum|name|net|org|pro|travel|mobi|[a-z][a-z])|([0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}))(:[0-9]{1,5})?$/i;return a.test(b)},validDate:function(e,b,c){var f=parseInt(e);var j=parseInt(b);var h=parseInt(c);var g=(((h%4==0)&&((!(h%100==0))||(h%400==0)))?29:28);var a=[];for(var d=1;d<=12;d++){a[d]=31;if(d==4||d==6||d==9||d==11){a[d]=30}if(d==2){a[d]=g}}return(j<=a[f])},MONTH_NAMES:["January","February","March","April","May","June","July","August","September","October","November","December","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],FRENCH_MONTH_NAMES:["janv.","fvr.","mars","avril","mai","juin","juil.","aot","sept.","oct.","nov.","dc."],DAY_NAMES:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sun","Mon","Tue","Wed","Thu","Fri","Sat"],LZ:function(a){return(a<0||a>9?"":"0")+a},formatDate:function(P,J,a){J=J+"";var p="";var A=0;var O="";var j="";var o="",l=0,L=0,t=0,q=0,C=0,v=0,b=0,N="",e="",T="";b=P.getTimezoneOffset()/60;if(b<0){N="+"}else{N="-"}b=Math.abs(b);if(b<10){e="0"+Math.floor(b)}else{e=Math.floor(b)}T=(b-Math.floor(b))*60;if(T<10){T="0"+T}if(a!=null&&a){o=P.getUTCFullYear()+"";l=P.getUTCMonth()+1;L=P.getUTCDate();t=P.getUTCDay();q=P.getUTCHours();C=P.getUTCMinutes();v=P.getUTCSeconds()}else{o=P.getFullYear()+"";l=P.getMonth()+1;L=P.getDate();t=P.getDay();q=P.getHours();C=P.getMinutes();v=P.getSeconds()}var x,z,g,w,Q,i,I,G,D,u,S,q,R,n,f,F;var B=new Object();if(o.length<4){o=""+(o-0+1900)}B.y=""+o;B.yyyy=o;B.yy=o.substring(2,4);B.M=l;B.MM=this.LZ(l);B.MMM=this.MONTH_NAMES[l-1];B.NNN=this.MONTH_NAMES[l+11];B.FFF=this.FRENCH_MONTH_NAMES[l-1];B.d=L;B.dd=this.LZ(L);B.E=this.DAY_NAMES[t+7];B.EE=this.DAY_NAMES[t];B.H=q;B.HH=this.LZ(q);if(q==0){B.h=12}else{if(q>12){B.h=q-12}else{B.h=q}}B.hh=this.LZ(B.h);if(q>11){B.K=q-12}else{B.K=q}B.k=q;B.KK=this.LZ(B.K);B.kk=this.LZ(B.k);if(q>11){B.a="PM"}else{B.a="AM"}B.m=C;B.mm=this.LZ(C);B.s=v;B.ss=this.LZ(v);B.Z="UTC"+N+e+":"+T;var r=false;while(A<J.length){O=J.charAt(A);j="";while((J.charAt(A)==O)&&(A<J.length)){j+=J.charAt(A++)}if(j=="'"){r=!r}else{if(!r&&B[j]!=null){p=p+B[j]}else{p=p+j}}}return p},escapeSpecialCharacters:function(b){b=""+b;var a=b.replace(/</g,"&lt;");a=a.replace(/>/g,"&gt;");return a},unEscapeSpecialCharacters:function(b){b=""+b;var a=b.replace(/&lt;/g,"<");a=a.replace(/&gt;/g,">");return a},getCookie:function(a){if(document.cookie.length>0){c_start=document.cookie.indexOf(a+"=");if(c_start!=-1){c_start=c_start+a.length+1;c_end=document.cookie.indexOf(";",c_start);if(c_end==-1){c_end=document.cookie.length}return unescape(document.cookie.substring(c_start,c_end))}}return""},deleteCookie:function(a){document.cookie=a+"=; expires=Fri, 31 Dec 1999 23:59:59 GMT;"},setCookie:function(b,c,a){var d=new Date();d.setDate(d.getDate()+a);document.cookie=b+"="+escape(c)+((a==null)?"":";expires="+d.toGMTString())},getBrowserType:function(){var a=navigator.userAgent;if(a.toLowerCase().indexOf("msie")!=-1){return"IE"}else{if(a.toLowerCase().indexOf("chrome")!=-1){return"Chrome"}else{if(a.toLowerCase().indexOf("safari")!=-1){return"Safari"}else{if(a.toLowerCase().indexOf("firefox")!=-1){return"Firefox"}else{return"Other"}}}}},isIEVersionLessThan:function(b){b=b!=null?b:8;if(/MSIE (\d+\.\d+);/.test(navigator.userAgent)){var a=new Number(RegExp.$1);if(a<b){return true}}},replaceConsecutiveSpaces:function(a){var c="";var d=false;for(var b=0;b<a.length;b++){if(a.charAt(b)!=" "||!d){c=c+a.charAt(b)}d=(a.charAt(b)==" ")}return c},spaceConcatAndTrim:function(a,c){var b=$J.trim(c);if(b!=""&&b.charAt(0)==","){return $J.trim($J.trim(a)+b)}else{return $J.trim($J.trim(a)+" "+b)}},combineNames:function(f,a,c,d,e){var b=d==null?"":d+" ";b+=f+" "+a+" "+c;b+=e==null?"":" "+e;b=this.replaceConsecutiveSpaces($J.trim(b));return b},parseFullName:function(b){var l=b;var a=this.removePreNominalTitle(l);var c=a[0];l=a[1];var n=this.removePostNominalTitle(l);var m=n[0];l=n[1];var f=l.indexOf(",");var h=null;if(f!=-1){var k=l.substring(0,f);var j=l.substring(f+1,l.length);l=this.spaceConcatAndTrim(j,k);h=j.split(/\s+/);h=this.removeEmptyStrings(h);h.push(k)}else{h=l.split(/\s+/);h=this.removeEmptyStrings(h)}var e=h.length;var g=new Array(5);g[0]="";g[1]="";g[2]="";g[3]="";g[4]="";if(c!=""){g[0]=c}if(e>0){g[1]=h[0]}if(e>1){g[3]=h[e-1];for(var d=1;d<e-1;d++){g[2]=this.spaceConcatAndTrim(g[2],h[d])}}if(m!=""){g[4]=m}return g},removePreNominalTitle:function(b){var a=b.match(/(^|\b)(Doctor|Dr(\.)?)(\s)+/i);if(a!=null&&a.length>0){return this.chop(a[0],b)}a=b.match(/(^|\b)(Miss|Ms(\.)?)(\s)+/i);if(a!=null&&a.length>0){return this.chop(a[0],b)}a=b.match(/(^|\b)(M(r|s)(\.)?)(\s)+/i);if(a!=null&&a.length>0){return this.chop(a[0],b)}a=b.match(/(^|\b)(Professor|Prof(\.)?)(\s)+/i);if(a!=null&&a.length>0){return this.chop(a[0],b)}return this.chop("",b)},removePostNominalTitle:function(d){var c="";var b=d;var a=null;var f=-1;a=b.match(/((?:\b)|,)(\s)*(Senior|Sr(\.)?)(?=($|\s|,))/i);if(a!=null&&a.length>0){if(d.lastIndexOf(a[0])>f){c=this.spaceConcatAndTrim(c,a[0]);b=this.removeLast(a[0],b)}f=d.lastIndexOf(a[0])}a=b.match(/((?:\b)|,)(\s)*(Junior|Jr(\.)?)(?=($|\s|,))/i);if(a!=null&&a.length>0){if(d.lastIndexOf(a[0])>f){c=this.spaceConcatAndTrim(c,a[0]);b=this.removeLast(a[0],b)}f=d.lastIndexOf(a[0])}a=b.match(/((?:\b)|,)(\s)*I{1,3}(\.)?(?=($|\s|,))/i);if(a!=null&&a.length>0){if(d.lastIndexOf(a[0])>f){c=this.spaceConcatAndTrim(c,a[0]);b=this.removeLast(a[0],b)}f=d.lastIndexOf(a[0])}a=b.match(/((?:\b)|,)(\s)*(M|(Ph)|J)(\.)?D(\.)?(?=($|\s|,))/i);if(a!=null&&a.length>0){if(d.lastIndexOf(a[0])>f){c=this.spaceConcatAndTrim(c,a[0]);b=this.removeLast(a[0],b)}f=d.lastIndexOf(a[0])}a=b.match(/((?:\b)|,)(\s)*((Cell)|(\(c\))|(Office)|(\(o\))|(Mobile)|(\(m\))|(Home)|(\(h\))|(Work)|(\(w\)))(?=($|\s|,))/i);if(a!=null&&a.length>0){if(d.lastIndexOf(a[0])>f){c=this.spaceConcatAndTrim(c,a[0]);b=this.removeLast(a[0],b)}f=d.lastIndexOf(a[0])}var e=new Array(2);e[0]=c;e[1]=b;return e},chop:function(a,b){var c=new Array(2);c[0]=a;c[1]=this.remove(a,b);return c},removeLast:function(a,b){if(a.length==0){return b}var e=b.lastIndexOf(a);if(e==-1){return b}var d=b;var c=d.substring(0,e)+d.substring(e+a.length,d.length);return c},remove:function(a,b){if(a.length==0){return b}var e=b.indexOf(a);if(e==-1){return b}var d=b;var c=d.substring(0,e)+d.substring(e+a.length,d.length);return c},truncateString:function(c,a){if(typeof(c)==="string"&&typeof(a)==="number"){var b=c;if(c.length>a){b=c.substr(0,a-2)+"..."}return b}else{AMA.debug("Invalid parameter: "+c+", "+a+".")}},removeEmptyStrings:function(b){var a=Array();var c=0;var d=0;while(d<b.length){if(b[d]!=""){a[c]=b[d];c++}d++}return a},limitText:function(a,c,d){if($J("#"+a).val().length>c){var b=$J("#"+a).val().substring(0,c);$J("#"+a).val(b)}if(typeof(d)!=="undefined"){this.updateCharacterCountDisplay(a,d)}},updateCharacterCountDisplay:function(b,c){var a=$J("#"+b).val().length;$J("#"+c).html(a)},getInsertIndex:function(g,e,a,f,b){if(f<a){return a}var d=a+Math.floor((f-a)/2);var c=b(g[d],e);if(c==1){return this.getInsertIndex(g,e,a,d-1,b)}else{if(c==-1){return this.getInsertIndex(g,e,d+1,f,b)}}return d},calculateTimeRange:function(b){var c=b.substr(0,2);b=parseInt(b.substring(2,b.indexOf("to")));var a=b+"-";if(b==12){a+=1+c}else{a+=(b+1)+c}return a},parseStatusDetails:function(g,j){var h="\n";var d="=";var b="/";var e="";var o={sync:{show:false,message:""}};if(g.indexOf(d)==-1){AMA.debug("Phone did not send details in the format that can appropriately be parsed: "+g)}else{AMA.debug("Parsing Status Record Details: "+g);var n=true;var k=false;var c=g.split(h);AMA.debug("Status record has "+c.length+" key value pairs.");for(var f=0;f<c.length;f++){if(c[f].indexOf(d)!=-1){var m=c[f].split(d);var a=$.trim(m[0]).toLowerCase();var l=$.trim(m[1]);AMA.debug("Name: "+a+", Value: "+l);if(l){if(j==="sync"){o.sync.show=true;if($(".status_detail_msg").find("."+l).length>0){o.sync.message+=$(".status_detail_msg").find("."+l).text()}else{o.sync.message+=$(".status_detail_msg").find(".SYNC_STOPPED").text()}}}else{AMA.debug("Phone sent a parameter that the web doesn't recognize: "+a)}}else{AMA.debug("Phone did not send up status details in key=value format: "+m)}}}if(j=="sync"){if(o.sync.message===""&&g!==""){return g}else{if(o.sync.message===""){return""}else{return o.sync.message}}}},calculateNextWeek:function(b){var g={sunday:0,monday:1,tuesday:2,wednesday:3,thursday:4,friday:5,saturday:6};var d=new Date();var a=d.getDate();var f=d.getMonth();var e=d.getFullYear();var c=d.getDay();if(c<g[b]){daysLeft=g[b]-c}else{daysLeft=7-(c-g[b])}nextWeekDay=new Date(e,f,a+daysLeft);return this.MONTH_NAMES[nextWeekDay.getMonth()]+" "+nextWeekDay.getDate()+", "+nextWeekDay.getFullYear()},bytesToSize:function(a){var c=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"];if(a==0){return"0 "+c[0]}var b=parseInt(Math.floor(Math.log(a)/Math.log(1024)));return((b==0)?(a/Math.pow(1024,b)):(a/Math.pow(1024,b)).toFixed(1))+" "+c[b]},exportContacts:function(){AMA.debug("Exporting contacts");if(AMA.models.contacts.length>0){document.location.href="../core/jebber/export?method=retrieveCSV&csrfvalue="+AMA.config.csrfToken}else{AMA.error("There are no contacts to export")}},print:function(){var a="/web/print.html";window.open(a,"cb_print")},printHTML:function(){if(AMA.config.useLegacyApi){var g=new TableMaker(2);for(var e=0;e<AMA.models.contacts.length;e++){var c=AMA.models.contacts.models[e].attributes;var j=AMA.model.Contacts.MODEL_DESCRIPTOR.fields;var f;var d="";for(var l in c){for(var b in j){if(l===b){f="<span class='printfield'>"+l+":</span> ";f+="<span class='printvalue'>";f+=c[l];f+="</span>";f+="<br>";d+=f}}}g.add(d)}var h=g.close();return h}else{var g=new TableMaker(2);var a=[];if(typeof AMA.models.contacts==="undefined"){return"Portal has not been completely loaded."}for(var e=0;e<AMA.models.contacts.length;e++){var k=AMA.models.contacts.models[e].id;var c=AMA.models.contacts.models[e].attributes;var j=AMA.model.ContactDetails.MODEL_DESCRIPTOR.fields;var d="";a.push(k);for(var l in c){var b=j[l];if(b){d+="<span class='printfield'>"+b.displayText+": </span><span class='printvalue'> "+c[l]+"</span><br><div id='"+k+"'><img class='itemloader' alt='loading...' src='img/loadingcircle.gif' /><span class='loadertext'>  loading details...</span></div>"}}g.add(d)}var h=g.close();return[h,a]}},loadSpinner:function(b,a){var d={resizable:false,modal:true,maxWidth:150},c=$(b);if(typeof a!=="string"){d=_.extend(a,d)}c.dialog(a);c.siblings(".ui-dialog-titlebar").hide()},highlightSubNav:function(a){if(a!==""){$("#records_mainhalf .recordspane_nav li").removeClass("selected");$("#records_mainhalf .recordspane_nav_button_"+a).addClass("selected")}},isAndroid:function(){var a=AMA.models.endpoints.models[0].get("platform");var b=AMA.models.endpoints.models[0].get("platformfriendlyname");if(a.toLowerCase().indexOf("android")>-1||b.toLowerCase().indexOf("android")>-1){return true}else{return false}},isBB:function(){var a=AMA.models.endpoints.models[0].get("platformfriendlyname");if(a.toLowerCase().indexOf("blackberry")>-1){return true}else{return false}},isIPhone:function(){var a=AMA.models.endpoints.models[0].get("platform"),b=AMA.models.endpoints.models[0].get("platformfriendlyname");if(a.toLowerCase().indexOf("ios")>-1||b.toLowerCase().indexOf("iphone")>-1){return true}else{return false}},metersToYards:function(a){if(a.indexOf(",")!=-1){a=a.substring(0,a.indexOf(","))}return a*1.0936133},uppercaseFirst:function(a){return a.charAt(0).toUpperCase()+a.slice(1)},openPopupWindow:function(a){AMA.popupWindows=AMA.popupWindows||[];var b=AMA.popupWindows[a.id];if(b&&!b.closed){if(this.getBrowserType()!=="Chrome"){b.focus();return}else{b.close()}}AMA.popupWindows[a.id]=window.open(a.url,a.id,"scrollbars=1,toolbar=0,location=0,directories=0,status=0,menubar=0,resizable=1,titlebar=0,width="+a.width+",height="+a.height+",left=100,top=100")},downloadFile:function(a){var b;if(b){b.attr("src",a)}else{b=$("<iframe>",{id:"idown",src:a}).hide().appendTo("body")}},createCORSRequest:function(c,a){a+="&nocache="+new Date().getTime();AMA.debug("Calling REST API: "+c+" "+a);var b=new XMLHttpRequest();if("withCredentials" in b){b.open(c,a,true)}else{if(typeof XDomainRequest!="undefined"){b=new XDomainRequest();b.open(c,a);b.ontimeout=function(){return};b.onprogress=function(){return}}else{b=null}}return b},useXdr:function(){var a=new XMLHttpRequest();if("withCredentials" in a){return false}else{if(typeof XDomainRequest!="undefined"){return true}else{return false}}},microTemplate:function(a,c){var b=a.replace(/&lt;/g,"<").replace(/&gt;/g,">");return _.template(b,c)},switchLabel:function(e,d,b){var c=typeof b===undefined?$(e):b.find(e);var a=_.isArray(d)?d.join(","):d;c.hide();c.filter(a).show()},getSecretPair:function(c){if(!c||typeof c!="function"){AMA.error("Error: A callback function must be specified. Aborting.");return}var a=AMA.config.securityHostUrl+"/secretPair?devId="+AMA.config.devId,b=AMA.Util.createCORSRequest("GET",a);if(b){b.onerror=function(){AMA.debug("Error in retrieving secret pair.");c(null)};b.onload=function(){try{c(JSON.parse(this.responseText))}catch(d){AMA.debug("Error in retrieving secret pair.");c(this.responseText)}};b.send()}},decodeHTMLEntityString:function(a){return $("<textarea/>").html(a).text()}};
/*! Config */
(function(){var a={authToken:AMA.Util&&AMA.Util.getCookie("authToken")||"",devId:"OZDELSO9JWAOKCY5",endpointId:AMA.Util&&AMA.Util.getCookie("endpointId")||"",enableDebug:true,thumbnailPath:"",thumbnailMaxParam:"max",commonImagePath:"img/",downloadPathPrefix:"/ama/jebber/media/",downloadPathSuffix:"?method=retrieve&csrfvalue="+this.csrfToken,skinName:"",licenses:{webpurify:"7227056326bbbf595ed81b61c71dd490",bingMapsProdKey:"",bingMapsDevKey:"AvU523l310Ydvy_InwmyRlzOLLu-5qy8OfkaWtIRy4xJOPpaiwGRlYKQ6E2tlKA_"},locale:"",dateFormat:"MM/dd/yyyy",timeFormat:"hh:mm a",dateAndTimeFormat:"NNN dd, yyyy @ h:mm a",mapAccuracyCirleColor:{"1":[72,173,215,40],"2":[72,173,218,100]},locationPaneMap:{height:625,width:730},locationPaneRWDMap:{height:625,width:864},defaultMapCoordinates:{lat:39,lon:-98},defaultMapType:"road",accuracyUnit:"meters",locationHistoryLimit:4,gpsLocateSupported:true,lbsLocateSupported:true,lockEnabled:true,templatePath:"tpl/",defaultView:"dashboard_main",enableReporting:true,enableDpTimeTracking:false,enableMrTimeTracking:false,enableSurveys:true,reportingEventTypes:{accountsettings:"ACST",actiondropdeletecontact:"ADDC",actiondropdeletecontacttrash:"ADCT",actiondropdeleteimagetrash:"DDMT",actiondropdeletevideotrash:"DDVT",actiondropdownaddcontact:"ADAC",actiondropdownaddphoto:"ADAP",actiondropdownaddvideo:"ADAV",actiondropremovecontact:"ADRC",actiondropremovephoto:"ADRP",actiondropremovevideo:"ADRV",addcontact:"ADCO",addcontacttodevice:"ADCD",addphototophone:"APTP",addvideotophone:"AVTP",deletePhoto:"DEPH",deletecontact:"DECO",deletephotoactionperformed:"DPAP",deleterecordstrash:"DRET",deletevideo:"DEVI",deletevideoactionperformed:"DVAP",dialogaborted:"DialogAborted",dialogfail:"DialogFail",dialogsuccess:"DialogSuccess",dialogtriggered:"DialogTriggered",downloadPhoto:"DOPH",downloadvideo:"DOVI",dppagevisited:"DPVI",dptimespent:"DPTimeSpent",editcontact:"EDCO",emptytrash:"EMTR",exportcontact:"EXCO",importcontact:"IMCO",locationhistoryrequest:"LocationHistoryRequest",mrtimespent:"MRTimeSpent",pagenavigated:"PageNavigated",phototab:"PHTB",playvideo:"PLVI",printcontact:"PRCO",removecontact:"RMCO",removephotofrmphone:"RPFP",removevideofrmphone:"RVFP",restorecontact:"RETC",restorecontactactionperformed:"RCAP",restoreimage:"RETI",restoreimageactionperformed:"RIAP",restorerecords:"RETR",restorevideo:"RETV",restorevideoactionperformed:"RVAP",showcontact:"SWCO",transfercontact:"TRCO",trashtab:"TRTB",useractionperformed:"ActionPerformed",videotab:"VDTB",viewPhoto:"VWPH",webattemptlogin:"WebsiteAttemptLogin",weblocate:"WebLocate",weblogin:"WebsiteLogin",webpagevisited:"WPVI",webportalusage:"WebPortalUsage",websyncContactsBackup:"SYCO",websyncContactsDashboard:"SCOD",websyncPhotosBackup:"SYPH",websyncPhotosDashboard:"SPHD",websyncVideosBackup:"SYVI",websyncVideosDashboard:"SYID",webMRAttempt:"WebMRAttempt",webMRResult:"WebMRResult",webuserexperiencesurveycancel:"WebUserExperienceSurveyCancel",webuserexperiencesurveyprompt:"WebUserExperienceSurveyPrompt",webuserexperiencesurveysubmit:"WebUserExperienceSurveySubmit",webSyncDialogShown:"WebSyncDialogShown",webSyncDialogCancelled:"WebSyncDialogCancelled",webSyncTriggered:"WebSyncTriggered",webSyncResult:"WebSyncResult",eventType:"eventType",logmessage:"msg",logaccount:"act",webAppRatingGo:"WebAppRatingGo",webAppRatingCancel:"WebAppRatingCancel",webAppRatingPrompt:"WebAppRatingPrompt"},reportEvtDetailsArray:{dashboard_tab:["Dashboard",false],backup_tab:["Contacts",true,"showcontact","Show Contacts"],locate_tab:["location",false],dashboard_btn_locate:["location",false],security_selector_tab:["security",false],app_assist_selector_tab:["App Assist",false],privacy_tab:["privacy",false],safebrowsing_tab:["SafeBrowsing",false],techsupport_tab:["Tech Support",false],rep_newphone:["New Phone",false],data_contacts_createcontact:["create Contact",true,"addcontact","Add Contact"],data_contacts_importcontacts:["import Contact",true,"importcontact","Import Contact"],data_contacts_exportcontacts:["export Contact",true,"exportcontact","Export Contact"],data_contacts_printcontacts:["PrintContact",true,"printcontact","Print Contacts"],data_trash_emptytrash:["Empty Trash",true,"emptytrash","Empty Trash"],button_sync_normal:["Sync Data",false],button_transferdata:["transfer Data",true,"transfercontact","Transfer Contacts"],button_locate_normal:["location",false],button_wipe_normal:["Wipe Data",false],button_alarm_normal:["alarm",false],button_lock_normal:["lock",false],contact_edit_btn:["Edit Contact",true,"editcontact","Edit Contact"],data_contacts_tab_selector:["contacts",true,"showcontact","Show Contact"],data_photos_tab_selector:["Photos",true,"phototab","Show Photo"],data_videos_tab_selector:["videos",true,"videotab","Show Video"],data_trash_tab_selector:["Trash",true,"trashtab","Show Trash"],sync_settings:["Data Protection Account Settings",true,"accountsettings","Account Settings"],location_setting:["Data Protection Account Settings",false,"accountsettings","Account Settings"],contact_resource:["Backup/Sync Policy",true],restore_contact_btn:[false,false,"restorecontact","Restore Contact - Trash Details Pane"],restore_photo_btn:[false,false,"restoreimage","Restore Photo - Trash Details Pane"],restore_video_btn:[false,false,"restorevideo","Restore Video - Trash Details Pane"],delete_contact_btn:[false,false,"deleterecordstrash","Permanant Delete Contact - Trash Details Pane"],delete_photo_btn:[false,false,"deleterecordstrash","Permanant Delete photo - Trash Details Pane"],delete_video_btn:[false,false,"deleterecordstrash","Permanant Delete video - Trash Details Pane"],view_photo_btn:["Photo slide show",true,"viewPhoto","View Photos-Trash Details Pane"],play_video_btn:["Play Video",true,"playvideo","Play Video-Trash Details Pane"],view_photo_hover_btn:["Photo slide show",true,"viewPhoto","View Photo"],photo_download_btn:[false,false,"downloadPhoto","Download Photo"],photo_delete_btn:[false,false,"deletePhoto","Delete Photo"],view_video_hover_btn:["Play Video",true,"playvideo","Play Video"],video_download_btn:[false,false,"downloadvideo","Download Video"],video_delete_btn:[false,false,"deletevideo","Delete Video"],contact_removefrmdevice_btn:[false,false,"removecontact","Remove Contact from Device- DetailsPane"],contact_addtodevice_btn:[false,false,"addcontacttodevice","Add Contact to Device- DetailsPane"],contact_delete_btn:[false,false,"deletecontact","Delete Contact from phone and web - Details Pane"],locate_setting:["Account Settings Location",false],backup_setting:["Account Settings Backup",false],security_setting:["Account Settings Security",false],profile_setting:["Account Settings Account Info",false],sync_data:["Sync Data",true],sync_data_dashboard:["Sync Data dashboard",false]},JsonConstants:{LOGLEVEL_STATES:{ALERT:"alert",AUDIT:"audit",DEBUG:"debug",ERROR:"error",FATAL:"fatal",INFO:"info",STATS:"stats",WARN:"warn"}},accountDetails:{accountId:AMA.Util&&AMA.Util.getCookie("accountId")||"",accountMdn:"5555555555"},sessionId:AMA.Util&&AMA.Util.getCookie("webSessionId")||"",legacyApiBaseUrl:"/core/jebber",csrfToken:AMA.Util&&AMA.Util.getCookie("csrfpseudorandomnumber")||"",legacyMetaFields:{visibility:"vi",visible:"vo",pendingCreate:"pc",pendingDelete:"pd",pendingUpdate:"pu",isCurrent:"ic"},legacyEnums:{visibility:{enabled:0,trashed:1,purged:2}},recordTypeIds:{contact:33620224,image:33686528,video:33687552},legacyRecordTypes:{CONTACT:{id:33620224,fields:{firstName:"08-01",fullName:"07-01",cellPhone:"0e-04",cellPhone2:"0e-04",cellPhone3:"0e-04",notes:"0n-01",middleName:"09-01",lastName:"0A-01",suffix:"0G-01",prefix:"0F-01",firstPhonetic:"0B-01",middlePhonetic:"0C-01",lastPhonetic:"0D-01",fax:"0e-0C",homefax:"0e-0G",workfax:"0e-0H",phone:"0e-01",workPhone:"0e-03",workPhone2:"0e-03",workPhone3:"0e-03",homePhone:"0e-02",otherPhone:"0e-0A",localPhone:"0e-07",iphone:"0e-0Q",pager:"0e-06",preferredPhone:"0e-05",localDate:"0l-07",birthday:"0i-01",anniversary:"0j-01",nickName:"0E-01",relationship:"16-07",email:"0c-01",email2:"0c-01",email3:"0c-01",homeEmail:"0c-02",workEmail:"0c-03",otherEmail:"0c-0A",localEmail:"0c-07",addressStreet:"0J-01",addressStreetExtra:"0K-01",addressCity:"0L-01",addressState:"0M-01",addressCountry:"0N-01",addressCountryCode:"0O-01",addressZipCode:"0P-01",addressNeighborhood:"0Q-01",addressFormatted:"0Y-01",company:"0H-01",department:"0b-01",jobTitle:"0I-01",workCompany:"0H-03",workDepartment:"0b-03",workJobTitle:"0I-03",otherCompany:"0H-0A",otherDepartment:"0b-0A",otherJobTitle:"0I-0A",localCompany:"0H-07",localDepartment:"0b-07",localJobTitle:"0I-07",localStreet:"0J-07",localStreetExtra:"0K-07",localCity:"0L-07",localState:"0M-07",localZipCode:"0P-07",localCountry:"0N-07",localNeighborhood:"0Q-07",formattedLocalAddress:"0Y-07",workStreet:"0J-03",workStreetExtra:"0K-03",workCity:"0L-03",workState:"0M-03",workZipCode:"0P-03",workCountry:"0N-03",workCountryCode:"0O-03",workNeighborhood:"0Q-03",formattedWorkAddress:"0Y-03",homeStreet:"0J-02",homeStreetExtra:"0K-02",homeCity:"0L-02",homeState:"0M-02",homeZipCode:"0P-02",homeCountry:"0N-02",homeCountryCode:"0O-02",homeNeighborhood:"0Q-02",formattedHomeAddress:"0Y-02",otherStreet:"0J-0A",otherStreetExtra:"0K-0A",otherCity:"0L-0A",otherState:"0M-0A",otherZipCode:"0P-0A",otherCountry:"0N-0A",otherCountryCode:"0O-0A",otherNeighborhood:"0Q-0A",formattedOtherAddress:"0Y-0A",category:"0q-01",gender:"0d-01",webSiteURL:"0Z-01",homeWebSiteURL:"0Z-02",workWebSiteURL:"0Z-03",otherWebSiteURL:"0Z-0A",preferredWebSiteURL:"0Z-05",im:"0o-01",im2:"0o-01",im3:"0o-01",imOther:"0o-0A",picture:"0p-01",resourceName:"1u-01",resourceTimestamp:"1x-01",resourceVersion:"1w-01",imAIM:"0o-0I",imGTalk:"0o-0N",imICQ:"0o-0O",imJabber:"0o-0P",imQQ:"0o-0M",imSkype:"0o-0L",imWindowsLive:"0o-0J",imYahoo:"0o-0K",usernameFacebook:"1E-01",usernameTwitter:"1Y-01",usernameFlickr:"1Q-01",usernameYoutube:"1c-01",usernameAmazonWishlist:"1I-01",usernameSkype:"1U-01",usernameChess:"1M-01",contactEnabledMixin:"1k-01",mixinMimeType:"0U-01",mixinIdentifier:"0V-01",mixinDisplayIdentifier:"0W-01",assistant:"0z-01",manager:"10-01",governmentID:"11-01",account:"12-01",customerID:"13-01",spouse:"14-01",children:"15-01",localGroupName:"0y-01",exchangeName:"18-01",accountName:"19-01",accountType:"1A-01",kind:"17-01",internetCall:"0f-07"}},PHOTO:{id:33686528,fields:{fileName:"1l-01-0-0",fileSize:"1m-01-0-0",fileHash:"1n-01-0-0",fileType:"1p-01-0-0",fileUrl:"/content?",hostUrl:"1q-01-0-0",thumbnailUrl:"/thumbcontent?",downloadUrl:"/download?"}},VIDEO:{id:33687552,fields:{fileName:"1l-01-0-0",fileSize:"1m-01-0-0",fileHash:"1n-01-0-0",fileType:"1p-01-0-0",fileUrl:"/content?",hostUrl:"1q-01-0-0",thumbnailUrl:"/thumbcontent?",downloadUrl:"/download?"}},HISTORY:{id:41943040,fields:{event:"2X-01",details:"2Y-01",time:"2Z-01"}},STATUS:{id:35651584,fields:{id:"2O-01-0-0",type:"2P-01-0-0",subject:"2Q-01-0-0",content:"2R-01-0-0",time:"2S-01-0-0"}},ACCOUNT_SETTINGS:{id:37748736,syncSettingsFields:{autobackup_carrier:"AUTOBACKUP_CARRIER",autobackup_contacts:"AUTOBACKUP_CONTACTS",autobackup_day:"AUTOBACKUP_DAY",autobackup_frequency:"AUTOBACKUP_FREQUENCY",autobackup_minimum_battery_level:"AUTOBACKUP_MINIMUM_BATTERY_LEVEL",autobackup_pictures:"AUTOBACKUP_PICTURES",autobackup_videos:"AUTOBACKUP_VIDEOS",autobackup_wifi:"AUTOBACKUP_WIFI",security_cloudav:"security_cloudav",security_scan_dayofweek:"security_scan_dayofweek",security_safe_browser:"security_safe_browser",security_scan_frequency:"security_scan_frequency",security_scan_nextscan:"security_scan_nextscan",security_scan_timeofday:"security_scan_timeofday",security_trayicon:"security_trayicon",security_scan_realtime:"security_scan_realtime",security_scan_if_media_changed:"security_scan_if_media_changed",locationcheck_on:"LOCATIONCHECK_ON",gps_interval:"GPS_INTERVAL",gps_battery:"GPS_BATTERY"},locationSettingsFields:{locationcheck_on:"LOCATIONCHECK_ON",gps_interval:"GPS_INTERVAL",gps_battery:"GPS_BATTERY"},deviceSettingsFields:{locationcheck_on:"LOCATIONCHECK_ON",current_lockstatus:"CURRENT_LOCKSTATUS",android_device_admin:"ANDROID_DEVICE_ADMIN",data_wiped:"DATA_WIPED"}},LOCATIONS:{id:34603008,fields:{time:"2I-01",coordinates:"2H-01",accuracy:"2J-01"}},SYNCDETAILS:{id:50331648,fields:{clientTransactionID:"3h-01",onDeviceContactAdded:"3Q-01",onDeviceContactDeleted:"3R-01",onDeviceContactUpdated:"3S-01",onDeviceImageAdded:"3W-01",onDeviceImageDeleted:"3X-01",onDeviceImageTransmit:"3Z-01",onDeviceImageUpdated:"3Y-01",onDeviceVideoAdded:"3d-01",onDeviceVideoDeleted:"3e-01",onDeviceVideoTransmit:"3g-01",onDeviceVideoUpdated:"3f-01",onWebContactAdded:"3N-01",onWebContactDeleted:"3O-01",onWebContactUpdated:"3P-01",onWebImageAdded:"3Z-01",onWebImageDeleted:"3U-01",onWebImageUpdated:"3V-01",onWebVideoAdded:"3g-01",onWebVideoDeleted:"3b-01",onWebVideoUpdated:"3c-01"}}},locationConsolidation:false};a.defaultView="dashboard_main";_.extend(AMA.config,a);AMA.config.getBingMapsKey=function(){if(!AMA.envs){return false}var c=AMA.envs[location.hostname].type;return(c==="prod")?this.licenses.bingMapsProdKey:this.licenses.bingMapsDevKey};var b=location.hostname||"localhost";AMA.config.securityHostUrl=AMA.envs[b].securityHostUrl;AMA.config.apiHostUrl=AMA.envs[b].apiHostUrl;AMA.config.isRecordChanged=false;AMA.config.setRecordChangedFlag=function(c){AMA.config.isRecordChanged=c}})();
/*! Session */
(function(){AMA.session=function(){var a=function(){var b=new Date();document.cookie="accountId=;expires="+b.toGMTString()+";;";document.cookie="authToken=;expires="+b.toGMTString()+";;";document.cookie="csrfpseudorandomnumber=;expires="+b.toGMTString()+";;";document.cookie="endpointId=;expires="+b.toGMTString()+";;";document.cookie="webSessionId=;expires="+b.toGMTString()+";;";AMA.debug("Cookies removed. Current cookies remaining: "+document.cookie)};return{EVENT:AMA.enums("SESSION_TIMEOUT","LOGOUT"),logout:function(){this.sendSyncCommand();this.trigger(this.EVENT.LOGOUT);if(typeof this._timedOut!=="undefined"&&this._timedOut){AMA.Util.deleteCookie("lastVisited")}var b=AMA.config.securityHostUrl+"/authtoken?"+$.param({devId:AMA.config.devId,authToken:AMA.config.authToken}),d="DELETE";if(AMA.Util.useXdr()){b=b+"&_method=DELETE";d="POST"}var c=AMA.Util.createCORSRequest.call(this,d,b);if(c){AMA.debug("Sending de-authorization request to REST API");c.onload=function(){a();window.location.href="index.html"};c.send()}},timeout:function(){var b=(window.location.hash.split("#")[1]||window.location.hash);AMA.Util.setCookie("lastVisited",b,1);this.trigger(this.EVENT.SESSION_TIMEOUT);this._timedOut=true;this.logout()},sendSyncCommand:function(){if(AMA.models.capabilities.canCreate("syncEvents")&&AMA.config.isRecordChanged){var b={data:{actionType:"sync",dataType:"contacts, pictures, videos"},async:false};new AMA.workflow.SyncWorkflow().sendRequest(b);AMA.config.isRecordChanged=false}}}}();_.extend(AMA.session,Backbone.Events)})();if(!Function.prototype.bind){Function.prototype.bind=function(a){if(typeof this!=="function"){throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable")}var e=Array.prototype.slice.call(arguments,1),d=this,b=function(){},c=function(){return d.apply(this instanceof b&&a?this:a,e.concat(Array.prototype.slice.call(arguments)))};b.prototype=this.prototype;c.prototype=new b();return c};
/*! BaseData */
}(function(){AMA.namespace("model");AMA.model.FieldTypes=AMA.enums("STRING","NUMBER","DATE");var a=AMA.model.BaseData=Backbone.Collection.extend();a.RESOURCE="";a.MODEL=Backbone.Model.extend();a.EVENT=AMA.enums("LOADED","INVALIDATED","UPDATED");_.extend(a.prototype,{initialize:function(c,b){this.model=this.constructor.MODEL;this.options=this.options||{};_.extend(this.options,b);this._configureUrl();this._checkSyncPrivileges();this.isLoaded=c&&c.length>0;this.isFetching=false;this.on("reset",function(){this.isLoaded=true;this.isFetching=false;this.trigger(a.EVENT.LOADED)});this.on("add remove change",function(){this.trigger(a.EVENT.UPDATED)});this._afterInitialize()},_configureUrl:function(){this.url=AMA.config.apiHostUrl+"/"+this.constructor.RESOURCE+"?"+$.param({devId:AMA.config.devId,endpointId:AMA.config.endpointId,authToken:AMA.config.authToken})},_checkSyncPrivileges:function(){var c=this.constructor.RESOURCE,b=AMA.models.capabilities;this.syncPrivileges={create:b.canCreate(c),read:b.canRead(c),update:b.canUpdate(c),"delete":b.canDelete(c)}},_afterInitialize:function(){},sync:function(g,d,c){var f={create:"POST",read:"GET",update:"PUT","delete":"DELETE"};if(!this.syncPrivileges[g]){AMA.error("This account has no "+g+" permission for resource '"+this.constructor.RESOURCE+"'");return false}var b=c.error;c.error=_.bind(function(h){if(h.status===401){AMA.error("Server responded 'Unauthorized' (401)");AMA.session.timeout()}if(b){b.apply(arguments)}},this);AMA.debug("Calling REST API: "+f[g]+" "+(c.url||this.url));if(g!=="read"&&AMA.Util.useXdr()){var e=null;if(g==="update"||g==="delete"){c.url=c.url+"&_method="+f[g];g="create"}e=AMA.Util.createCORSRequest(f[g],c.url);e.onload=function(){try{var h=JSON.parse(this.responseText)}catch(i){AMA.error(f[g]+" "+c.url+" - Base Data - response not JSON: "+this.responseText);h=this.responseText}if(c.callback){c.callback(true,h)}else{if(c.complete){c.complete(true,h)}else{c.success(true,h)}}};e.onerror=function(){AMA.error("Request failed: "+f[g]+" "+c.url);if(c.callback!=undefined){c.callback(false)}else{c.error(false)}};e.onprogress=function(){};e.ontimeout=function(){};e.timeout=100000;if(c.data!=undefined){e.send(c.data)}else{e.send(JSON.stringify(d.attributes))}}else{Backbone.Collection.prototype.sync.apply(this,arguments)}},fetch:function(c){if(this.isFetching){return}this.isFetching=true;c=c||{};if(typeof c.reset=="undefined"){c.reset=true}this._configureFetchOptions(c);var b=c.complete;c.complete=_.bind(function(){this.isLoaded=true;this.isFetching=false;if(b){b.apply(arguments)}},this);Backbone.Collection.prototype.fetch.call(this,c)},_configureFetchOptions:function(b){},parse:function(b){if(!_.isObject(b)){return[]}if(_.isArray(b)){return b}if(_.isArray(b.list)){this.attributes=_.omit(b,"list");return b.list}return[b]},invalidate:function(b){if(this.isFetching){this.once(a.EVENT.LOADED,this.invalidate);return}if(!this.isLoaded){return}this.isLoaded=false;this.trigger(a.EVENT.INVALIDATED);this.fetch(b)}})})();
/*! Capabilities */
(function(){AMA.namespace("model");var a=AMA.model.Capabilities=AMA.model.BaseData.extend();a.RESOURCE="capabilities";a.MODEL=Backbone.Model.extend({});_.extend(a.prototype,{initialize:function(c,b){this.model=this.constructor.MODEL;this.options=this.options||{};_.extend(this.options,b);this._configureUrl();this.syncPrivileges={create:true,read:true,update:true,"delete":true};this.isLoaded=c&&c.length>0;this.isFetching=false;this.on("reset",function(){this.isLoaded=true;this.isFetching=false;this.trigger(AMA.model.BaseData.EVENT.LOADED)});this.on("add remove change",function(){this.trigger(AMA.model.BaseData.EVENT.UPDATED)});this._afterInitialize()},_configureUrl:function(){this.url=AMA.config.securityHostUrl+"/"+a.RESOURCE+"?"+$.param({devId:AMA.config.devId,endpointId:AMA.config.endpointId,authToken:AMA.config.authToken})},parse:function(c){c=a.__super__.parse.apply(this,arguments);var b=[];_.each(c,function(e){if(!_.isString(e)){AMA.error("Unexpected non-string list item in response from Capabilities API");return}var d=["create","read","update","delete"],f=e.split("_")[0];if(!_.contains(d,f)){AMA.error("Invalid capability string in response from Capabilities API")}else{b.push({capability:e})}});return b},_isAllowed:function(f,e){var d=this.toJSON()||[],c=f+"_"+e;var b=_.find(d,function(g){return g.capability===c});return !_.isUndefined(b)},canCreate:function(b){return this._isAllowed("create",b)},canRead:function(b){return this._isAllowed("read",b)},canUpdate:function(b){return this._isAllowed("update",b)},canDelete:function(b){return this._isAllowed("delete",b)}})})();
/*! UserData */
(function(){AMA.namespace("model");var a=AMA.model.UserData=AMA.model.BaseData.extend();a.URL="";a.MODEL=Backbone.Model.extend({});a.Status={ENABLED:"ACTIVE",TRASHED:"INACTIVE",PURGED:"HIDDEN"};_.extend(a.prototype,{initialize:function(){a.__super__.initialize.apply(this,arguments);this.status=a.Status.ENABLED},_configureUrl:function(b){this.url=AMA.config.apiHostUrl+"/"+this.constructor.RESOURCE+"?"+$.param({devId:AMA.config.devId,endpointId:AMA.config.endpointId,authToken:AMA.config.authToken,status:a.Status.ENABLED});if(b&&b.params&&b.params.keyword){this.url+="&"+$.param({keyword:b.params.keyword})}},_configureFetchOptions:function(b){this._configureUrl(b)},create:function(e,b,f){var c=(e==="photos"||e==="videos")?"files":e,d={};if(AMA.models.capabilities.canCreate(e)){d.url=AMA.config.apiHostUrl+"/"+c+"?devId="+AMA.config.devId+"&endpointId="+AMA.config.endpointId+"&authToken="+AMA.config.authToken;d.data=JSON.stringify(b);d.contentType="application/json;charset=UTF-8";d.callback=f;d.cache=false;d.complete=_.bind(function(g){AMA.config.setRecordChangedFlag(true);f(true)},this);d.error=_.bind(function(){AMA.error("Request failed: PUT /"+c)},this);this.sync("create",this,d)}},update:function(e,d,b,f){var c=false;options={};if(AMA.models.capabilities.canUpdate(e+"_id")){options.url=AMA.config.apiHostUrl+"/"+e+"/"+b.id+"?devId="+AMA.config.devId+"&endpointId="+AMA.config.endpointId+"&authToken="+AMA.config.authToken;options.data=JSON.stringify(b);options.contentType="application/json;charset=UTF-8";options.callback=f;options.cache=false;options.complete=_.bind(function(g){AMA.config.setRecordChangedFlag(true);f(true,JSON.parse(g.responseText))},this);options.error=_.bind(function(){f(false)},this);this.sync("update",this,options)}},addRemove:function(f,h,b,i){if(!_.isArray(b)||b.length<1){return}var c=(h==="photos"||h==="videos")?"files":h,e={id:AMA.config.endpointId,list:[],total:0,totalPendingSync:0,totalSynced:0},g=false,d={};if(c==="files"){switch(h){case"photos":h="image";break;case"videos":h="video";break}}if(AMA.models.capabilities.canUpdate(c)){_.each(this.models,function(j){if($.inArray(j.id,b)>-1){e.list.push(j.attributes)}});_.each(e.list,function(j){if(f==="add"){j.pendingCreate=true;j.pendingDelete=false}else{if(f==="remove"){j.pendingDelete=true;j.pendingCreate=false}}});if(e.list&&h==="contacts"){d.url=AMA.config.apiHostUrl+"/"+c+"?devId="+AMA.config.devId+"&endpointId="+AMA.config.endpointId+"&authToken="+AMA.config.authToken;d.data=JSON.stringify(e);d.contentType="application/json;charset=UTF-8";d.callback=i;d.cache=false;d.complete=_.bind(function(j){AMA.config.setRecordChangedFlag(true);i(true,JSON.parse(j.responseText))},this);d.error=_.bind(function(){i(false)},this);this.sync("update",this,d)}else{if(e.list&&c==="files"){e.keyword="";d.url=AMA.config.apiHostUrl+"/"+c+"?devId="+AMA.config.devId+"&endpointId="+AMA.config.endpointId+"&authToken="+AMA.config.authToken+"&fileType="+h;d.data=JSON.stringify(e);d.contentType="application/json;charset=UTF-8";d.callback=i;d.cache=false;d.complete=_.bind(function(j){AMA.config.setRecordChangedFlag(true);i(true,JSON.parse(j.responseText))},this);d.error=_.bind(function(){i(false)},this);this.sync("update",this,d)}}}},downloadFile:function(e,b,f){var d=null,c={fileType:e};if(AMA.models.capabilities.canRead("files_id")){if(AMA.Util.useXdr()){d=AMA.Util.createCORSRequest("GET",AMA.config.apiHostUrl+"/files/"+b+"?devId="+AMA.config.devId+"&endpointId="+AMA.config.endpointId+"&authToken="+AMA.config.authToken+"&fileType="+e);d.send();d.onload=function(){f(JSON.parse(this.responseText))}}else{$.ajax({url:AMA.config.apiHostUrl+"/files/"+b+"?devId="+AMA.config.devId+"&endpointId="+AMA.config.endpointId+"&authToken="+AMA.config.authToken,data:{fileType:e}}).done(function(g){f(g)})}}},trash:function(h,b,i){var d=this,f={},e=false,c=(h==="image"||h==="video")?"files":h,g={id:AMA.config.endpointId,list:[],total:0,totalPendingSync:0,totalSynced:0,keyword:""};if(b.length<1){return}if(AMA.models.capabilities.canDelete(c+"_id")){_.each(this.models,function(k){for(var j in b){if(b[j]===k.attributes.id){k.attributes.visibility=AMA.model.UserData.Status.TRASHED;g.list.push(k.attributes)}}});if(c==="contacts"){f.url=AMA.config.apiHostUrl+"/"+c+"?devId="+AMA.config.devId+"&endpointId="+AMA.config.endpointId+"&authToken="+AMA.config.authToken;f.data=JSON.stringify(g);f.contentType="application/json;charset=UTF-8";f.callback=i;f.cache=false;f.complete=_.bind(function(j){AMA.config.setRecordChangedFlag(true);i(true,JSON.parse(j.responseText))},this);f.error=_.bind(function(){i(false)},this);this.sync("update",this,f)}else{if(c==="files"){f.url=AMA.config.apiHostUrl+"/"+c+"?devId="+AMA.config.devId+"&endpointId="+AMA.config.endpointId+"&authToken="+AMA.config.authToken+"&fileType="+h;f.data=JSON.stringify(g);f.contentType="application/json;charset=UTF-8";f.callback=i;f.cache=false;f.complete=_.bind(function(j){AMA.config.setRecordChangedFlag(true);i(true)},this);f.error=_.bind(function(){i(false)},this);this.sync("update",this,f)}}}},restore:function(g,b,h){if(!_.isObject(b)){return}var c=(g==="photos"||g==="videos")?"files":g,f=false,e={id:AMA.config.endpointId,list:b,total:0,totalPendingSync:0,totalSynced:0,keyword:""},d={};if(c==="files"){switch(g){case"photos":g="image";break;case"videos":g="video";break}}if(AMA.models.capabilities.canUpdate(c)){if(b&&g==="contacts"){d.url=AMA.config.apiHostUrl+"/"+c+"?devId="+AMA.config.devId+"&endpointId="+AMA.config.endpointId+"&authToken="+AMA.config.authToken;d.data=JSON.stringify(e);d.contentType="application/json;charset=UTF-8";d.callback=h;d.cache=false;d.complete=_.bind(function(i){AMA.config.setRecordChangedFlag(true);h(true,JSON.parse(i.responseText))},this);d.error=_.bind(function(){h(false)},this);this.sync("update",this,d)}else{if(b&&c==="files"){d.url=AMA.config.apiHostUrl+"/"+c+"?devId="+AMA.config.devId+"&endpointId="+AMA.config.endpointId+"&authToken="+AMA.config.authToken+"&fileType="+g;d.data=JSON.stringify(e);d.contentType="application/json;charset=UTF-8";d.callback=h;d.cache=false;d.complete=_.bind(function(i){AMA.config.setRecordChangedFlag(true);h(true,JSON.parse(i.responseText))},this);d.error=_.bind(function(){h(false)},this);this.sync("update",this,d)}}}}})})();
/*! BaseView */
(function(){AMA.namespace("view");var a=AMA.view.BaseView=Backbone.View.extend();a.TEMPLATE_ID="base_template";a.TEMPLATE_SRC="";a.EVENT=AMA.enums("TEMPLATE_LOADED","DATA_LOADED","RENDERED","SHOWN","HIDDEN","UPDATED");Backbone.globalEvent=_.extend({},Backbone.Events);AMA.augment(a.prototype,{initialize:function(){AMA.debug("Initializing view [el: "+this.options.el+", parent: "+(this.options.parent&&this.options.parent.options.el||"---")+"]");this.parent=this.options.parent||null;this.children=[];this.hidden=this.options.hidden||false;this.template="";this.data=this.options.data||null;this.dataClass=this.options.dataClass||null;this.locale=this.options.locale||AMA.config.locale;this.isRendered=false;this.isTemplateLoaded=false;this.isActive=false;if(this.parent){this.parent.children.push(this)}if(this.constructor.TEMPLATE_SRC){this._fetchTemplate()}this.__beforePlug__={};if(this.data&&!this.options.noAutoRefresh){this._initAutoRefresh()}if(this.data){this.data.on(AMA.model.BaseData.EVENT.LOADED,function(){this.trigger(a.EVENT.DATA_LOADED)},this)}$(window).resize($.proxy(this._onPageResize,this))},_initAutoRefresh:function(){this.data.on(AMA.model.BaseData.EVENT.LOADED+" "+AMA.model.BaseData.EVENT.UPDATED,function(){if(this.isRendered){this.refresh()}},this)},show:function(){AMA.debug("Showing "+this.options.el);if(!this.isRendered){this._doRender()}this.$el.show();this.hidden=false;this.trigger(a.EVENT.SHOWN)},hide:function(){AMA.debug("Hiding "+this.options.el);this.$el.hide();this.trigger(a.EVENT.HIDDEN)},render:function(){var c=(this.data&&this.data.length>0)?this.data.toJSON()[0]:{},b="";b=_.template(this.template,this._processData(c));this.$el.html(b)},_onPageResize:function(){},refresh:function(){this._doRender()},_processData:function(c,b){return c},_beforeRender:function(){},_afterRender:function(){_.each(this.children,function(b){b._doRender()})},_setupEvents:function(){},getChild:function(c){var b=_.filter(this.children,function(d){return d.$el.attr("id")==c});return b.length>0?b[0]:null},setData:function(b){AMA.debug("Replacing data of view "+this.options.el);if(this.dataClass){if(!b){b=new this.dataClass()}else{if(typeof b.isLoaded==="undefined"&&b.cid){b=new this.dataClass([b])}}b.isLoaded=true}if(this.data){this.data.off(AMA.model.BaseData.EVENT.LOADED+" "+AMA.model.BaseData.EVENT.UPDATED,this._initAutoRefresh)}this.data=b;if(!this.options.noAutoRefresh){this._initAutoRefresh()}this._doRender()},plug:function(d,b){if(!d){return this}AMA.assert(d.__name__,"Plug-in must have property '__name__' defined");for(var c in d){if(!Object.prototype.hasOwnProperty.call(d,c)){continue}if(c==="__name__"||c==="__onPlug__"){continue}if(this[c]){this.__beforePlug__[d.__name__]=this.__beforePlug__[d.__name__]||{};this.__beforePlug__[d.__name__][c]=this[c]}this[c]=d[c]}if(d.__onPlug__){d.__onPlug__.call(this,b)}return this},_fetchTemplate:function(){var d=this,c=this.locale?this.locale+"/":"",b={url:AMA.config.templatePath+c+d.constructor.TEMPLATE_SRC,success:$.proxy(d._afterFetchTemplate,d),complete:function(){},error:function(){AMA.error("Failed to fetch template from "+d.constructor.TEMPLATE_SRC)}};AMA.debug("View "+this.options.el+" started fetching template from "+b.url);$.ajax(b)},_afterFetchTemplate:function(b){AMA.debug("View "+this.options.el+" has finished fetching its template");if($("#ama_templates").length===0){$("<div/>",{id:"ama_templates",style:"display:none"}).appendTo("body")}$("#ama_templates").append(b);this._notifyTemplateLoaded()},_notifyTemplateLoaded:function(){this.isTemplateLoaded=true;this.once(a.EVENT.RENDERED,function(){_.each(this.children,function(b){if(b.constructor.TEMPLATE_SRC===""){b._notifyTemplateLoaded()}})});this.trigger(a.EVENT.TEMPLATE_LOADED)},_fetchData:function(){AMA.debug("View "+this.options.el+" triggered a data fetch");this.data.fetch()},_doRender:function(){if(!this.isTemplateLoaded){AMA.debug("View "+this.options.el+" has deferred rendering, waiting for template download to complete");this.once(a.EVENT.TEMPLATE_LOADED,this._doRender);return}if(this.data&&!this.data.isLoaded){AMA.debug("View "+this.options.el+" has deferred rendering, waiting for data download to finish");this.once(a.EVENT.DATA_LOADED,this._doRender);if(!this.data.isFetching){this._fetchData()}return}AMA.debug("View "+this.options.el+" has started rendering");this.template=$("#"+this.constructor.TEMPLATE_ID).html();this.$el=$(this.options.el);if(this.hidden){this.$el.css({display:"none"})}if(this.locale){this.$el.addClass(this.locale)}this._beforeRender();this.render();AMA.debug("View "+this.options.el+" has finished rendering");this.isRendered=true;this.trigger(a.EVENT.RENDERED);this._setupEvents();this._afterRender()}})})();
/*! ListView */
(function(){AMA.namespace("view");var a=AMA.view.ListView=AMA.view.BaseView.extend();a.TEMPLATE_ID="";a.TEMPLATE_SRC="";a.CSS={ITEM:"rt_row",ITEM_STYLE:["rt_rowlighter","rt_rowdarker"],SELECTED_ITEM:"rt_rowindicated"};a.EVENT=AMA.enums("ITEM_SELECTED","SELECTION_CLEARED","LIST_EMPTIED","FILTER_ADDED","FILTER_REMOVED","FILTERS_CLEARED","NEW_DATA_LOADED");a.MIN_FILTER_PRIORITY=0;a.MAX_FILTER_PRIORITY=4;a.DEFAULT_FILTER_PRIORITY=2;AMA.augment(a.prototype,{initialize:function(){a.__super__.initialize.apply(this,arguments);this._css=this.constructor.CSS||a.CSS;this._filters={};this._dataset=[];this._datasetBefore={}},render:function(){var c="";this._applyFilters();AMA.debug(this.options.el+" has a final dataset of "+this._dataset.length+" items");_.each(this._dataset,function(f,e){c+=_.template(this.template,this._processData(f,e))},this);this.$el.html(c);this._items=this.$el.children("."+this._css.ITEM);AMA.debug(this.options.el+" has rendered "+this._items.length+" items");if(this._items.length>0){var b=this.selectedItem&&this.$el.find("[uid='"+$(this.selectedItem).attr("uid")+"']")||[],d=b.length>0;this._selectItem(d?b[0]:this._items[0]);AMA.debug("Previously selected item is still in list: "+d)}else{this.trigger(a.EVENT.LIST_EMPTIED);AMA.debug(this.options.el+" has triggered a 'list emptied' event.");this._selectItem()}},_processData:function(c,b){c.elId=this.$el.attr("id")+"_item_"+b;c.elStyle=this._css.ITEM_STYLE[b%2];c.recordStatusStyle={addToPhone:"display:none",removeFromPhone:"display:none",webOnly:"display:none",onDevice:"display:none"};var d=this._isMarked(c);if(d){if(c.onPhone&&!c.pendingCreate){c.recordStatusStyle.onDevice="display:block"}else{c.recordStatusStyle.addToPhone="display:block"}}else{if(c.onPhone){c.recordStatusStyle.removeFromPhone="display:block"}else{c.recordStatusStyle.webOnly="display:block"}}c.itemUid=c.id;return c},_isMarked:function(b){if(b.onPhone&&!b.pendingDelete){return true}else{return b.pendingCreate||b.pendingUpdate}return false},_setupEvents:function(){var b=this;AMA.debug("List view "+this.options.el+" is initializing onclick handler for each item");b.$el.children("."+b._css.ITEM).off("click").on("click",function(){AMA.debug("User clicked item #"+$(this).attr("id")+" on list view "+b.options.el);b._selectItem(this)})},_selectItem:function(c){var d,b;if(this.selectedItem){$(this.selectedItem).removeClass(this._css.SELECTED_ITEM)}this.selectedItem=c;if(this.selectedItem){d=$(this.selectedItem);d.addClass(this._css.SELECTED_ITEM);AMA.debug("Item #"+d.attr("id")+" has been selected on list view "+this.options.el);b=d.attr("uid");this.trigger(a.EVENT.ITEM_SELECTED,this.data.get(b));AMA.debug(this.options.el+" has triggered an 'item selected' event with uid="+b)}else{this.trigger(a.EVENT.SELECTION_CLEARED);AMA.debug("There is no selected item on list view "+this.options.el+"; a 'selection cleared' event has been triggered")}},getSelectedItemData:function(){if(!this.selectedItem){return null}var b=$(this.selectedItem).attr("uid");return this.data.get(b)},addFilter:function(b,d,c){AMA.debug("Adding filter '"+b+"' (priority "+c+") to "+this.options.el);if(typeof c==="undefined"){c=a.DEFAULT_FILTER_PRIORITY}AMA.assert(typeof c==="number"&&c>=a.MIN_FILTER_PRIORITY&&c<=a.MAX_FILTER_PRIORITY,"[ListView.addFilter] Filter priority is invalid or out of range: "+c);d.priority=c;this._filters[b]=d;this.trigger(a.EVENT.FILTER_ADDED,{which:b})},removeFilter:function(b){AMA.debug("Removing filter '"+b+"' from "+this.options.el);delete this._filters[b];this.trigger(a.EVENT.FILTER_REMOVED,{which:b})},clearFilters:function(){AMA.debug("Removing all filters from "+this.options.el);this._filters={};this.trigger(a.EVENT.FILTERS_CLEARED)},_applyFilters:function(){var d=this.data&&this.data.toJSON()||[],c,b;this._datasetBefore={};if(d.length>0){for(c=a.MIN_FILTER_PRIORITY;c<=a.MAX_FILTER_PRIORITY;c++){for(b in this._filters){if(this._filters[b].priority===c){this._datasetBefore[b]=d;d=_.filter(d,this._filters[b],this);AMA.debug("Applied filter '"+b+"' to "+this.options.el+", resulting in dataset of "+d.length+" items")}}}}this._dataset=d}})})();
/*! GridView */
(function(){AMA.namespace("view");var a=AMA.view.GridView=AMA.view.ListView.extend();a.TEMPLATE_ID="";a.TEMPLATE_SRC="";a.CSS={ITEM:"rt_rowmedia",BTN_CONTAINER:"buttoncontainer",BTN_VIEWFULLSIZE:"btn_viewfullsize",BTN_ADDTOPHONE:"btn_addtophone",BTN_REMOVEFROMPHONE:"btn_removefromphone"};a.FILE_URLS=[];a.FILE_SIZES=[];AMA.augment(a.prototype,{initialize:function(){a.__super__.initialize.apply(this,arguments);this._fileURLs=this.constructor.FILE_URLS||a.FILE_URLS;this._fileSizes=this.constructor.FILE_SIZES||a.FILE_SIZES},render:function(){a.__super__.render.apply(this,arguments);var b=this.data.models.length>0&&this.data.models[0].list?this.data.models[0].list.toJSON():[];_.each(b,function(d,c){this._fileURLs.push(d.fileUrl+"&fileName="+d.fileName);this._fileSizes.push(this.bytesToSize(d.fileSize))},this)},bytesToSize:function(b){var d=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"];if(b==0){return"0 "+d[0]}var c=parseInt(Math.floor(Math.log(b)/Math.log(1024)));return((c==0)?(b/Math.pow(1024,c)):(b/Math.pow(1024,c)).toFixed(1))+" "+d[c]},_getStatusText:function(b){if(b.pendingCreate){this.$el.find("#ct_row_"+b.id+" .rt_endpointsync_text.added_next_sync").removeClass("hidden");this.$el.find("#ct_row_"+b.id+" .buttoncontainer").addClass("web_only")}else{if(b.pendingDelete&&b.onPhone){this.$el.find("#ct_row_"+b.id+" .rt_endpointsync_text.removed_next_sync").removeClass("hidden")}else{if(b.onPhone){this.$el.find("#ct_row_"+b.id+" .rt_endpointsync_text.on_phone").removeClass("hidden")}else{this.$el.find("#ct_row_"+b.id+" .rt_endpointsync_text.web_only").removeClass("hidden");this.$el.find("#ct_row_"+b.id+" .buttoncontainer").addClass("web_only")}}}},_setAddRemoveButton:function(b){if(!this._isIPhone||(this._isIPhone&&!b.onPhone)){if(b.onPhone||b.pendingCreate){this.$el.find("#ct_row_"+b.id+" ."+this._css.BTN_REMOVEFROMPHONE).removeClass("hidden")}else{this.$el.find("#ct_row_"+b.id+" ."+this._css.BTN_ADDTOPHONE).removeClass("hidden")}}}})})();
/*! Modal */
(function(){AMA.namespace("view");var a=AMA.view.Modal=AMA.view.BaseView.extend();a.TEMPLATE_ID="dialog_template";a.TEMPLATE_SRC="";_.extend(a.prototype,{initialize:function(){a.__super__.initialize.apply(this,arguments);AMA.assert(this.options&&this.options.el,"Modal requires options.el parameter");this.hidden=true;this._config={content:this.options.content||false,showOk:this.options.showOk||false,showCancel:this.options.showCancel||false,showTitle:this.options.showTitle||true,showClose:this.options.showClose||true,showFooter:this.options.showFooter||true,okCallback:this.options.okCallback||null,cancelCallback:this.options.cancelCallback||null,okText:this.options.okText||null}},show:function(){var c=this.$el.find(".okBtn"),b=this.$el.find(".modal-body");if(this._config.showTitle){this.$el.find(".modal-title").html(this.$el.attr("title"));$(".modal-header").show();(this._config.showClose)?this.$el.find(".close").show():this.$el.find(".close").hide()}else{$(".modal-header").hide()}(this._config.showFooter)?this.$el.find(".modal-footer").show():this.$el.find(".modal-footer").hide();if(this._config.showOk){this._config.okCallback=this._config.okCallback||function(){};c.show();c.unbind("click");c.on("click",_.bind(function(){this.hide();this._config.okCallback()},this));if(this._config.okText!=null){c.html(this._config.okText)}}else{c.hide()}var d=this.$el.find(".button_cancel");if(this._config.showCancel){this._config.cancelCallback=this._config.cancelCallback||function(){};d.show();d.unbind("click");d.on("click",_.bind(function(){this.hide();this._config.cancelCallback()},this))}else{d.hide()}if(this._config.content){var b=this.$el.find(".modal-body");b.html(this._config.content)}this.$el.modal("show")},hide:function(){this.$el.modal("hide")},setContent:function(b){this._config.content=b}})})();
/*! Dialog */
(function(){AMA.namespace("view");var a=AMA.view.Dialog=AMA.view.BaseView.extend();a.TEMPLATE_ID="dialog_template";a.TEMPLATE_SRC="";_.extend(a.prototype,{initialize:function(){a.__super__.initialize.apply(this,arguments);AMA.assert(this.options&&this.options.el,"Dialog requires options.el parameter");this.hidden=true;this._config={modal:true,resizable:false,position:["center",150],minHeight:75,closeOnEscape:false,width:this.options.width||"auto",height:this.options.height||"auto",top:0,left:0,showTitle:this.options.showTitle||false,showClose:this.options.showClose||false,showOk:this.options.showOk||false,showCancel:this.options.showCancel||false,content:"",okCallback:this.options.okCallback||null,cancelCallback:this.options.cancelCallback||null}},show:function(){AMA.debug("Showing dialog "+this.options.el);var d=$(this.options.el);d.dialog(this._config).dialog("moveToTop");if(this._config.showTitle){$(".ui-dialog-titlebar").show();if(this._config.showClose){$(".ui-dialog-titlebar-close").show()}else{$(".ui-dialog-titlebar-close").hide()}}else{$(".ui-dialog-titlebar").hide()}var c=d.find(".button_ok");if(this._config.showOk){this._config.okCallback=this._config.okCallback||function(){};c.show();c.unbind("click");c.on("click",_.bind(function(){this.hide();this._config.okCallback()},this))}else{c.hide()}var e=d.find(".button_cancel");if(this._config.showCancel){this._config.cancelCallback=this._config.cancelCallback||function(){};e.show();e.unbind("click");e.on("click",_.bind(function(){this.hide();this._config.cancelCallback()},this))}else{e.hide()}var b=d.find(".message");b.html(this._config.content);d.find(".close").unbind("click").on("click",_.bind(this.hide,this))},hide:function(){AMA.debug("Closing dialog "+this.options.el);$(".ui-dialog-content").dialog("close");if(AMA.config.enableReporting&&this.options.el==="#sync_dialog"){var b={};b.Type="sync";AMA.ReportingManager.reportSyncEvent(AMA.config.reportingEventTypes.webSyncDialogCancelled,b)}},setContent:function(b){this._config.content=b}})})();
/*! StandardDialogs */
(function(){AMA.namespace("view");var a=AMA.view.StandardDialogs=AMA.view.BaseView.extend();a.TEMPLATE_ID="standard_dialogs_template";a.TEMPLATE_SRC="standarddialogs.tpl";a.EVENT=AMA.enums("BATCH_ACTION_CONFIRMED");AMA.augment(a.prototype,{initialize:function(){a.__super__.initialize.apply(this,arguments);this._events=a.EVENT},render:function(){a.__super__.render.apply(this,arguments);this.errorDialog=new AMA.view.Modal({el:"#error_dialog",parent:this,showTitle:true,showClose:true,showOk:true,showCancel:false,okText:"Ok",width:400});this.confirmDialog=new AMA.view.Modal({el:"#confirm_dialog",parent:this,showTitle:true,showClose:true,showOk:true,showCancel:true,width:400});this.statusDialog=new AMA.view.Modal({el:"#status_dialog",parent:this,showTitle:true,showClose:true,showOk:true,showCancel:false,width:400});this.loadingDialog=new AMA.view.Modal({el:"#loading_dialog",parent:this,showTitle:false,showClose:false,showOk:false,showFooter:false,showCancel:false})},confirm:function(d,c,b){this.confirmDialog._config.okCallback=c;this.confirmDialog._config.cancelCallback=b||this.closeConfirmDeleteDialog;this.confirmDialog._config.content=d;this.confirmDialog.show()},error:function(b,c){this.errorDialog._config.okCallback=c;this.errorDialog._config.content=b;this.errorDialog.show()},loading:function(b){this.loadingDialog._config.showFooter=false;this.loadingDialog._config.content=b+"<div class='loadingimage'></div>";this.loadingDialog.show()},hideloading:function(){this.loadingDialog.hide()},status:function(b,c){this.statusDialog._config.okCallback=c;this.statusDialog._config.content=b;this.statusDialog.show()}})})();
/*! Wizard */
(function(){AMA.namespace("view");var a=AMA.view.Wizard=AMA.view.Modal.extend();a.TEMPLATE_ID="";a.TEMPLATE_SRC="";a.CSS={STEP:"wiz_step",FIRST:"wiz_first",LAST:"wiz_last",ACTIVE:"current"};AMA.augment(a.prototype,{initialize:function(){a.__super__.initialize.apply(this,arguments);a.CSS=this.options.CSS||a.CSS},render:function(){a.__super__.render.apply(this,arguments)},_setupEvents:function(){var b=this;this._setupSteps();this.$el.find(".next").on("click",function(){$(b.steps[b.steps.index(b.$el.find(".modal-content ."+a.CSS.ACTIVE))]).removeClass(a.CSS.ACTIVE).next().addClass(a.CSS.ACTIVE);$(b.footerSteps[b.footerSteps.index(b.$el.find(".modal-footer ."+a.CSS.ACTIVE))]).removeClass(a.CSS.ACTIVE).next().addClass(a.CSS.ACTIVE)});this.$el.find(".previous").on("click",function(){$(b.steps[b.steps.index(b.$el.find(".modal-content ."+a.CSS.ACTIVE))]).removeClass(a.CSS.ACTIVE).prev().addClass(a.CSS.ACTIVE);$(b.footerSteps[b.footerSteps.index(b.$el.find(".modal-footer ."+a.CSS.ACTIVE))]).removeClass(a.CSS.ACTIVE).prev().addClass(a.CSS.ACTIVE)});this.$el.find(".done").on("click",function(){})},_setupSteps:function(){var d=this,b=this.$el.find("."+a.CSS.STEP),c=this.$el.find("."+a.CSS.STEP+"_footer");b.each(function(e){$(this).attr("id",d.el.id+"_"+e)});b.hide();c.hide();$(b[0]).addClass(a.CSS.FIRST+" "+a.CSS.ACTIVE);$(c[0]).addClass(a.CSS.FIRST+" "+a.CSS.ACTIVE);$(b[b.length-1]).addClass(a.CSS.LAST);$(c[c.length-1]).addClass(a.CSS.LAST);this.steps=b;this.footerSteps=c}})})();
/*! Page */
(function(){AMA.namespace("view");var a=AMA.view.Page=AMA.view.BaseView.extend();a.TEMPLATE_ID="page_template";a.TEMPLATE_SRC="page.tpl";AMA.augment(a.prototype,{render:function(){a.__super__.render.apply(this);this.header=new AMA.view.Header({el:"#header",parent:this});this.content=new AMA.view.Content({el:"#page_content",defaultTab:this.options.defaultTab,parent:this});this.standardDialogs=new AMA.view.StandardDialogs({el:"#standard_dialogs",parent:this,});this.settings=new AMA.view.Settings({el:"#settings_dialog",parent:this,hidden:true});this.feedback=new AMA.view.Feedback({el:"#feedback_dialogs",parent:this,hidden:false});this.checkPlatform();this.plug(AMA.view.plugin.PageViewedTracker,{tab:".report_event"})},_setupEvents:function(){$(window).bind("beforeunload",function(){AMA.session.sendSyncCommand()});$(document).on("focus","input",function(b){$("#footer").addClass("hidden")}).on("blur","input",function(b){$("#footer").removeClass("hidden")})},checkPlatform:function(){if(this.data.toJSON()[0].platform.indexOf("iOS")>-1){this.$el.addClass("ios")}},_onPageResize:function(b){if($(".modal-open").is(":visible")){$(".ama-menu.in").modal("toggle")}},fotterHack:function(){$("#body_container").css({minHeight:document.documentElement.clientHeight-$("#header_container").height()-47})},switchContent:function(f,c){var i=this.content,e=i.getChild(f+"_tab"),h=(c&&(f+"_"+c+"_tab"))||"",g=false;if(e){if(c&&!e.isRendered){e.options.defaultTab=h;g=true}i.switchTo(e);var b={dashboard_main:"dashboard",location:"locate",data:"backup",security:"security_selector",app_assist:"app_assist_selector",safe_browsing:"safebrowsing",support:"techsupport"};var d=b[f]?b[f]:f;this.$el.find("#"+d+"_tab, #"+d+"_modal_tab").addClass("selected").siblings().removeClass("selected");this.$el.find("#menu-tab-sm-btn>.selected").html(this.$el.find("#"+d+"_tab").html());if(c&&!g){e.switchTo(h);this.$el.find(".tab-"+c).addClass("selected").siblings().removeClass("selected")}}},openSettings:function(c,b){if(!this.settings.isRendered){var d=this;this.settings.on(AMA.view.BaseView.EVENT.RENDERED,function(){d.settings.show(c,b)});return}this.settings.show(c,b)},openShareFeedback:function(){this.feedback.openShareFeedback()},openSurvey:function(b){this.feedback.openSurvey(b)},logout:function(){AMA.debug("Logging out");AMA.session.logout()}})})();
/*! Header */
(function(){AMA.namespace("view");var a=AMA.view.Header=AMA.view.BaseView.extend();a.TEMPLATE_ID="header_template";a.TEMPLATE_SRC="";AMA.augment(a.prototype,{events:{"click #logout_link":"doLogout","click #account_settings_link":"openSettingsTab","click #share_feedback_link":"openShareFeedback"},initialize:function(){a.__super__.initialize.apply(this,arguments)},_setupEvents:function(){this.$el.find("#tabs .menu").children().on("click",function(c){var d=$(c.target),b=d.attr("tag");location.href=location.pathname+"#"+b});this.$el.find("#header-drop-menu").dropdown()},_processData:function(b){b.name=AMA.Util.formatPhone(this.parent.data.toJSON()[0].name);return b},render:function(){a.__super__.render.apply(this);var d=this;this.toolbar=new AMA.view.Toolbar({el:"#toolbar",parent:this});this.toolbar.once(AMA.view.BaseView.EVENT.RENDERED,function(){d.toolbar.registerToolset("endpoint",new AMA.view.EndPointToolset({el:"#endpoint_toolset",parent:this.toolbar,data:AMA.models.endpoints}));if(AMA.models.capabilities.canRead("storageInfo")){d.toolbar.registerToolset("storageCapacity",new AMA.view.StorageCapacityToolset({el:"#storage_capacity_toolset",parent:this.toolbar,data:AMA.models.storageInfo}))}if(AMA.models.capabilities.canRead("syncEvents_actionId")){d.toolbar.registerToolset("sync",new AMA.view.SyncToolset({parent:this.toolbar,el:"#sync_toolset"}).plug(AMA.view.plugin.Tooltip,{}))}if(AMA.models.capabilities.canRead("deviceWipeDataAction")){d.toolbar.registerToolset("wipe",new AMA.view.WipeToolset({el:"#wipe_toolset",parent:this.toolbar}).plug(AMA.view.plugin.Tooltip,{}))}if(AMA.models.capabilities.canRead("syncEvents_actionId")){d.toolbar.registerToolset("transferData",new AMA.view.TransferDataToolset({parent:this.toolbar,el:"#transfer_data_toolset"}).plug(AMA.view.plugin.Tooltip,{}))}d.toolbar.registerToolset("accountStatus",new AMA.view.AccountStatusToolset({parent:this.toolbar,el:"#account_status_toolset",data:AMA.models.devicesettings}));if(AMA.models.capabilities.canRead("deviceAlarmAction")){d.toolbar.registerToolset("alarm",new AMA.view.AlarmToolset({parent:this.toolbar,el:"#alarm_toolset"}).plug(AMA.view.plugin.Tooltip,{}))}if(AMA.models.capabilities.canRead("deviceLockAction")){d.toolbar.registerToolset("lock",new AMA.view.LockToolset({parent:this.toolbar,el:"#lock_toolset",data:AMA.models.locksettings}).plug(AMA.view.plugin.Tooltip,{}))}if(AMA.models.capabilities.canRead("locateDeviceEvents_actionId")){d.toolbar.registerToolset("locate",new AMA.view.LocateToolset({parent:this.toolbar,el:"#locate_toolset"}).plug(AMA.view.plugin.Tooltip,{}))}if(AMA.models.capabilities.canRead("deviceSecurePhoneAction")){d.toolbar.registerToolset("securePhone",new AMA.view.SecurePhoneToolset({parent:this.toolbar,el:"#securephone_toolset"}).plug(AMA.view.plugin.Tooltip,{}))}if(AMA.models.capabilities.canRead("appInfectionScanResults_actionId")){d.toolbar.registerToolset("scan",new AMA.view.ScanToolset({el:"#scan_toolset",parent:this.toolbar}).plug(AMA.view.plugin.Tooltip,{}))}if(AMA.models.capabilities.canRead("apphealthscanresults_id_resources")){d.toolbar.registerToolset("diagnosticScan",new AMA.view.DiagnosticScanToolset({el:"#diagnosticScan_toolset",parent:this.toolbar}).plug(AMA.view.plugin.Tooltip,{}))}if(AMA.models.capabilities.canRead("appVulnerabilityScanResults_id")){d.toolbar.registerToolset("AppAssist",new AMA.view.AppAssistToolset({el:"#app_assist_toolset",parent:this.toolbar,data:AMA.models.privacy}))}});var c=AMA.Util&&AMA.Util.getCookie("loginAttempt")||0;if(c){AMA.debug("Reporting MR Result for successful login...");var b={};b.SuccessFailureFlag="S";AMA.ReportingManager.reportMRResult("login","",b)}AMA.Util.deleteCookie("loginAttempt")},addToolbar:function(b,c){return this.toolbar.addToolbar(b,c)},switchToolbar:function(b){this.toolbar.switchTo(b)},doLogout:function(){AMA.page.logout()},openSettingsTab:function(){AMA.page.openSettings("location")},openShareFeedback:function(){AMA.page.openShareFeedback()},showAdaptiveView:function(b){AMA.showAdaptiveSite()}})})();
/*! Content */
(function(){AMA.namespace("view");var a=AMA.view.Content=AMA.view.BaseView.extend();a.TEMPLATE_ID="content_template";a.TEMPLATE_SRC="";AMA.augment(a.prototype,{initialize:function(){a.__super__.initialize.apply(this,arguments);this.plug(AMA.view.plugin.Switcher);this._afterRender=function(){};this.plug(AMA.view.plugin.TimeSpentTracker,{event:this.SWITCH_VIEW_EVENT});this.enabledFeatures=[]},render:function(){AMA.page.header.toolbar.registerSwitcher(this);a.__super__.render.apply(this);this.dashboardTab=new AMA.view.DashboardTab({el:"#dashboard_main_tab",parent:this});if(!AMA.models.capabilities.canRead("contacts")&&!AMA.models.capabilities.canRead("files")&&!AMA.models.capabilities.canRead("locateDeviceEvents_actionId")&&!AMA.models.capabilities.canRead("appInfectionScanResults_actionId")&&!AMA.models.capabilities.canRead("appVulnerabilityScanResults_id")&&!AMA.models.capabilities.canRead("browserSecuritySettings")&&!AMA.models.capabilities.canRead("apphealthscanresults_id_resources")){$("#header_link").hide();$("#dashboard_tab").hide();$("#backup_tab").hide();$("#data_tab").hide();$("#location_tab").hide();$("#locate_tab").hide();$("#security_tab").hide();$("#security_selector_tab").hide();$("#app_assist_tab").hide();$("#app_assist_selector_tab").hide();$("#safebrowsing_tab").hide();$("#safe_browsing_tab").hide();$("#techsupport_tab").hide();$("#support_tab").hide();$("#backup_modal_tab").remove();$("#download_tab").show();this.downloadAppTab=new AMA.view.DownloadAppTab({el:"#download_app_tab",parent:this});$("#account_settings_link").hide();$("#share_feedback_link").show();location.hash="home/download_app"}else{if(AMA.models.capabilities.canRead("contacts")||AMA.models.capabilities.canRead("files")){this.dataTab=new AMA.view.DataTab({el:"#data_tab",parent:this});this.dataTab.plug(AMA.view.plugin.Switcher);$("#backup_tab").show()}else{$("#backup_tab").hide();$("#data_tab").hide();this.enabledFeatures.push("#backup_modal_tab")}if(AMA.models.capabilities.canRead("locateDeviceEvents_actionId")){this.locationTab=new AMA.view.LocationTab({el:"#location_tab",parent:this});$("#locate_tab").show()}else{$("#location_tab").hide();$("#locate_tab").hide();this.enabledFeatures.push("#locate_modal_tab")}if(AMA.models.capabilities.canRead("appInfectionScanResults_actionId")){this.securityTab=new AMA.view.SecurityTab({el:"#security_tab",parent:this});$("#security_selector_tab").show()}else{$("#security_tab").hide();$("#security_selector_tab").hide();this.enabledFeatures.push("#security_selector_modal_tab")}if(AMA.models.capabilities.canRead("appVulnerabilityScanResults_id")){this.privacyTab=new AMA.view.AppAssistTab({el:"#app_assist_tab",parent:this,noAutoRefresh:true,data:AMA.models.privacy});$("#app_assist_selector_tab").show()}else{$("#app_assist_tab").hide();$("#app_assist_selector_tab").hide();this.enabledFeatures.push("#app_assist_selector_modal_tab")}if(AMA.models.capabilities.canRead("apphealthscanresults_id_resources")){this.supportTab=new AMA.view.SupportTabView({el:"#support_tab",parent:this});$("#techsupport_tab").show()}else{$("#techsupport_tab").hide();$("#support_tab").hide();this.enabledFeatures.push("#techsupport_modal_tab")}}_.each(this.enabledFeatures,function(c,b){$(c).remove()})}})})();
/*! Switcher */
(function(){AMA.namespace("view.plugin");AMA.view.plugin.Switcher={__name__:"Switcher",__onPlug__:function(a){AMA.assert(this.getChild!=null,"Switcher plug-in is attached to a non-view host object");this.options.defaultTab=a&&a.defaultTab||this.options.defaultTab;this.SWITCH_VIEW_EVENT="switchview"},switchTo:function(b){var a=(typeof b.show==="function")?b:this.getChild(b);if(!a||a.parent!==this){AMA.error("[Switcher] '"+b+"' is not a child view of '"+this.$el.attr("id")+"'.");return}AMA.debug(this.options.el+" is switching to tab "+a.options.el);this.currentTab=a;_.each(this.children,function(c){c.hide()});a.show();this.trigger(this.SWITCH_VIEW_EVENT,{to:a});return this.currentTab},_afterRender:function(){this.switchTo(this.options.defaultTab||this.children[0])}}})();
/*! ApiPaginator */
(function(){AMA.namespace("view.plugin");var a=30;AMA.view.plugin.ApiPaginator={__name__:"ApiPaginator",__onPlug__:function(b){AMA.assert(this._selectItem!=null,"Paginator plug-in is attached to a non-ListView object");this.options.pageSize=this.data&&this.data.pageSize||a;this.options.pageSelector=b&&b.pageSelector;this.currentPage=1;this.pageCount=0;AMA.debug("Paginator plug-in has been plugged into "+this.options.el);if(this.options.pageSelector){AMA.debug("Linking the Paginator plug-in to page selector element");$(this.options.pageSelector).on("change",_.bind(this._onPageSelectorChange,this))}},_afterRender:function(){this.__beforePlug__.ApiPaginator._afterRender.apply(this,arguments);this.pageCount=Math.ceil(this.data.attributes.total/this.data.pageSize);if(this._invalidateFromSearch){this.pageCount=Math.ceil(this.data.length/this.data.pageSize)}if(this.options.pageSelector){this._renderPageSelector()}if(this.currentPage>this.pageCount){this._onPageSelectorChange()}},_addPageFilter:function(c){var b=this._getPageRange(c);this.addFilter("pagination",function(e,d){return d>=b.first&&d<=b.last},4);this.currentPage=c},_getPageRange:function(c){var b={first:(c-1)*this.data.pageSize,last:Math.min(c*this.data.pageSize-1,this.data.attributes.total-1)};if(this._invalidateFromSearch){b.last=Math.min(c*this.data.pageSize-1,this.data.length-1)}return b},_renderPageSelector:function(){AMA.debug("Rendering page selector of "+this.options.el);var c,e,d="",b=$(this.options.pageSelector);for(c=1;c<=this.pageCount;c++){e=this._getPageRange(c);d+="<option value='"+c+"'>"+(e.first+1)+" - "+(e.last+1)+"</option>"}if(e){if(e.first+1===1&&e.last+1===1){b.closest("#ct_batchselect").hide()}else{b.closest("#ct_batchselect").show()}}else{b.closest("#ct_batchselect").hide()}b.html(d);b.prop("disabled",this._items.length===0);b.val(this.currentPage)},_onPageSelectorChange:function(){var b=$(this.options.pageSelector);if(this.currentPage>this.pageCount){this.data.offset=(this.currentPage-2)*this.data.pageSize}else{this.data.offset=(b.val()-1)*this.data.pageSize}this.currentPage=(this.data.offset/this.data.pageSize)+1;AMA.debug(this.options.el+" is switching to page "+this.currentPage+" of "+this.pageCount);b.val(this.currentPage);this.data.invalidate()}}})();
/*! Paginator */
(function(){AMA.namespace("view.plugin");var a=30;AMA.view.plugin.Paginator={__name__:"Paginator",__onPlug__:function(b){AMA.assert(this._selectItem!=null,"Paginator plug-in is attached to a non-ListView object");this.options.pageSize=b&&b.pageSize||a;this.options.pageSelector=b&&b.pageSelector;this.currentPage=1;this.pageCount=0;this._nonPaginatedDataset=this.data&&this.data.toJSON()||[];this._mustResetPagination=true;AMA.debug("Paginator plug-in has been plugged into "+this.options.el);if(this.options.pageSelector){AMA.debug("Linking the Paginator plug-in to page selector element");$(this.options.pageSelector).on("change",_.bind(this._onPageSelectorChange,this))}this.on(AMA.view.ListView.EVENT.FILTER_ADDED,this._onFilterChange);this.on(AMA.view.ListView.EVENT.FILTER_REMOVED,this._onFilterChange)},_onFilterChange:function(b){if(b.which!=="pagination"){this._mustResetPagination=true}},_beforeRender:function(){this.__beforePlug__.Paginator._beforeRender.apply(this,arguments);if(this._mustResetPagination){this._addPageFilter(1);this._mustResetPagination=false}},_afterRender:function(){this.__beforePlug__.Paginator._afterRender.apply(this,arguments);this._nonPaginatedDataset=this._datasetBefore.pagination||[];this.pageCount=Math.ceil(this._nonPaginatedDataset.length/this.options.pageSize);if(this.options.pageSelector){this._renderPageSelector()}if(this.currentPage>this.pageCount){this.toPage(this.currentPage-1)}},toPage:function(b){if(this.pageCount===0){return}if(b>this.pageCount){b=this.pageCount}AMA.debug(this.options.el+" is switching to page "+b+" of "+this.pageCount);this._addPageFilter(b);this._doRender()},_addPageFilter:function(c){var b=this._getPageRange(c);this.addFilter("pagination",function(e,d){return d>=b.first&&d<=b.last},4);this.currentPage=c},_getPageRange:function(c){var b={first:(c-1)*this.options.pageSize,last:c*this.options.pageSize-1};if(!this._mustResetPagination){b.last=Math.min(b.last,this._nonPaginatedDataset.length-1)}return b},_renderPageSelector:function(){AMA.debug("Rendering page selector of "+this.options.el);var c,e,d="",b=$(this.options.pageSelector);for(c=1;c<=this.pageCount;c++){e=this._getPageRange(c);d+="<option value='"+c+"'>"+(e.first+1)+" - "+(e.last+1)+"</option>"}if(e){if(e.first+1===1&&e.last+1===1){b.closest("#ct_batchselect, .batchselect").hide()}else{b.closest("#ct_batchselect, .batchselect").show()}}else{b.closest("#ct_batchselect, .batchselect").hide()}b.html(d);b.prop("disabled",this._items.length===0);b.val(this.currentPage)},_onPageSelectorChange:function(){this.toPage($(this.options.pageSelector).val())}}})();
/*! Search */
(function(){AMA.namespace("view.plugin");var b=1000,a="&keyword=";AMA.view.plugin.ApiSearch={__name__:"ApiSearch",__onPlug__:function(c){AMA.assert(this._selectItem!=null,"Search plug-in is attached to a non-ListView object");this.options.searchInput=c&&c.searchInput;AMA.debug("Search plug-in has been attached to "+this.options.el);if(this.options.searchInput){AMA.debug("Linking the Search plug-in to search input field");$(this.options.searchInput).on("keyup",_.bind(this._onSearchKeyUp,this));this.__lastSearchKeyword=""}},_afterRender:function(){this._invalidateFromSearch=false;if(this.data.url.indexOf(a)>-1){this._invalidateFromSearch=true}this.__beforePlug__.ApiSearch._afterRender.apply(this,arguments)},_onSearchKeyUp:function(d){if(!this.isRendered){return}function c(){var f=new Date().getTime();if(f>=this.__searchKeyUpTime+b){var e=$(this.options.searchInput).val();if(e.toLowerCase()!==this.__lastSearchKeyword.toLowerCase()||d==true){this.__lastSearchKeyword=e;this.search(e)}}}this.__searchKeyUpTime=new Date().getTime();setTimeout(_.bind(c,this),b)},search:function(d){var c={params:{}};if(d){c.params.keyword=d;AMA.debug("Searching "+this.options.el+" for '"+d+"'");this.data.invalidate(c)}else{AMA.debug("Clearing search filter on "+this.options.el);this.data.invalidate()}}}})();
/*! Search */
(function(){AMA.namespace("view.plugin");var a=100;AMA.view.plugin.Search={__name__:"Search",__onPlug__:function(b){AMA.assert(this._selectItem!=null,"Search plug-in is attached to a non-ListView object");this.options.searchFields=b&&b.searchFields||[];this.options.searchInput=b&&b.searchInput;AMA.debug("Search plug-in has been attached to "+this.options.el);if(this.options.searchInput){AMA.debug("Linking the Search plug-in to search input field");$(this.options.searchInput).on("keyup",_.bind(this._onSearchKeyUp,this));this.__lastSearchKeyword=""}},_onSearchKeyUp:function(c){if(!this.isRendered){return}function b(){var e=new Date().getTime();if(e>=this.__searchKeyUpTime+a){var d=$(this.options.searchInput).val();if(d.toLowerCase()!==this.__lastSearchKeyword.toLowerCase()||c==true){this.__lastSearchKeyword=d;this.search(d)}}}this.__searchKeyUpTime=new Date().getTime();setTimeout(_.bind(b,this),a)},search:function(b){if(b){AMA.debug("Searching "+this.options.el+" for '"+b+"'");this.addFilter("search",function(c){return _.some(this.options.searchFields,function(d){var e=c[d]&&c[d].toString().toLowerCase();return e&&e.indexOf(b.toLowerCase())!==-1})})}else{AMA.debug("Clearing search filter on "+this.options.el);this.removeFilter("search")}this._doRender()}}})();
/*! InputPlaceholder */
(function(){AMA.namespace("view.plugin");var a="inputfadedtext";AMA.view.plugin.InputPlaceholder={__name__:"InputPlaceholder",__onPlug__:function(b){AMA.assert(this.getChild!=null,"InputPlaceholder plug-in is attached to a non-view host object");this.options.inputPlaceholderCss=b&&b.css||a},_setupEvents:function(){this.constructor.prototype._setupEvents.apply(this,arguments);var b=this;this.$el.find("[placeholder]").focus(function(){var c=$(this);if(c.val()==c.attr("placeholder")){c.val("");c.removeClass(b.options.inputPlaceholderCss)}}).blur(function(){var c=$(this);if(c.val()==""||c.val()==c.attr("placeholder")){c.addClass(b.options.inputPlaceholderCss);c.val(c.attr("placeholder"))}}).blur()}}})();
/*! MultiAction */
(function(){AMA.namespace("view.plugin");AMA.view.plugin.MultiAction={__name__:"MultiAction",__onPlug__:function(a){AMA.assert(this._selectItem!=null,"MultiAction plug-in is attached to a non-ListView object");this.options.dropDown=a&&a.dropDown;this.options.performButton=a&&a.performButton;AMA.debug("MultiAction plug-in has been plugged into "+this.options.el);if(this.options.dropDown&&this.options.performButton){this._$multiActionSelect=$(this.options.dropDown);this._$multiActionPerform=$(this.options.performButton);AMA.debug("Linking the MultiAction plug-in to the 'Action' drop down element and 'Perform' button");this._$multiActionPerform.on("click",_.bind(this.processBatchAction,this))}}}})();
/*! MultiSelector */
(function(){AMA.namespace("view.plugin");AMA.view.plugin.MultiSelector={__name__:"MultiSelector",__onPlug__:function(a){AMA.assert(this._selectItem!=null,"MultiSelector plug-in is attached to a non-ListView object");this.options.selectAll=a&&a.selectAll;AMA.debug("MultiSelector plug-in has been plugged into "+this.options.el);if(this.options.selectAll){this._$selectAll=$(this.options.selectAll);AMA.debug("Linking the MultiSelector plug-in to the 'Select All' element");this._$selectAll.on("click",_.bind(this._onClickSelectAll,this))}this._checkedItems=[]},getCheckedItems:function(){var a=this.$el.find(":checkbox:checked"),b=[];_.each(a,function(c){b.push(c.attributes.uid.value)});return b},_afterRender:function(){this.__beforePlug__.MultiSelector._afterRender.apply(this,arguments);var a=this;this.$el.find(":checkbox").each(function(){$(this).prop("checked",_.contains(a._checkedItems,$(this).attr("uid")))});if(this._$selectAll.is(":checkbox")){this._updateSelectAllCheckbox()}},_setupEvents:function(){this.__beforePlug__.MultiSelector._setupEvents.apply(this,arguments);this.$el.find(":checkbox").on("click",_.bind(this._onClickCheckbox,this))},_onClickSelectAll:function(){AMA.assert(this._$selectAll,"[MultiSelector] Illegal invocation of _onClickSelectAll()");var a=true;if(this._$selectAll.is(":checkbox")){a=this._$selectAll.prop("checked")}AMA.debug("'Select All' clicked. All items will be "+(a?"checked":"unchecked"));var b=this;this.$el.find(":checkbox").each(function(){$(this).prop("checked",a);if(a){b._checkedItems.push($(this).attr("uid"))}else{b._checkedItems=_.without(b._checkedItems,$(this).attr("uid"))}});this.$el.find(":checkbox").prop("checked",a)},_onClickCheckbox:function(b){var c=b.target,d=c.checked,a=c.attributes.uid.value;AMA.debug("Checkbox clicked for item "+a+"  Checked? "+d);if(d){this._checkedItems.push(a)}else{this._checkedItems=_.without(this._checkedItems,a)}if(this._$selectAll.is(":checkbox")){this._updateSelectAllCheckbox()}b.stopPropagation()},_updateSelectAllCheckbox:function(){var b=this._items.length===0,a=!b&&this.$el.find(":checkbox:not(:checked)").length===0;if(a){AMA.debug("All checkboxes are checked, so 'Select All' checkbox will also be checked")}else{if(b){AMA.debug("'Select All' checkbox is disabled because list is empty")}}this._$selectAll.prop("checked",a);this._$selectAll.prop("disabled",b)}}})();(function(){AMA.namespace("view.plugin");var a;AMA.view.plugin.Breakdown={__name__:"Breakdown",__onPlug__:function(b){AMA.assert(this._selectItem!=null,"Breakdown plug-in is attached to a non-ListView object");this.options.breakdownContainer=b&&b.breakdownContainer;AMA.debug("Breakdown plug-in has been plugged into "+this.options.el);if(this.options.breakdownContainer){this._$breakdownContainer=$(this.options.breakdownContainer);this._$breakdownContainer.hide()}},_afterRender:function(){var d=this._$breakdownContainer.find(".syncedwithphone_val"),c=this._$breakdownContainer.find(".savedonweb_val"),b=this._$breakdownContainer.find(".tobesynced_val");d.html(this.data.attributes.totalSynced||"0");c.html(this.data.attributes.total||"0");b.html(this.data.attributes.totalPendingSync||"0");this.parent.$el.find(".record_breakdown_spinner").hide();this._$breakdownContainer.show()}}})();
/*! Tooltip */
(function(){AMA.namespace("view.plugin");AMA.view.plugin.Tooltip={__name__:"Tooltip",__onPlug__:function(a){AMA.assert(this.getChild!=null,"Tooltip plug-in is attached to a non-view host object");this.defaults=_.extend({mouseOutDelay:750},a)},_afterRender:function(){this.__beforePlug__.Tooltip._afterRender.apply(this,arguments);var a=this;this.$el.find(".tooltip_icon, .tooltip_link").unbind().on("mouseover",function(){var b=$(this);if(b.siblings(".tooltip").html()!=""){b.addClass("open").siblings(".tooltip").show().unbind().on("mouseenter",function(){$(this).addClass("openTooltip")}).on("mouseleave",function(){$(this).hide();$(this).removeClass("openTooltip")})}}).on("mouseleave",function(){var b=this;setTimeout(function(){if(!$(b).siblings(".tooltip").hasClass("openTooltip")){$(b).removeClass("open").siblings(".tooltip").hide()}},a.defaults.mouseOutDelay)})}}})();
/*! UsageTracker */
(function(){AMA.namespace("view.plugin");AMA.view.plugin.PageViewedTracker={__name__:"PageViewedTracker",__onPlug__:function(a){AMA.assert(this.getChild!=null,"PageViewedTracker plug-in is attached to a non-view host object");var b=this;b.options.tab=a&&a.tab||this.options.tab;if(this.options.tab){$(document.body).on("mouseup",this.options.tab,function(c){b.reportAction(c)})}},_doReporting:function(c){var d,e={},b={},a=AMA.config.reportEvtDetailsArray[c];if(_.isArray(a)){if(a[0]){e.PageVisited=a[0];AMA.debug("Reporting : Logging Page Visited  Event "+a[0]);AMA.ReportingManager.reportPageVisited(e,a[1])}if(a[2]&&a[3]){AMA.debug("Reporting : Logging Action Performed Event"+a[2]);d=AMA.config.reportingEventTypes[a[2]];b.ActionPerformed=a[3];AMA.ReportingManager.reportUserAction(d,b)}}},reportAction:function(a){if(AMA.config.enableReporting){this._doReporting(a.currentTarget.id)}}}})();
/*! TimeSpentTracker */
(function(){AMA.namespace("view.plugin");AMA.view.plugin.TimeSpentTracker={__name__:"TimeSpentTracker",__onPlug__:function(a){AMA.assert(this.getChild!=null,"TimeSpentTracker plug-in is attached to a non-view host object");this.options.event=a&&a.event||this.options.event;if(this.options.event){this.on(this.options.event,function(b){this.reportTimeSpent(b)})}},_doReporting:function(a){if(a==="data_tab"){if(!AMA.config.enableDpTimeTracking){AMA.debug("Reporting: Start DP time spent timer as user is on Data Tab");AMA.config.enableDpTimeTracking=true;AMA.ReportingManager.reportPortalTimeSpent("DP","Start")}}else{if(a==="dashboard_main_tab"||a==="location_tab"||a==="security_tab"||a==="techsupport_tab"||a==="privacy_tab"||a==="safebrowsing_tab"||a==="replace_tab"){if(AMA.config.enableDpTimeTracking){AMA.debug("Reporting: stop DP time spent timer as user is on Data Tab--> ");AMA.ReportingManager.reportPortalTimeSpent("DP","Stop")}AMA.config.enableDpTimeTracking=false}}if(a==="location_tab"){if(!AMA.config.enableMrTimeTracking){AMA.debug("Reporting: Start MR time spent timer as user is on Location Tab");AMA.config.enableMrTimeTracking=true;AMA.ReportingManager.reportPortalTimeSpent("MR","Start")}}else{if(a==="dashboard_main_tab"||a==="security_tab"||a==="techsupport_tab"||a==="privacy_tab"||a==="safebrowsing_tab"||a==="replace_tab"||a==="data_tab"){if(AMA.config.enableMrTimeTracking){AMA.debug("Reporting: stop MR time spent timer as user is on Location Tab--> ");AMA.ReportingManager.reportPortalTimeSpent("MR","Stop")}AMA.config.enableMrTimeTracking=false}}},reportTimeSpent:function(a){if(AMA.config.enableReporting){this._doReporting(a.to.$el.attr("id"))}}}})();
/*! ApiListScrollLoader */
(function(){AMA.namespace("view.plugin");var a=30;AMA.view.plugin.ApiListScrollLoader={__name__:"ApiListScrollLoader",__onPlug__:function(b){AMA.assert(this._selectItem!=null,"ApiListScrollLoader plug-in is attached to a non-ListView object");this.options.pageSize=this.data&&this.data.pageSize||a;this.options.scrollContainer=b&&b.scrollContainer;this.options.listItemType=b&&b.listItemType;this.options.listItemClassname=b&&b.listItemClassname;this.options.editorElement=b&&b.editorElement;this.currentPage=1;this.pageCount=0;this.touchStart=false;AMA.debug("ApiListScrollLoader plug-in has been plugged into "+this.options.el);if(this.options.scrollContainer){AMA.debug("Linking the ApiListScrollLoader plug-in to scrollable element "+this.options.scrollContainer);$(this.options.scrollContainer).on("scroll",_.bind(this._onContainerScroll,this));$(window).on("scroll",_.bind(this._onContainerScroll,this));this.on(AMA.view.ListView.EVENT.NEW_DATA_LOADED,_.bind(this._onContainerScroll,this))}},_afterRender:function(){this.__beforePlug__.ApiListScrollLoader._afterRender.apply(this,arguments);this.pageCount=Math.ceil(this.data.attributes.total/this.data.pageSize);this.currentPage=1;if(this._invalidateFromSearch){this.pageCount=Math.ceil(this.data.length/this.data.pageSize)}if(this.options.scrollContainer){$(this.options.scrollContainer).scrollTop(0);this._renderListScrollLoader()}$(document).on("mousemove",".scroll-gesture",$.proxy(this.onMouseMove,this));$(document).on("mousedown",".scroll-gesture",$.proxy(this.onMouseDown,this))},_renderListScrollLoader:function(){AMA.debug("Rendering scroll loader of "+this.options.scrollContainer);var b="",c=this.options.listItemType,d=this.options.listItemClassname;b+="<"+c+" class='"+d+" load-marker loading'><span class='progressing'></span></"+c+">";if(this.pageCount>1&&this.currentPage!=this.pageCount){this.$el.append(b);this.$loadMarker=$(".load-marker",this.$el)}},_onContainerScroll:function(){if(this.options.editorElement&&$(this.options.editorElement).is(":visible")){return}if(this.$loadMarker&&this.$loadMarker.is(":visible")){var c=this.$loadMarker[0].getBoundingClientRect(),b=$(this.options.scrollContainer)[0].getBoundingClientRect(),d=(c.top>=0&&c.left>=0&&c.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&c.right<=(window.innerWidth||document.documentElement.clientWidth)&&c.bottom<=b.bottom);if(d){this._loadNextPage()}}},_loadNextPage:function(){if(!this.data.isFetching){if(this.currentPage>=this.pageCount){this.data.offset=0;this.$loadMarker.hide();return}else{this.data.offset=(this.currentPage)*this.data.pageSize}this.currentPage=(this.data.offset/this.data.pageSize)+1;var b=this;this.data.fetch({reset:false,remove:false,silent:true,success:function(e,d){var c="";_.each(e.models.slice(b.data.offset,e.models.length),function(g,f){c+=_.template(b.template,b._processData(g.attributes,f))});b.$loadMarker.before(c);b._setupEvents()},complete:function(){b.data.offset=0}})}},onMouseDown:function(b){this.touchStart=true;this.axis={y:b.clientY,offset:b.offsetY,screen:b.screenY};$(document).on("mouseup mouseout",".scroll-gesture",function(){this.touchStart=false})},onMouseMove:function(b){if(!this.touchStart){return}this.$el.find(".scroll-gesture").animate({top:""})}}})();
/*! ListScrollLoader */
(function(){AMA.namespace("view.plugin");var a=30;AMA.view.plugin.ListScrollLoader={__name__:"ListScrollLoader",__onPlug__:function(b){AMA.assert(this._selectItem!=null,"ListScrollLoader plug-in is attached to a non-ListView object");this.options.pageSize=this.data&&this.data.pageSize||a;this.options.scrollContainer=b&&b.scrollContainer;this.options.listItemType=b&&b.listItemType;this.options.listItemClassname=b&&b.listItemClassname;this.currentPage=1;this.pageCount=0;this._nonPaginatedDataset=this.data&&this.data.toJSON()||[];this._mustResetPagination=true;AMA.debug("ListScrollLoader plug-in has been plugged into "+this.options.el);if(this.options.scrollContainer){AMA.debug("Linking the ListScrollLoader plug-in to scrollable element "+this.options.scrollContainer);$(this.options.scrollContainer).on("scroll",_.bind(this._onContainerScroll,this));$(window).on("scroll",_.bind(this._onContainerScroll,this));this.on(AMA.view.ListView.EVENT.NEW_DATA_LOADED,_.bind(this._onContainerScroll,this))}this.on(AMA.view.ListView.EVENT.FILTER_ADDED,this._onFilterChange);this.on(AMA.view.ListView.EVENT.FILTER_REMOVED,this._onFilterChange)},_onFilterChange:function(b){if(b.which!=="pagination"){this._mustResetPagination=true}},_beforeRender:function(){this.__beforePlug__.ListScrollLoader._beforeRender.apply(this,arguments);if(this._mustResetPagination){this._addPageFilter(1);this._mustResetPagination=false}},_afterRender:function(){this.__beforePlug__.ListScrollLoader._afterRender.apply(this,arguments);this._nonPaginatedDataset=this._datasetBefore.pagination||[];this.setPageCount();if(this.options.scrollContainer){this._renderListScrollLoader();$(this.options.scrollContainer).scrollTop(0)}},setPageCount:function(){this.pageCount=Math.ceil(this._nonPaginatedDataset.length/this.options.pageSize)},toPage:function(b){if(this.pageCount===0){return}if(b>this.pageCount){b=this.pageCount}AMA.debug(this.options.el+" is switching to page "+b+" of "+this.pageCount);this._addPageFilter(b);this._applyFilters();var c="",d=this.$el.children(":not(.load-marker)").length;_.each(this._dataset,function(f,e){e=e+d;c+=_.template(this.template,this._processData(f,e))},this);this.$loadMarker.before(c);this._setupEvents();this.setPageCount();this.removeFilter("pagination")},_addPageFilter:function(c){var b=this._getPageRange(c);this.addFilter("pagination",function(e,d){return d>=b.first&&d<=b.last},4);this.currentPage=c},_getPageRange:function(c){var b={first:(c-1)*this.options.pageSize,last:c*this.options.pageSize-1};if(!this._mustResetPagination){b.last=Math.min(b.last,this._nonPaginatedDataset.length-1)}return b},_renderListScrollLoader:function(){AMA.debug("Rendering scroll loader of "+this.options.scrollContainer);var b="",c=this.options.listItemType,d=this.options.listItemClassname;b+="<"+c+" class='"+d+" load-marker loading'><span class='progressing'></span></"+c+">";if(this.pageCount>1){this.$el.append(b);this.$loadMarker=$(".load-marker",this.$el)}},_onContainerScroll:function(){if(this.$loadMarker&&this.$loadMarker.is(":visible")){var c=this.$loadMarker[0].getBoundingClientRect(),b=$(this.options.scrollContainer)[0].getBoundingClientRect(),d=(c.top>=0&&c.left>=0&&c.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&c.right<=(window.innerWidth||document.documentElement.clientWidth)&&c.bottom<=b.bottom);if(d){this._loadNextPage()}}},_loadNextPage:function(){if(this.currentPage<this.pageCount){this.toPage(this.currentPage+1)}if(this.currentPage==this.pageCount){this.$loadMarker.hide()}},}})();(function(){AMA.namespace("view.plugin");AMA.view.plugin.ModalGallery={__name__:"ModalGallery",_config:{settings:{container:"#blueimp-gallery",slidesContainer:"div",titleElement:"h3",displayClass:"blueimp-gallery-display",controlsClass:"blueimp-gallery-controls",singleClass:"blueimp-gallery-single",leftEdgeClass:"blueimp-gallery-left",rightEdgeClass:"blueimp-gallery-right",playingClass:"blueimp-gallery-playing",slideClass:"slide",slideLoadingClass:"slide-loading",slideErrorClass:"slide-error",slideContentClass:"slide-content",toggleClass:"toggle",prevClass:"prev",nextClass:"next",closeClass:"close",playPauseClass:"play-pause",typeProperty:"type",titleProperty:"title",urlProperty:"href",displayTransition:true,clearSlides:true,stretchImages:false,toggleControlsOnReturn:true,toggleSlideshowOnSpace:true,enableKeyboardNavigation:true,closeOnEscape:true,closeOnSlideClick:true,closeOnSwipeUpOrDown:true,emulateTouchEvents:true,stopTouchEventsPropagation:false,hidePageScrollbars:true,disableScroll:true,carousel:false,continuous:true,unloadElements:true,startSlideshow:false,slideshowInterval:5000,index:0,preloadRange:2,useBootstrapModal:false,transitionSpeed:400,slideshowTransitionSpeed:undefined,},galleryTemplateId:"#blueimp-gallery_template",detailsObj:""},gallery:false,__onPlug__:function(a){AMA.assert(this.getChild!=null,"ModalGallery plug-in is attached to a non-view host object");this.currentIndex=0;this._config.settings=_.defaults(a.settings,this._config.settings);this._config.galleryTemplateId=_.defaults(a.galleryTemplateId,this._config.galleryTemplateId);this._config.detailsObj=_.defaults(a.detailsObj,this._config.detailsObj);this.initGallery()},initGallery:function(){var a=this;Gallery=blueimp.Gallery;Gallery.prototype.options=this._config.settings;if(!$(this._config.galleryTemplateId).size()){return}this.parent.$el.append($(this._config.galleryTemplateId).html());if(this._config.detailsObj.isRendered){return}this.$el.on("click","[data-gallery]",function(b){var c=$(this).data("gallery");viewObj=a,widget=$(c),container=(widget.length&&widget)||$(Gallery.prototype.options.container),callbacks={onopen:function(){container.data("gallery",this).trigger("open")},onopened:function(){container.trigger("opened")},onslide:function(){viewObj.galleryOnSlide(arguments)},onslideend:function(){container.trigger("slideend",arguments)},onslidecomplete:function(){container.trigger("slidecomplete",arguments)},onclose:function(){container.trigger("close")},onclosed:function(){container.trigger("closed").removeData("gallery")}},options=$.extend(container.data(),{container:container[0],index:this,event:b},callbacks),links=$('[data-gallery="'+c+'"]');if(options.filter){links=links.filter(options.filter)}viewObj.photoGallery=new Gallery(links,options);return viewObj.photoGallery})},galleryOnSlide:function(){var c=arguments[0][0],a=arguments[0][1],e=$(a),d=$(this.selectedItem),f=this,b="#"+$("[data-gallery]")[c].id;this.currentIndex=c;if(e.find("img").attr("src")===d.find("img").attr("src")){$("[data-index="+c+"]").html($(this._config.detailsObj).html())}else{this._selectItem($(b)[0]);this.once(AMA.view.ListView.EVENT.NEW_DATA_LOADED,function(g){this.eventChangesOnGallery(g,c)},this)}},eventChangesOnGallery:function(b,a){$("[data-index="+a+"]").html(b)},galleryOnSlideComplete:function(){},}})();
/*! ReportingManager */
(function(){AMA.ReportingManager=function(){var a=this;a.ENDPOINT="reportEvents";a.URL="logEntries";return{reportEvent:function(c,d,e){if(!c){AMA.debug("Reporting: eventType cannot be null. No reports will be saved.");return}if(!AMA.models.capabilities.canCreate("reportEvents")){AMA.error("User has no capability to send report events");if(e){e(false)}return}AMA.debug("Reporting to server: "+c);var b=AMA.config.apiHostUrl+"/"+a.ENDPOINT+"?"+$.param({devId:AMA.config.devId,endpointId:AMA.config.endpointId,authToken:AMA.config.authToken});d.eventType=c;this._requestReport(b,d,e)},afterReportingTimeSpentEvent:function(b){AMA.debug("Reporting to Server: In Function afterReportingEvent--> "+b);AMA.debug("In afterReportingEvent function and server response is "+b);if(b&&typeof b.dpTimerInSession!=="undefined"&&b.dpTimerInSession!==null){if(b.dpTimerInSession===true){AMA.config.enableDpTimeTracking=true}else{AMA.config.enableDpTimeTracking=false}}if(b&&typeof b.mrTimerInSession!=="undefined"&&b.mrTimerInSession!==null){if(b.mrTimerInSession===true){AMA.config.enableMrTimeTracking=true}else{AMA.config.enableMrTimeTracking=false}}},reportPageVisited:function(c,d){if(typeof c==="undefined"||!c){AMA.debug("eventProps could not be null. No reports saved.");return}AMA.debug("Reporting page visit on feature...");var b={};b.SessionId=AMA.config.sessionId;b.EndpointId=AMA.config.accountDetails.endpointId;if(d){b.SubEvent=AMA.config.reportingEventTypes.dppagevisited}else{b.SubEvent=AMA.config.reportingEventTypes.webpagevisited}_.extend(b,c);this.reportEvent(AMA.config.reportingEventTypes.pagenavigated,b)},reportUserAction:function(b,d){AMA.debug("Reporting user action...");var c=d;c.SessionId=AMA.config.sessionId;c.EndpointId=AMA.config.accountDetails.endpointId;c.SubEvent=b;this.reportEvent(AMA.config.reportingEventTypes.useractionperformed,c)},reportPortalTimeSpent:function(b,f){if(f.toLowerCase()==="start"){AMA.debug("Usage timer on "+b+" feature started.");AMA.Util.setCookie(b+"StartTime",new Date().getTime(),1)}else{if(f.toLowerCase()==="stop"){AMA.debug("Usage timer on "+b+" feature started.");AMA.debug("Reporting on time spent on feature...");var e=AMA.Util.getCookie(b+"StartTime");var d=new Date().getTime();var c={};c.SessionId=AMA.config.sessionId;c.EndpointId=AMA.config.accountDetails.endpointId;c[b+"TimeSpent"]=d-e;c[b+"TimeLoggingCondition"]=f;this.reportEvent(AMA.config.reportingEventTypes[b.toLowerCase()+"timespent"],c,this.afterReportingTimeSpentEvent)}else{AMA.debug("Invalid condition: "+f);AMA.debug("No reports saved for time sent.")}}},reportMRAttempt:function(b,d){if(!AMA.config.enableReporting){return}AMA.debug("Reporting MR attempt...");var c={MRFunction:b,SessionId:AMA.config.csrfToken||AMA.config.authToken,EndpointId:AMA.config.endpointId,UsageID:d||"NoActionID",Timestamp:new Date().getTime().toString()};this.reportEvent(AMA.config.reportingEventTypes.webMRAttempt,c)},reportMRResult:function(b,e,c){if(!AMA.config.enableReporting){return}AMA.debug("Reporting MR result...");var d={MRFunction:b,SessionId:AMA.config.csrfToken||AMA.config.authToken,EndpointId:AMA.config.endpointId,UsageID:e||"NoActionID",Timestamp:new Date().getTime().toString()};_.extend(d,c||{});this.reportEvent(AMA.config.reportingEventTypes.webMRResult,d)},reportSyncEvent:function(b,d){AMA.debug("Reporting to Server: In Function reportSyncEvent--> "+b);var c={};c.Platform=AMA.models.endpoints.models[0].get("platformfriendlyname");_.extend(c,d);this.reportEvent(b,c)},_requestReport:function(b,d,e){var c=AMA.Util.createCORSRequest("POST",b);if(c){c.onload=function(){try{var f=JSON.parse(this.responseText)}catch(g){AMA.error("POST "+b+" - Reporting Manager - response not JSON: "+this.responseText)}if(e&&f){e(f)}else{if(e){e(true)}}};c.onerror=function(g,f,h){AMA.ActionManager._onAjaxError(g,f,h)};AMA.debug("Sending AJAX request: "+b);c.send(JSON.stringify(d))}},remoteLog:function(e,g,f){AMA.debug("Logging to Server: "+e);var d=AMA.config.apiHostUrl+"/"+a.URL+"?"+$.param({devId:AMA.config.devId,endpointId:AMA.config.endpointId,authToken:AMA.config.authToken});var c="[appName: "+navigator.appName+" appVersion: "+navigator.appVersion+" appCodeName: "+navigator.appCodeName+"] ";var b={level:(typeof g==="undefined"||!g)?AMA.config.JsonConstants.LOGLEVEL_STATES.ERROR:g,message:c+e,account:AMA.config.accountDetails.accountId};if(typeof f==="undefined"||!f){b.duration=f}this._requestReport(d,b)}}}()})();
/*! Router */
(function(){AMA.Router=Backbone.Router.extend({routes:{"home/":"showDefaultView","home/:tab":"switchView","home/:tab/:subtab":"switchView","":"showDefaultView","index/to/path/:tab/:subtab":"switchView"},defaultSubtabs:{data:"contacts"},initialize:function(){AMA.currentEndpoint=0},showDefaultView:function(){this.switchView(AMA.config.defaultView)},switchView:function(b,a){if(AMA.Util.getCookie("lastVisited")){var c="#"+AMA.Util.getCookie("lastVisited");AMA.Util.deleteCookie("lastVisited");window.location.hash=c}a=a||this.defaultSubtabs[b]||"";if(!this.pageCreated){AMA.page=new AMA.view.Page({el:"#page_container",defaultTab:b+(a?"_"+a:"")+"_tab",noAutoRefresh:true,data:AMA.models.endpoints});AMA.page.show();this.pageCreated=true}if(!AMA.page.isRendered){AMA.page.on(AMA.view.BaseView.EVENT.RENDERED,function(){AMA.page.content.on(AMA.view.BaseView.EVENT.RENDERED,function(){AMA.page.switchContent(b,a)})});return}AMA.page.switchContent(b,a)},showSettingsView:function(a){if(!AMA.page.isRendered){AMA.page.on(AMA.view.BaseView.EVENT.RENDERED,function(){AMA.page.openSettings(a)});return}AMA.page.openSettings(a)},demoAwd:function(){if(AMA.isMobileBrowsing()){window.close()}else{window.location.hash="#home/dashboard_main"}}})})();