/*! Dialog */
(function(){AMA.namespace("view");var a=AMA.view.Dialog=AMA.view.BaseView.extend();a.TEMPLATE_ID="dialog_template";a.TEMPLATE_SRC="";_.extend(a.prototype,{initialize:function(){a.__super__.initialize.apply(this,arguments);AMA.assert(this.options&&this.options.el,"Dialog requires options.el parameter");this.hidden=true;this._config={modal:true,resizable:false,position:["center",150],minHeight:75,closeOnEscape:false,width:this.options.width||"auto",height:this.options.height||"auto",top:0,left:0,showTitle:this.options.showTitle||false,showClose:this.options.showClose||false,showOk:this.options.showOk||false,showCancel:this.options.showCancel||false,content:"",okCallback:this.options.okCallback||null,cancelCallback:this.options.cancelCallback||null}},show:function(){AMA.debug("Showing dialog "+this.options.el);var d=$(this.options.el);d.dialog(this._config).dialog("moveToTop");if(this._config.showTitle){$(".ui-dialog-titlebar").show();if(this._config.showClose){$(".ui-dialog-titlebar-close").show()}else{$(".ui-dialog-titlebar-close").hide()}}else{$(".ui-dialog-titlebar").hide()}var c=d.find(".button_ok");if(this._config.showOk){this._config.okCallback=this._config.okCallback||function(){};c.show();c.unbind("click");c.on("click",_.bind(function(){this.hide();this._config.okCallback()},this))}else{c.hide()}var e=d.find(".button_cancel");if(this._config.showCancel){this._config.cancelCallback=this._config.cancelCallback||function(){};e.show();e.unbind("click");e.on("click",_.bind(function(){this.hide();this._config.cancelCallback()},this))}else{e.hide()}var b=d.find(".message");b.html(this._config.content);d.find(".close").unbind("click").on("click",_.bind(this.hide,this))},hide:function(){AMA.debug("Closing dialog "+this.options.el);$(".ui-dialog-content").dialog("close");if(AMA.config.enableReporting&&this.options.el==="#sync_dialog"){var b={};b.Type="sync";AMA.ReportingManager.reportSyncEvent(AMA.config.reportingEventTypes.webSyncDialogCancelled,b)}},setContent:function(b){this._config.content=b}})})();