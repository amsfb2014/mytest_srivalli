/*! SettingsView */
(function(){AMA.namespace("view");var a=AMA.view.Settings=AMA.view.BaseView.extend();a.TEMPLATE_ID="settings_template";a.TEMPLATE_SRC="settings.tpl";AMA.augment(a.prototype,{initialize:function(){a.__super__.initialize.apply(this,arguments);this.events=a.EVENT},render:function(){a.__super__.render.apply(this,arguments);var b=false,c=AMA.Util.isAndroid();if((c&&AMA.models.capabilities.canUpdate("mediaSettings"))||(!c&&AMA.models.capabilities.canRead("mediaSettings"))){b=true}this.settingsDialog=new AMA.view.SettingsDialog({el:"#settings_dialog",parent:this,settingsIntro:false,backupSettings:b,locationSettings:AMA.models.capabilities.canRead("eventSettings"),profileSettings:true,securitySettings:AMA.models.capabilities.canRead("appSecuritySettings"),safeBrowsingSettings:AMA.models.capabilities.canRead("browserSecuritySettings")}).plug(AMA.view.plugin.Switcher)},_setupEvents:function(){this.$el.find(".settings_nav_button").on("click",function(){$(this).find("a").get(0).click()});var b=this;this.$el.find("#myTabDrop1").dropdown()},show:function(c,b){if(b){this.settingsDialog._config.prevURL=b}if(!this.settingsDialog.isRendered){var d=this;this.settingsDialog.on(AMA.view.BaseView.EVENT.RENDERED,function(){d.openSettingsDialog(c)});return}this.openSettingsDialog(c)},openSettingsDialog:function(b){if(!this.settingsDialog.$el.is(":visible")){$("#account_settings_link").toggleClass("active");AMA.page.content.$el.toggleClass("hidden");this.settingsDialog.show()}this.settingsDialog.options.defaultTab=b;this.$el.find(".nav-tabs li").removeClass("active");switch(b){case"backup":if(this.settingsDialog.backupSettings){this.$el.find(".nav-tabs .settings_nav_button_backup").parent().addClass("active");this.settingsDialog.switchTo(this.settingsDialog.backupSettings)}break;case"location":if(this.settingsDialog.locationSettings){this.$el.find(".nav-tabs .settings_nav_button_location").parent().addClass("active");this.settingsDialog.switchTo(this.settingsDialog.locationSettings)}break;case"security":if(this.settingsDialog.securitySettings){this.$el.find(".nav-tabs .settings_nav_button_security").parent().addClass("active");this.settingsDialog.switchTo(this.settingsDialog.securitySettings)}break;default:if(this.settingsDialog.profileSettings){this.$el.find(".nav-tabs .settings_nav_button_profile").parent().addClass("active");this.settingsDialog.switchTo(this.settingsDialog.profileSettings)}break}}})})();