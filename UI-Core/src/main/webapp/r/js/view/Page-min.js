/*! Page */
(function(){AMA.namespace("view");var a=AMA.view.Page=AMA.view.BaseView.extend();a.TEMPLATE_ID="page_template";a.TEMPLATE_SRC="page.tpl";AMA.augment(a.prototype,{render:function(){a.__super__.render.apply(this);this.header=new AMA.view.Header({el:"#header",parent:this});this.content=new AMA.view.Content({el:"#page_content",defaultTab:this.options.defaultTab,parent:this});this.standardDialogs=new AMA.view.StandardDialogs({el:"#standard_dialogs",parent:this,});this.settings=new AMA.view.Settings({el:"#settings_dialog",parent:this,hidden:true});this.feedback=new AMA.view.Feedback({el:"#feedback_dialogs",parent:this,hidden:false});this.checkPlatform();this.plug(AMA.view.plugin.PageViewedTracker,{tab:".report_event"})},_setupEvents:function(){$(window).bind("beforeunload",function(){AMA.session.sendSyncCommand()});$(document).on("focus","input",function(b){$("#footer").addClass("hidden")}).on("blur","input",function(b){$("#footer").removeClass("hidden")})},checkPlatform:function(){if(this.data.toJSON()[0].platform.indexOf("iOS")>-1){this.$el.addClass("ios")}},_onPageResize:function(b){if($(".modal-open").is(":visible")){$(".ama-menu.in").modal("toggle")}},fotterHack:function(){$("#body_container").css({minHeight:document.documentElement.clientHeight-$("#header_container").height()-47})},switchContent:function(f,c){var i=this.content,e=i.getChild(f+"_tab"),h=(c&&(f+"_"+c+"_tab"))||"",g=false;if(e){if(c&&!e.isRendered){e.options.defaultTab=h;g=true}i.switchTo(e);var b={dashboard_main:"dashboard",location:"locate",data:"backup",security:"security_selector",app_assist:"app_assist_selector",safe_browsing:"safebrowsing",support:"techsupport"};var d=b[f]?b[f]:f;this.$el.find("#"+d+"_tab, #"+d+"_modal_tab").addClass("selected").siblings().removeClass("selected");this.$el.find("#menu-tab-sm-btn>.selected").html(this.$el.find("#"+d+"_tab").html());if(c&&!g){e.switchTo(h);this.$el.find(".tab-"+c).addClass("selected").siblings().removeClass("selected")}}},openSettings:function(c,b){if(!this.settings.isRendered){var d=this;this.settings.on(AMA.view.BaseView.EVENT.RENDERED,function(){d.settings.show(c,b)});return}this.settings.show(c,b)},openShareFeedback:function(){this.feedback.openShareFeedback()},openSurvey:function(b){this.feedback.openSurvey(b)},logout:function(){AMA.debug("Logging out");AMA.session.logout()}})})();