/*! AppAssisttab */
(function(){AMA.namespace("view");var a=AMA.view.AppAssistTab=AMA.view.BaseView.extend();a.TEMPLATE_ID="privacy_template";a.TEMPLATE_SRC="appassist.tpl";a.TOOLBAR={DEFAULT:["endpoint","AppAssist"]};AMA.augment(a.prototype,{initialize:function(){a.__super__.initialize.apply(this,arguments);this.on(AMA.view.BaseView.EVENT.DATA_LOADED,function(){this.data.sortByKey("name","asc")})},events:{"click #app_assist_go":"search"},_processData:function(b){if(!this.data.attributes.total){this.data.attributes.total=this.data.length}return this.data.attributes},_setupEvents:function(){var b=this;$(this.$el).find("#privacy_sort").on("change",function(){var d=$(this),c=d.val().split("-");AMA.debug("======= sorting data =======");$("#privacy").find(".submenu-label").html($("[value="+d.val()+"]").html());AMA.models.privacy.sortByKey(c[0],c[1])});$(this.$el).on("click",".privacy_sort",function(){var d=$(this),c=d.data("value").split("-");AMA.debug("======= sorting data =======");$("#privacy").find(".submenu-label").html($("[data-value="+d.data("value")+"]").html());AMA.models.privacy.sortByKey(c[0],c[1])});$(this.$el).find("#privacy_filter").on("change",function(){var d=$(this),c=$(b.$el);AMA.debug("Clearing search filter on "+b.$el);b.appAssistList.removeFilter("batteryOrMemoryUsageRating");b.appAssistList.removeFilter("personalInfoAccessRating");b.appAssistList.removeFilter("messageAccessRating");b.appAssistList.removeFilter("locationAccessRating");if(d.val()!=="all"){AMA.debug("Applying search filter for "+d.val());b.appAssistList.addFilter(d.val(),function(e){return _.some(d.val(),function(f){var g=e[d.val()];return g!==null})})}$("#privacy").find(".submenu-label").html($("[value="+d.val()+"]").html());b.appAssistList.refresh()});$(this.$el).on("click",".privacy_filter",function(){var d=$(this),c=$(b.$el);AMA.debug("Clearing search filter on "+b.$el);b.appAssistList.removeFilter("batteryOrMemoryUsageRating");b.appAssistList.removeFilter("personalInfoAccessRating");b.appAssistList.removeFilter("messageAccessRating");b.appAssistList.removeFilter("locationAccessRating");if(d.data("value")!=="all"){AMA.debug("Applying search filter for "+d.data("value"));b.appAssistList.addFilter(d.data("value"),function(e){return _.some(d.data("value"),function(f){var g=e[d.data("value")];return g!==null})})}$("#privacy").find(".submenu-label").html($("[data-value="+d.data("value")+"]").html());b.appAssistList.refresh()})},search:function(){this.appAssistList._onSearchKeyUp(true)},render:function(){a.__super__.render.apply(this);this.appAssistList=new AMA.view.AppAssistListView({parent:this,el:"#privacy_rowbox",data:AMA.models.privacy}).plug(AMA.view.plugin.Search,{searchInput:"#privacy_searchinput",searchFields:["name"]});this.appAssistDetails=new AMA.view.AppAssistDetailsView({parent:this,el:"#privacy_details",listView:this.appAssistList,dataClass:AMA.model.Privacy})}})})();