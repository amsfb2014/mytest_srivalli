/*! Header */
(function(){AMA.namespace("view");var a=AMA.view.Header=AMA.view.BaseView.extend();a.TEMPLATE_ID="header_template";a.TEMPLATE_SRC="";AMA.augment(a.prototype,{events:{"click #logout_link":"doLogout","click #account_settings_link":"openSettingsTab","click #share_feedback_link":"openShareFeedback"},initialize:function(){a.__super__.initialize.apply(this,arguments)},_setupEvents:function(){this.$el.find("#tabs .menu").children().on("click",function(c){var d=$(c.target),b=d.attr("tag");location.href=location.pathname+"#"+b});this.$el.find("#header-drop-menu").dropdown()},_processData:function(b){b.name=AMA.Util.formatPhone(this.parent.data.toJSON()[0].name);return b},render:function(){a.__super__.render.apply(this);var d=this;this.toolbar=new AMA.view.Toolbar({el:"#toolbar",parent:this});this.toolbar.once(AMA.view.BaseView.EVENT.RENDERED,function(){d.toolbar.registerToolset("endpoint",new AMA.view.EndPointToolset({el:"#endpoint_toolset",parent:this.toolbar,data:AMA.models.endpoints}));if(AMA.models.capabilities.canRead("storageInfo")){d.toolbar.registerToolset("storageCapacity",new AMA.view.StorageCapacityToolset({el:"#storage_capacity_toolset",parent:this.toolbar,data:AMA.models.storageInfo}))}if(AMA.models.capabilities.canRead("syncEvents_actionId")){d.toolbar.registerToolset("sync",new AMA.view.SyncToolset({parent:this.toolbar,el:"#sync_toolset"}).plug(AMA.view.plugin.Tooltip,{}))}if(AMA.models.capabilities.canRead("deviceWipeDataAction")){d.toolbar.registerToolset("wipe",new AMA.view.WipeToolset({el:"#wipe_toolset",parent:this.toolbar}).plug(AMA.view.plugin.Tooltip,{}))}if(AMA.models.capabilities.canRead("syncEvents_actionId")){d.toolbar.registerToolset("transferData",new AMA.view.TransferDataToolset({parent:this.toolbar,el:"#transfer_data_toolset"}).plug(AMA.view.plugin.Tooltip,{}))}d.toolbar.registerToolset("accountStatus",new AMA.view.AccountStatusToolset({parent:this.toolbar,el:"#account_status_toolset",data:AMA.models.devicesettings}));if(AMA.models.capabilities.canRead("deviceAlarmAction")){d.toolbar.registerToolset("alarm",new AMA.view.AlarmToolset({parent:this.toolbar,el:"#alarm_toolset"}).plug(AMA.view.plugin.Tooltip,{}))}if(AMA.models.capabilities.canRead("deviceLockAction")){d.toolbar.registerToolset("lock",new AMA.view.LockToolset({parent:this.toolbar,el:"#lock_toolset",data:AMA.models.locksettings}).plug(AMA.view.plugin.Tooltip,{}))}if(AMA.models.capabilities.canRead("locateDeviceEvents_actionId")){d.toolbar.registerToolset("locate",new AMA.view.LocateToolset({parent:this.toolbar,el:"#locate_toolset"}).plug(AMA.view.plugin.Tooltip,{}))}if(AMA.models.capabilities.canRead("deviceSecurePhoneAction")){d.toolbar.registerToolset("securePhone",new AMA.view.SecurePhoneToolset({parent:this.toolbar,el:"#securephone_toolset"}).plug(AMA.view.plugin.Tooltip,{}))}if(AMA.models.capabilities.canRead("appInfectionScanResults_actionId")){d.toolbar.registerToolset("scan",new AMA.view.ScanToolset({el:"#scan_toolset",parent:this.toolbar}).plug(AMA.view.plugin.Tooltip,{}))}if(AMA.models.capabilities.canRead("apphealthscanresults_id_resources")){d.toolbar.registerToolset("diagnosticScan",new AMA.view.DiagnosticScanToolset({el:"#diagnosticScan_toolset",parent:this.toolbar}).plug(AMA.view.plugin.Tooltip,{}))}if(AMA.models.capabilities.canRead("appVulnerabilityScanResults_id")){d.toolbar.registerToolset("AppAssist",new AMA.view.AppAssistToolset({el:"#app_assist_toolset",parent:this.toolbar,data:AMA.models.privacy}))}});var c=AMA.Util&&AMA.Util.getCookie("loginAttempt")||0;if(c){AMA.debug("Reporting MR Result for successful login...");var b={};b.SuccessFailureFlag="S";AMA.ReportingManager.reportMRResult("login","",b)}AMA.Util.deleteCookie("loginAttempt")},addToolbar:function(b,c){return this.toolbar.addToolbar(b,c)},switchToolbar:function(b){this.toolbar.switchTo(b)},doLogout:function(){AMA.page.logout()},openSettingsTab:function(){AMA.page.openSettings("location")},openShareFeedback:function(){AMA.page.openShareFeedback()},showAdaptiveView:function(b){AMA.showAdaptiveSite()}})})();