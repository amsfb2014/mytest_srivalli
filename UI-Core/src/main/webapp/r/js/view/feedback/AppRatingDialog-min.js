/*! AppRatingDialog */
(function(){AMA.namespace("view");var a=AMA.view.AppRatingDialog=AMA.view.Modal.extend();a.TEMPLATE_ID="app_rating_dialog_template";a.TEMPLATE_SRC="";a.COOKIE_EXPIRY=3650;a.SESSION_ID=AMA.Util.guid();_.extend(a.prototype,{events:{"click .close":"hideSurvey","click #app_rating_dialog_rate_later":"remindMeLater","click #app_rating_dialog_rate_never":"ratingNoThanks","click #app_rating_dialog_rate_now":"rateApp"},hideSurvey:function(){var b={surveyId:this._surveyId,webUserExperienceSurveySessionId:a.SESSION_ID,sessionId:AMA.config.sessionId,endpointId:AMA.config.endpointId,action:"close",timeStamp:new Date().getTime().toString()};AMA.ReportingManager.reportEvent(AMA.config.reportingEventTypes.webAppRatingCancel,b);this.hide()},remindMeLater:function(){var b={surveyId:this._surveyId,webUserExperienceSurveySessionId:a.SESSION_ID,sessionId:AMA.config.sessionId,endpointId:AMA.config.endpointId,action:"later",timeStamp:new Date().getTime().toString()};AMA.ReportingManager.reportEvent(AMA.config.reportingEventTypes.webAppRatingCancel,b);this.hide()},ratingNoThanks:function(){var b={surveyId:this._surveyId,webUserExperienceSurveySessionId:a.SESSION_ID,sessionId:AMA.config.sessionId,endpointId:AMA.config.endpointId,action:"never",timeStamp:new Date().getTime().toString()};AMA.ReportingManager.reportEvent(AMA.config.reportingEventTypes.webAppRatingCancel,b);if(this._surveyId==10||this._surveyId==11){AMA.Util.setCookie("dismissSurvey",true,a.COOKIE_EXPIRY)}this.hide()},rateApp:function(){if(this._surveyId==10||this._surveyId==11){AMA.Util.setCookie("dismissSurvey",true,a.COOKIE_EXPIRY)}var b={surveyId:this._surveyId,webUserExperienceSurveySessionId:a.SESSION_ID,sessionId:AMA.config.sessionId,endpointId:AMA.config.endpointId,timeStamp:new Date().getTime().toString()};AMA.ReportingManager.reportEvent(AMA.config.reportingEventTypes.webAppRatingGo,b);window.open(this._appRatingUrl,"_blank");this.hide()},show:function(d,b){this._surveyId=d;this._appRatingUrl=b;var c={surveyId:this._surveyId,webUserExperienceSurveySessionId:a.SESSION_ID,sessionId:AMA.config.sessionId,endpointId:AMA.config.endpointId,timeStamp:new Date().getTime().toString()};AMA.ReportingManager.reportEvent(AMA.config.reportingEventTypes.webAppRatingPrompt,c);a.__super__.show.apply(this,arguments)}})})();